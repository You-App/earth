/*!
 * Project-specific code is Copyright (c) 2024 Cameron Beccario
 *
 * See github.com/cambecc/earth for an older free version of this project.
 */

var jx=Object.defineProperty;var zx=(e,t)=>{for(var r in t)jx(e,r,{get:t[r],enumerable:!0})};function Bx(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}var aa=Bx;function $x(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(e);if(o.length===0)return r([]);var i=o.length;function a(c,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(f){a(c,f)},function(f){o[c]={status:"rejected",reason:f},--i===0&&r(o)});return}}o[c]={status:"fulfilled",value:l},--i===0&&r(o)}for(var s=0;s<o.length;s++)a(s,o[s])})}var sa=$x;function vf(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}vf.prototype=Error.prototype;function qx(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError("Promise.any accepts an array"));var o=Array.prototype.slice.call(e);if(o.length===0)return n();for(var i=[],a=0;a<o.length;a++)try{t.resolve(o[a]).then(r).catch(function(s){i.push(s),i.length===o.length&&n(new vf(i,"All promises were rejected"))})}catch(s){n(s)}})}var ca=qx;var Wx=setTimeout;function bf(e){return!!(e&&typeof e.length<"u")}function Yx(){}function Xx(e,t){return function(){e.apply(t,arguments)}}function Ee(e){if(!(this instanceof Ee))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Sf(e,this)}function wf(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,Ee._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?bc:Ao)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(o){Ao(t.promise,o);return}bc(t.promise,n)})}function bc(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var r=t.then;if(t instanceof Ee){e._state=3,e._value=t,wc(e);return}else if(typeof r=="function"){Sf(Xx(r,t),e);return}}e._state=1,e._value=t,wc(e)}catch(n){Ao(e,n)}}function Ao(e,t){e._state=2,e._value=t,wc(e)}function wc(e){e._state===2&&e._deferreds.length===0&&Ee._immediateFn(function(){e._handled||Ee._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)wf(e,e._deferreds[t]);e._deferreds=null}function Kx(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function Sf(e,t){var r=!1;try{e(function(n){r||(r=!0,bc(t,n))},function(n){r||(r=!0,Ao(t,n))})}catch(n){if(r)return;r=!0,Ao(t,n)}}Ee.prototype.catch=function(e){return this.then(null,e)};Ee.prototype.then=function(e,t){var r=new this.constructor(Yx);return wf(this,new Kx(e,t,r)),r};Ee.prototype.finally=aa;Ee.all=function(e){return new Ee(function(t,r){if(!bf(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var o=n.length;function i(s,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var l=c.then;if(typeof l=="function"){l.call(c,function(u){i(s,u)},r);return}}n[s]=c,--o===0&&t(n)}catch(u){r(u)}}for(var a=0;a<n.length;a++)i(a,n[a])})};Ee.any=ca;Ee.allSettled=sa;Ee.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Ee?e:new Ee(function(t){t(e)})};Ee.reject=function(e){return new Ee(function(t,r){r(e)})};Ee.race=function(e){return new Ee(function(t,r){if(!bf(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,o=e.length;n<o;n++)Ee.resolve(e[n]).then(t,r)})};Ee._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){Wx(e,0)};Ee._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var Tf=Ee;var Mr=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();typeof Mr.Promise!="function"?Mr.Promise=Tf:(Mr.Promise.prototype.finally||(Mr.Promise.prototype.finally=aa),Mr.Promise.allSettled||(Mr.Promise.allSettled=sa),Mr.Promise.any||(Mr.Promise.any=ca));ReadableStream.prototype[Symbol.asyncIterator]===void 0&&(ReadableStream.prototype[Symbol.asyncIterator]=async function*(){let e=this.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}});window.queueMicrotask===void 0&&(window.queueMicrotask=function(e){Promise.resolve().then(e)});var le={};zx(le,{color:()=>Ae,dispatch:()=>nt,drag:()=>Uo,geoConicEquidistant:()=>ii,geoEquirectangular:()=>oi,geoGraticule:()=>mn,geoMollweide:()=>ui,geoOrthographic:()=>ai,geoPath:()=>It,geoPatterson:()=>fi,geoPolyhedralWaterman:()=>mi,geoStereographic:()=>si,geoWinkel3:()=>di,hsl:()=>lr,interpolateBasis:()=>xr,interpolateCubehelixDefault:()=>vi,interpolateHcl:()=>gi,interpolateHsl:()=>hi,interpolateLab:()=>Xn,interpolateRdGy:()=>yi,interpolateRgb:()=>Ur,interpolateYlOrRd:()=>xi,lab:()=>Ct,pointer:()=>He,pointers:()=>On,rgb:()=>Ze,select:()=>V,selectAll:()=>$,selectorAll:()=>Nt,zoom:()=>Di,zoomIdentity:()=>Jt});function cr(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Dr(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function qt(){}var kr=.7,on=1/kr,Nn="\\s*([+-]?\\d+)\\s*",Po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jx=/^#([0-9a-f]{3,8})$/,Zx=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),Qx=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),e1=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${Po}\\)$`),t1=new RegExp(`^rgba\\(${$t},${$t},${$t},${Po}\\)$`),r1=new RegExp(`^hsl\\(${Po},${$t},${$t}\\)$`),n1=new RegExp(`^hsla\\(${Po},${$t},${$t},${Po}\\)$`),_f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cr(qt,Ae,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ef,formatHex:Ef,formatHex8:o1,formatHsl:i1,formatRgb:Af,toString:Af});function Ef(){return this.rgb().formatHex()}function o1(){return this.rgb().formatHex8()}function i1(){return Cf(this).formatHsl()}function Af(){return this.rgb().formatRgb()}function Ae(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Jx.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Pf(t):r===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?la(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?la(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Zx.exec(e))?new Ve(t[1],t[2],t[3],1):(t=Qx.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=e1.exec(e))?la(t[1],t[2],t[3],t[4]):(t=t1.exec(e))?la(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=r1.exec(e))?kf(t[1],t[2]/100,t[3]/100,1):(t=n1.exec(e))?kf(t[1],t[2]/100,t[3]/100,t[4]):_f.hasOwnProperty(e)?Pf(_f[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function Pf(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function la(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ve(e,t,r,n)}function Mo(e){return e instanceof qt||(e=Ae(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function Ze(e,t,r,n){return arguments.length===1?Mo(e):new Ve(e,t,r,n==null?1:n)}function Ve(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}cr(Ve,Ze,Dr(qt,{brighter(e){return e=e==null?on:Math.pow(on,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kr:Math.pow(kr,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ve(nn(this.r),nn(this.g),nn(this.b),fa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mf,formatHex:Mf,formatHex8:a1,formatRgb:Df,toString:Df}));function Mf(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}`}function a1(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}${rn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Df(){let e=fa(this.opacity);return`${e===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${e===1?")":`, ${e})`}`}function fa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rn(e){return e=nn(e),(e<16?"0":"")+e.toString(16)}function kf(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Rt(e,t,r,n)}function Cf(e){if(e instanceof Rt)return new Rt(e.h,e.s,e.l,e.opacity);if(e instanceof qt||(e=Ae(e)),!e)return new Rt;if(e instanceof Rt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=NaN,s=i-o,c=(i+o)/2;return s?(t===i?a=(r-n)/s+(r<n)*6:r===i?a=(n-t)/s+2:a=(t-r)/s+4,s/=c<.5?i+o:2-i-o,a*=60):s=c>0&&c<1?0:a,new Rt(a,s,c,e.opacity)}function lr(e,t,r,n){return arguments.length===1?Cf(e):new Rt(e,t,r,n==null?1:n)}function Rt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}cr(Rt,lr,Dr(qt,{brighter(e){return e=e==null?on:Math.pow(on,e),new Rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kr:Math.pow(kr,e),new Rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new Ve(Sc(e>=240?e-240:e+120,o,n),Sc(e,o,n),Sc(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new Rt(Rf(this.h),ua(this.s),ua(this.l),fa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=fa(this.opacity);return`${e===1?"hsl(":"hsla("}${Rf(this.h)}, ${ua(this.s)*100}%, ${ua(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Rf(e){return e=(e||0)%360,e<0?e+360:e}function ua(e){return Math.max(0,Math.min(1,e||0))}function Sc(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var pa=Math.PI/180,ma=180/Math.PI;var da=18,Nf=.96422,Lf=1,Of=.82521,If=4/29,Ln=6/29,Ff=3*Ln*Ln,s1=Ln*Ln*Ln;function Vf(e){if(e instanceof Wt)return new Wt(e.l,e.a,e.b,e.opacity);if(e instanceof ur)return Uf(e);e instanceof Ve||(e=Mo(e));var t=Ac(e.r),r=Ac(e.g),n=Ac(e.b),o=Tc((.2225045*t+.7168786*r+.0606169*n)/Lf),i,a;return t===r&&r===n?i=a=o:(i=Tc((.4360747*t+.3850649*r+.1430804*n)/Nf),a=Tc((.0139322*t+.0971045*r+.7141733*n)/Of)),new Wt(116*o-16,500*(i-o),200*(o-a),e.opacity)}function Ct(e,t,r,n){return arguments.length===1?Vf(e):new Wt(e,t,r,n==null?1:n)}function Wt(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}cr(Wt,Ct,Dr(qt,{brighter(e){return new Wt(this.l+da*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new Wt(this.l-da*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=Nf*_c(t),e=Lf*_c(e),r=Of*_c(r),new Ve(Ec(3.1338561*t-1.6168667*e-.4906146*r),Ec(-.9787684*t+1.9161415*e+.033454*r),Ec(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function Tc(e){return e>s1?Math.pow(e,1/3):e/Ff+If}function _c(e){return e>Ln?e*e*e:Ff*(e-If)}function Ec(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ac(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function c1(e){if(e instanceof ur)return new ur(e.h,e.c,e.l,e.opacity);if(e instanceof Wt||(e=Vf(e)),e.a===0&&e.b===0)return new ur(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ma;return new ur(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Do(e,t,r,n){return arguments.length===1?c1(e):new ur(e,t,r,n==null?1:n)}function ur(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function Uf(e){if(isNaN(e.h))return new Wt(e.l,0,0,e.opacity);var t=e.h*pa;return new Wt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}cr(ur,Do,Dr(qt,{brighter(e){return new ur(this.h,this.c,this.l+da*(e==null?1:e),this.opacity)},darker(e){return new ur(this.h,this.c,this.l-da*(e==null?1:e),this.opacity)},rgb(){return Uf(this).rgb()}}));var zf=-.14861,Pc=1.78277,Mc=-.29227,ha=-.90649,ko=1.97294,Hf=ko*ha,Gf=ko*Pc,jf=Pc*Mc-ha*zf;function l1(e){if(e instanceof an)return new an(e.h,e.s,e.l,e.opacity);e instanceof Ve||(e=Mo(e));var t=e.r/255,r=e.g/255,n=e.b/255,o=(jf*n+Hf*t-Gf*r)/(jf+Hf-Gf),i=n-o,a=(ko*(r-o)-Mc*i)/ha,s=Math.sqrt(a*a+i*i)/(ko*o*(1-o)),c=s?Math.atan2(a,i)*ma-120:NaN;return new an(c<0?c+360:c,s,o,e.opacity)}function fr(e,t,r,n){return arguments.length===1?l1(e):new an(e,t,r,n==null?1:n)}function an(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}cr(an,fr,Dr(qt,{brighter(e){return e=e==null?on:Math.pow(on,e),new an(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kr:Math.pow(kr,e),new an(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*pa,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),o=Math.sin(e);return new Ve(255*(t+r*(zf*n+Pc*o)),255*(t+r*(Mc*n+ha*o)),255*(t+r*(ko*n)),this.opacity)}}));var u1={value:()=>{}};function $f(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new ga(r)}function ga(e){this._=e}function f1(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}ga.prototype=$f.prototype={constructor:ga,on:function(e,t){var r=this._,n=f1(e+"",r),o,i=-1,a=n.length;if(arguments.length<2){for(;++i<a;)if((o=(e=n[i]).type)&&(o=p1(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=n[i]).type)r[o]=Bf(r[o],e.name,t);else if(t==null)for(o in r)r[o]=Bf(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new ga(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,i=n.length;o<i;++o)n[o].value.apply(t,r)}};function p1(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function Bf(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=u1,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var nt=$f;var ya="http://www.w3.org/1999/xhtml",Dc={svg:"http://www.w3.org/2000/svg",xhtml:ya,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pr(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Dc.hasOwnProperty(t)?{space:Dc[t],local:e}:e}function m1(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ya&&t.documentElement.namespaceURI===ya?t.createElement(e):t.createElementNS(r,e)}}function d1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xa(e){var t=pr(e);return(t.local?d1:m1)(t)}function h1(){}function sn(e){return e==null?h1:function(){return this.querySelector(e)}}function qf(e){typeof e!="function"&&(e=sn(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,s=n[o]=new Array(a),c,l,u=0;u<a;++u)(c=i[u])&&(l=e.call(c,c.__data__,u,i))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new ve(n,this._parents)}function Ro(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function g1(){return[]}function Nt(e){return e==null?g1:function(){return this.querySelectorAll(e)}}function y1(e){return function(){return Ro(e.apply(this,arguments))}}function Wf(e){typeof e=="function"?e=y1(e):e=Nt(e);for(var t=this._groups,r=t.length,n=[],o=[],i=0;i<r;++i)for(var a=t[i],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(n.push(e.call(c,c.__data__,l,a)),o.push(c));return new ve(n,o)}function Co(e){return function(){return this.matches(e)}}function va(e){return function(t){return t.matches(e)}}var x1=Array.prototype.find;function v1(e){return function(){return x1.call(this.children,e)}}function b1(){return this.firstElementChild}function Yf(e){return this.select(e==null?b1:v1(typeof e=="function"?e:va(e)))}var w1=Array.prototype.filter;function S1(){return Array.from(this.children)}function T1(e){return function(){return w1.call(this.children,e)}}function Xf(e){return this.selectAll(e==null?S1:T1(typeof e=="function"?e:va(e)))}function Kf(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,s=n[o]=[],c,l=0;l<a;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&s.push(c);return new ve(n,this._parents)}function ba(e){return new Array(e.length)}function Jf(){return new ve(this._enter||this._groups.map(ba),this._parents)}function No(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}No.prototype={constructor:No,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zf(e){return function(){return e}}function _1(e,t,r,n,o,i){for(var a=0,s,c=t.length,l=i.length;a<l;++a)(s=t[a])?(s.__data__=i[a],n[a]=s):r[a]=new No(e,i[a]);for(;a<c;++a)(s=t[a])&&(o[a]=s)}function E1(e,t,r,n,o,i,a){var s,c,l=new Map,u=t.length,f=i.length,p=new Array(u),m;for(s=0;s<u;++s)(c=t[s])&&(p[s]=m=a.call(c,c.__data__,s,t)+"",l.has(m)?o[s]=c:l.set(m,c));for(s=0;s<f;++s)m=a.call(e,i[s],s,i)+"",(c=l.get(m))?(n[s]=c,c.__data__=i[s],l.delete(m)):r[s]=new No(e,i[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(p[s])===c&&(o[s]=c)}function A1(e){return e.__data__}function Qf(e,t){if(!arguments.length)return Array.from(this,A1);var r=t?E1:_1,n=this._parents,o=this._groups;typeof e!="function"&&(e=Zf(e));for(var i=o.length,a=new Array(i),s=new Array(i),c=new Array(i),l=0;l<i;++l){var u=n[l],f=o[l],p=f.length,m=P1(e.call(u,u&&u.__data__,l,n)),d=m.length,h=s[l]=new Array(d),g=a[l]=new Array(d),y=c[l]=new Array(p);r(u,f,h,g,y,m,t);for(var w=0,b=0,x,_;w<d;++w)if(x=h[w]){for(w>=b&&(b=w+1);!(_=g[b])&&++b<d;);x._next=_||null}}return a=new ve(a,n),a._enter=s,a._exit=c,a}function P1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ep(){return new ve(this._exit||this._groups.map(ba),this._parents)}function tp(e,t,r){var n=this.enter(),o=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function rp(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,i=n.length,a=Math.min(o,i),s=new Array(o),c=0;c<a;++c)for(var l=r[c],u=n[c],f=l.length,p=s[c]=new Array(f),m,d=0;d<f;++d)(m=l[d]||u[d])&&(p[d]=m);for(;c<o;++c)s[c]=r[c];return new ve(s,this._parents)}function np(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function op(e){e||(e=M1);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],s=a.length,c=o[i]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new ve(o,this._parents).order()}function M1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ip(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ap(){return Array.from(this)}function sp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}function cp(){let e=0;for(let t of this)++e;return e}function lp(){return!this.node()}function up(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function D1(e){return function(){this.removeAttribute(e)}}function k1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function R1(e,t){return function(){this.setAttribute(e,t)}}function C1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function N1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function L1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function fp(e,t){var r=pr(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?k1:D1:typeof t=="function"?r.local?L1:N1:r.local?C1:R1)(r,t))}function wa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function O1(e){return function(){this.style.removeProperty(e)}}function I1(e,t,r){return function(){this.style.setProperty(e,t,r)}}function F1(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function pp(e,t,r){return arguments.length>1?this.each((t==null?O1:typeof t=="function"?F1:I1)(e,t,r==null?"":r)):Rr(this.node(),e)}function Rr(e,t){return e.style.getPropertyValue(t)||wa(e).getComputedStyle(e,null).getPropertyValue(t)}function V1(e){return function(){delete this[e]}}function U1(e,t){return function(){this[e]=t}}function H1(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function mp(e,t){return arguments.length>1?this.each((t==null?V1:typeof t=="function"?H1:U1)(e,t)):this.node()[e]}function dp(e){return e.trim().split(/^|\s+/)}function kc(e){return e.classList||new hp(e)}function hp(e){this._node=e,this._names=dp(e.getAttribute("class")||"")}hp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gp(e,t){for(var r=kc(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function yp(e,t){for(var r=kc(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function G1(e){return function(){gp(this,e)}}function j1(e){return function(){yp(this,e)}}function z1(e,t){return function(){(t.apply(this,arguments)?gp:yp)(this,e)}}function xp(e,t){var r=dp(e+"");if(arguments.length<2){for(var n=kc(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?z1:t?G1:j1)(r,t))}function B1(){this.textContent=""}function $1(e){return function(){this.textContent=e}}function q1(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function vp(e){return arguments.length?this.each(e==null?B1:(typeof e=="function"?q1:$1)(e)):this.node().textContent}function W1(){this.innerHTML=""}function Y1(e){return function(){this.innerHTML=e}}function X1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function bp(e){return arguments.length?this.each(e==null?W1:(typeof e=="function"?X1:Y1)(e)):this.node().innerHTML}function K1(){this.nextSibling&&this.parentNode.appendChild(this)}function wp(){return this.each(K1)}function J1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sp(){return this.each(J1)}function Tp(e){var t=typeof e=="function"?e:xa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Z1(){return null}function _p(e,t){var r=typeof e=="function"?e:xa(e),n=t==null?Z1:typeof t=="function"?t:sn(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Q1(){var e=this.parentNode;e&&e.removeChild(this)}function Ep(){return this.each(Q1)}function ev(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ap(e){return this.select(e?tv:ev)}function Pp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rv(e){return function(t){e.call(this,t,this.__data__)}}function nv(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function ov(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,i;r<o;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function iv(e,t,r){return function(){var n=this.__on,o,i=rv(t);if(n){for(var a=0,s=n.length;a<s;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=t;return}}this.addEventListener(e.type,i,r),o={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(o):this.__on=[o]}}function Mp(e,t,r){var n=nv(e+""),o,i=n.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<i;++o)if((a=n[o]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?iv:ov,o=0;o<i;++o)this.each(s(n[o],t,r));return this}function Dp(e,t,r){var n=wa(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function av(e,t){return function(){return Dp(this,e,t)}}function sv(e,t){return function(){return Dp(this,e,t.apply(this,arguments))}}function kp(e,t){return this.each((typeof t=="function"?sv:av)(e,t))}function*Rp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var Lo=[null];function ve(e,t){this._groups=e,this._parents=t}function Cp(){return new ve([[document.documentElement]],Lo)}function cv(){return this}ve.prototype=Cp.prototype={constructor:ve,select:qf,selectAll:Wf,selectChild:Yf,selectChildren:Xf,filter:Kf,data:Qf,enter:Jf,exit:ep,join:tp,merge:rp,selection:cv,order:np,sort:op,call:ip,nodes:ap,node:sp,size:cp,empty:lp,each:up,attr:fp,style:pp,property:mp,classed:xp,text:vp,html:bp,raise:wp,lower:Sp,append:Tp,insert:_p,remove:Ep,clone:Ap,datum:Pp,on:Mp,dispatch:kp,[Symbol.iterator]:Rp};var mr=Cp;function V(e){return typeof e=="string"?new ve([[document.querySelector(e)]],[document.documentElement]):new ve([[e]],Lo)}function Sa(e){let t;for(;t=e.sourceEvent;)e=t;return e}function He(e,t){if(e=Sa(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}function On(e,t){return e.target&&(e=Sa(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,r=>He(r,t))}function $(e){return typeof e=="string"?new ve([document.querySelectorAll(e)],[document.documentElement]):new ve([Ro(e)],Lo)}var Np={passive:!1},cn={capture:!0,passive:!1};function Ta(e){e.stopImmediatePropagation()}function Cr(e){e.preventDefault(),e.stopImmediatePropagation()}function Oo(e){var t=e.document.documentElement,r=V(e).on("dragstart.drag",Cr,cn);"onselectstart"in t?r.on("selectstart.drag",Cr,cn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Io(e,t){var r=e.document.documentElement,n=V(e).on("dragstart.drag",null);t&&(n.on("click.drag",Cr,cn),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var Fo=e=>()=>e;function Vo(e,{sourceEvent:t,subject:r,target:n,identifier:o,active:i,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Vo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lv(e){return!e.ctrlKey&&!e.button}function uv(){return this.parentNode}function fv(e,t){return t==null?{x:e.x,y:e.y}:t}function pv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uo(){var e=lv,t=uv,r=fv,n=pv,o={},i=nt("start","drag","end"),a=0,s,c,l,u,f=0;function p(x){x.on("mousedown.drag",m).filter(n).on("touchstart.drag",g).on("touchmove.drag",y,Np).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,_){if(!(u||!e.call(this,x,_))){var A=b(this,t.call(this,x,_),x,_,"mouse");A&&(V(x.view).on("mousemove.drag",d,cn).on("mouseup.drag",h,cn),Oo(x.view),Ta(x),l=!1,s=x.clientX,c=x.clientY,A("start",x))}}function d(x){if(Cr(x),!l){var _=x.clientX-s,A=x.clientY-c;l=_*_+A*A>f}o.mouse("drag",x)}function h(x){V(x.view).on("mousemove.drag mouseup.drag",null),Io(x.view,l),Cr(x),o.mouse("end",x)}function g(x,_){if(e.call(this,x,_)){var A=x.changedTouches,k=t.call(this,x,_),P=A.length,N,M;for(N=0;N<P;++N)(M=b(this,k,x,_,A[N].identifier,A[N]))&&(Ta(x),M("start",x,A[N]))}}function y(x){var _=x.changedTouches,A=_.length,k,P;for(k=0;k<A;++k)(P=o[_[k].identifier])&&(Cr(x),P("drag",x,_[k]))}function w(x){var _=x.changedTouches,A=_.length,k,P;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<A;++k)(P=o[_[k].identifier])&&(Ta(x),P("end",x,_[k]))}function b(x,_,A,k,P,N){var M=i.copy(),D=He(N||A,_),O,L,v;if((v=r.call(x,new Vo("beforestart",{sourceEvent:A,target:p,identifier:P,active:a,x:D[0],y:D[1],dx:0,dy:0,dispatch:M}),k))!=null)return O=v.x-D[0]||0,L=v.y-D[1]||0,function S(E,I,C){var F=D,U;switch(E){case"start":o[P]=S,U=a++;break;case"end":delete o[P],--a;case"drag":D=He(C||I,_),U=a;break}M.call(E,x,new Vo(E,{sourceEvent:I,subject:v,target:p,identifier:P,active:U,x:D[0]+O,y:D[1]+L,dx:D[0]-F[0],dy:D[1]-F[1],dispatch:M}),k)}}return p.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Fo(!!x),p):e},p.container=function(x){return arguments.length?(t=typeof x=="function"?x:Fo(x),p):t},p.subject=function(x){return arguments.length?(r=typeof x=="function"?x:Fo(x),p):r},p.touchable=function(x){return arguments.length?(n=typeof x=="function"?x:Fo(!!x),p):n},p.on=function(){var x=i.on.apply(i,arguments);return x===i?p:x},p.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,p):Math.sqrt(f)},p}var Pe=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let r=this._partials,n=0;for(let o=0;o<this._n&&o<32;o++){let i=r[o],a=t+i,s=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);s&&(r[n++]=s),t=a}return r[n]=t,this._n=n+1,this}valueOf(){let t=this._partials,r=this._n,n,o,i,a=0;if(r>0){for(a=t[--r];r>0&&(n=a,o=t[--r],a=n+o,i=o-(a-n),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(o=i*2,n=a+o,o==n-a&&(a=n))}return a}};function*mv(e){for(let t of e)yield*t}function In(e){return Array.from(mv(e))}function dr(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(o);++n<o;)i[n]=e+n*r;return i}var z=1e-6,Ho=1e-12,K=Math.PI,ot=K/2,Fn=K/4,Ge=K*2,he=180/K,q=K/180,J=Math.abs,Vn=Math.atan,Ie=Math.atan2,G=Math.cos,Go=Math.ceil;var _a=Math.hypot;var H=Math.sin,ln=Math.sign||function(e){return e>0?1:e<0?-1:0},Ce=Math.sqrt;function Lp(e){return e>1?0:e<-1?K:Math.acos(e)}function ze(e){return e>1?ot:e<-1?-ot:Math.asin(e)}function Rc(e){return(e=H(e/2))*e}function be(){}function Ea(e,t){e&&Ip.hasOwnProperty(e.type)&&Ip[e.type](e,t)}var Op={Feature:function(e,t){Ea(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,o=r.length;++n<o;)Ea(r[n].geometry,t)}},Ip={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,o=r.length;++n<o;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cc(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,o=r.length;++n<o;)Cc(r[n],t,0)},Polygon:function(e,t){Fp(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,o=r.length;++n<o;)Fp(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,o=r.length;++n<o;)Ea(r[n],t)}};function Cc(e,t,r){var n=-1,o=e.length-r,i;for(t.lineStart();++n<o;)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function Fp(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)Cc(e[r],t,1);t.polygonEnd()}function St(e,t){e&&Op.hasOwnProperty(e.type)?Op[e.type](e,t):Ea(e,t)}var jo=new Pe,Vp=new Pe,Up,Hp,Nc,Lc,Oc,Yt={point:be,lineStart:be,lineEnd:be,polygonStart:function(){jo=new Pe,Yt.lineStart=dv,Yt.lineEnd=hv},polygonEnd:function(){var e=+jo;Vp.add(e<0?Ge+e:e),this.lineStart=this.lineEnd=this.point=be},sphere:function(){Vp.add(Ge)}};function dv(){Yt.point=gv}function hv(){Gp(Up,Hp)}function gv(e,t){Yt.point=Gp,Up=e,Hp=t,e*=q,t*=q,Nc=e,Lc=G(t=t/2+Fn),Oc=H(t)}function Gp(e,t){e*=q,t*=q,t=t/2+Fn;var r=e-Nc,n=r>=0?1:-1,o=n*r,i=G(t),a=H(t),s=Oc*a,c=Lc*i+s*G(o),l=s*n*H(o);jo.add(Ie(l,c)),Nc=e,Lc=i,Oc=a}function un(e){return[Ie(e[1],e[0]),ze(e[2])]}function Tt(e){var t=e[0],r=e[1],n=G(r);return[n*G(t),n*H(t),H(r)]}function zo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Aa(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Bo(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function fn(e){var t=Ce(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Me,pt,Ne,vt,pn,$p,qp,Un,$o,Nr,yr,gr={point:Ic,lineStart:jp,lineEnd:zp,polygonStart:function(){gr.point=Yp,gr.lineStart=yv,gr.lineEnd=xv,$o=new Pe,Yt.polygonStart()},polygonEnd:function(){Yt.polygonEnd(),gr.point=Ic,gr.lineStart=jp,gr.lineEnd=zp,jo<0?(Me=-(Ne=180),pt=-(vt=90)):$o>z?vt=90:$o<-z&&(pt=-90),yr[0]=Me,yr[1]=Ne},sphere:function(){Me=-(Ne=180),pt=-(vt=90)}};function Ic(e,t){Nr.push(yr=[Me=e,Ne=e]),t<pt&&(pt=t),t>vt&&(vt=t)}function Wp(e,t){var r=Tt([e*q,t*q]);if(Un){var n=hr(Un,r),o=[n[1],-n[0],0],i=hr(o,n);fn(i),i=un(i);var a=e-pn,s=a>0?1:-1,c=i[0]*he*s,l,u=J(a)>180;u^(s*pn<c&&c<s*e)?(l=i[1]*he,l>vt&&(vt=l)):(c=(c+360)%360-180,u^(s*pn<c&&c<s*e)?(l=-i[1]*he,l<pt&&(pt=l)):(t<pt&&(pt=t),t>vt&&(vt=t))),u?e<pn?xt(Me,e)>xt(Me,Ne)&&(Ne=e):xt(e,Ne)>xt(Me,Ne)&&(Me=e):Ne>=Me?(e<Me&&(Me=e),e>Ne&&(Ne=e)):e>pn?xt(Me,e)>xt(Me,Ne)&&(Ne=e):xt(e,Ne)>xt(Me,Ne)&&(Me=e)}else Nr.push(yr=[Me=e,Ne=e]);t<pt&&(pt=t),t>vt&&(vt=t),Un=r,pn=e}function jp(){gr.point=Wp}function zp(){yr[0]=Me,yr[1]=Ne,gr.point=Ic,Un=null}function Yp(e,t){if(Un){var r=e-pn;$o.add(J(r)>180?r+(r>0?360:-360):r)}else $p=e,qp=t;Yt.point(e,t),Wp(e,t)}function yv(){Yt.lineStart()}function xv(){Yp($p,qp),Yt.lineEnd(),J($o)>z&&(Me=-(Ne=180)),yr[0]=Me,yr[1]=Ne,Un=null}function xt(e,t){return(t-=e)<0?t+360:t}function vv(e,t){return e[0]-t[0]}function Bp(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Fc(e){var t,r,n,o,i,a,s;if(vt=Ne=-(Me=pt=1/0),Nr=[],St(e,gr),r=Nr.length){for(Nr.sort(vv),t=1,n=Nr[0],i=[n];t<r;++t)o=Nr[t],Bp(n,o[0])||Bp(n,o[1])?(xt(n[0],o[1])>xt(n[0],n[1])&&(n[1]=o[1]),xt(o[0],n[1])>xt(n[0],n[1])&&(n[0]=o[0])):i.push(n=o);for(a=-1/0,r=i.length-1,t=0,n=i[r];t<=r;n=o,++t)o=i[t],(s=xt(n[1],o[0]))>a&&(a=s,Me=o[0],Ne=n[1])}return Nr=yr=null,Me===1/0||pt===1/0?[[NaN,NaN],[NaN,NaN]]:[[Me,pt],[Ne,vt]]}var qo,Pa,Ma,Da,ka,Ra,Ca,Na,Vc,Uc,Hc,Jp,Zp,it,at,st,Lt={sphere:be,point:Gc,lineStart:Xp,lineEnd:Kp,polygonStart:function(){Lt.lineStart=Sv,Lt.lineEnd=Tv},polygonEnd:function(){Lt.lineStart=Xp,Lt.lineEnd=Kp}};function Gc(e,t){e*=q,t*=q;var r=G(t);Wo(r*G(e),r*H(e),H(t))}function Wo(e,t,r){++qo,Ma+=(e-Ma)/qo,Da+=(t-Da)/qo,ka+=(r-ka)/qo}function Xp(){Lt.point=bv}function bv(e,t){e*=q,t*=q;var r=G(t);it=r*G(e),at=r*H(e),st=H(t),Lt.point=wv,Wo(it,at,st)}function wv(e,t){e*=q,t*=q;var r=G(t),n=r*G(e),o=r*H(e),i=H(t),a=Ie(Ce((a=at*i-st*o)*a+(a=st*n-it*i)*a+(a=it*o-at*n)*a),it*n+at*o+st*i);Pa+=a,Ra+=a*(it+(it=n)),Ca+=a*(at+(at=o)),Na+=a*(st+(st=i)),Wo(it,at,st)}function Kp(){Lt.point=Gc}function Sv(){Lt.point=_v}function Tv(){Qp(Jp,Zp),Lt.point=Gc}function _v(e,t){Jp=e,Zp=t,e*=q,t*=q,Lt.point=Qp;var r=G(t);it=r*G(e),at=r*H(e),st=H(t),Wo(it,at,st)}function Qp(e,t){e*=q,t*=q;var r=G(t),n=r*G(e),o=r*H(e),i=H(t),a=at*i-st*o,s=st*n-it*i,c=it*o-at*n,l=_a(a,s,c),u=ze(l),f=l&&-u/l;Vc.add(f*a),Uc.add(f*s),Hc.add(f*c),Pa+=u,Ra+=u*(it+(it=n)),Ca+=u*(at+(at=o)),Na+=u*(st+(st=i)),Wo(it,at,st)}function Yo(e){qo=Pa=Ma=Da=ka=Ra=Ca=Na=0,Vc=new Pe,Uc=new Pe,Hc=new Pe,St(e,Lt);var t=+Vc,r=+Uc,n=+Hc,o=_a(t,r,n);return o<Ho&&(t=Ra,r=Ca,n=Na,Pa<z&&(t=Ma,r=Da,n=ka),o=_a(t,r,n),o<Ho)?[NaN,NaN]:[Ie(r,t)*he,ze(n/o)*he]}function Xo(e,t){function r(n,o){return n=e(n,o),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,o){return n=t.invert(n,o),n&&e.invert(n[0],n[1])}),r}function jc(e,t){return J(e)>K&&(e-=Math.round(e/Ge)*Ge),[e,t]}jc.invert=jc;function nm(e,t,r){return(e%=Ge)?t||r?Xo(tm(e),rm(t,r)):tm(e):t||r?rm(t,r):jc}function em(e){return function(t,r){return t+=e,J(t)>K&&(t-=Math.round(t/Ge)*Ge),[t,r]}}function tm(e){var t=em(e);return t.invert=em(-e),t}function rm(e,t){var r=G(e),n=H(e),o=G(t),i=H(t);function a(s,c){var l=G(c),u=G(s)*l,f=H(s)*l,p=H(c),m=p*r+u*n;return[Ie(f*o-m*i,u*r-p*n),ze(m*o+f*i)]}return a.invert=function(s,c){var l=G(c),u=G(s)*l,f=H(s)*l,p=H(c),m=p*o-f*i;return[Ie(f*o+p*i,u*r+m*n),ze(m*r-u*n)]},a}function im(e,t,r,n,o,i){if(r){var a=G(t),s=H(t),c=n*r;o==null?(o=t+n*Ge,i=t-c/2):(o=om(a,o),i=om(a,i),(n>0?o<i:o>i)&&(o+=n*Ge));for(var l,u=o;n>0?u>i:u<i;u-=c)l=un([a,-s*G(u),-s*H(u)]),e.point(l[0],l[1])}}function om(e,t){t=Tt(t),t[0]-=e,fn(t);var r=Lp(-t[1]);return((-t[2]<0?-r:r)+Ge-z)%Ge}function La(){var e=[],t;return{point:function(r,n,o){t.push([r,n,o])},lineStart:function(){e.push(t=[])},lineEnd:be,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Hn(e,t){return J(e[0]-t[0])<z&&J(e[1]-t[1])<z}function Oa(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Ia(e,t,r,n,o){var i=[],a=[],s,c;if(e.forEach(function(d){if(!((h=d.length-1)<=0)){var h,g=d[0],y=d[h],w;if(Hn(g,y)){if(!g[2]&&!y[2]){for(o.lineStart(),s=0;s<h;++s)o.point((g=d[s])[0],g[1]);o.lineEnd();return}y[0]+=2*z}i.push(w=new Oa(g,d,null,!0)),a.push(w.o=new Oa(g,null,w,!1)),i.push(w=new Oa(y,d,null,!1)),a.push(w.o=new Oa(y,null,w,!0))}}),!!i.length){for(a.sort(t),am(i),am(a),s=0,c=a.length;s<c;++s)a[s].e=r=!r;for(var l=i[0],u,f;;){for(var p=l,m=!0;p.v;)if((p=p.n)===l)return;u=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(s=0,c=u.length;s<c;++s)o.point((f=u[s])[0],f[1]);else n(p.x,p.n.x,1,o);p=p.n}else{if(m)for(u=p.p.z,s=u.length-1;s>=0;--s)o.point((f=u[s])[0],f[1]);else n(p.x,p.p.x,-1,o);p=p.p}p=p.o,u=p.z,m=!m}while(!p.v);o.lineEnd()}}}function am(e){if(t=e.length){for(var t,r=0,n=e[0],o;++r<t;)n.n=o=e[r],o.p=n,n=o;n.n=o=e[0],o.p=n}}function zc(e){return J(e[0])<=K?e[0]:ln(e[0])*((J(e[0])+K)%Ge-K)}function sm(e,t){var r=zc(t),n=t[1],o=H(n),i=[H(r),-G(r),0],a=0,s=0,c=new Pe;o===1?n=ot+z:o===-1&&(n=-ot-z);for(var l=0,u=e.length;l<u;++l)if(p=(f=e[l]).length)for(var f,p,m=f[p-1],d=zc(m),h=m[1]/2+Fn,g=H(h),y=G(h),w=0;w<p;++w,d=x,g=A,y=k,m=b){var b=f[w],x=zc(b),_=b[1]/2+Fn,A=H(_),k=G(_),P=x-d,N=P>=0?1:-1,M=N*P,D=M>K,O=g*A;if(c.add(Ie(O*N*H(M),y*k+O*G(M))),a+=D?P+N*Ge:P,D^d>=r^x>=r){var L=hr(Tt(m),Tt(b));fn(L);var v=hr(i,L);fn(v);var S=(D^P>=0?-1:1)*ze(v[2]);(n>S||n===S&&(L[0]||L[1]))&&(s+=D^P>=0?1:-1)}}return(a<-z||a<z&&c<-Ho)^s&1}function Fa(e,t,r,n){return function(o){var i=t(o),a=La(),s=t(a),c=!1,l,u,f,p={point:m,lineStart:h,lineEnd:g,polygonStart:function(){p.point=y,p.lineStart=w,p.lineEnd=b,u=[],l=[]},polygonEnd:function(){p.point=m,p.lineStart=h,p.lineEnd=g,u=In(u);var x=sm(l,n);u.length?(c||(o.polygonStart(),c=!0),Ia(u,Av,x,r,o)):x&&(c||(o.polygonStart(),c=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),c&&(o.polygonEnd(),c=!1),u=l=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(x,_){e(x,_)&&o.point(x,_)}function d(x,_){i.point(x,_)}function h(){p.point=d,i.lineStart()}function g(){p.point=m,i.lineEnd()}function y(x,_){f.push([x,_]),s.point(x,_)}function w(){s.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),_=a.result(),A,k=_.length,P,N,M;if(f.pop(),l.push(f),f=null,!!k){if(x&1){if(N=_[0],(P=N.length-1)>0){for(c||(o.polygonStart(),c=!0),o.lineStart(),A=0;A<P;++A)o.point((M=N[A])[0],M[1]);o.lineEnd()}return}k>1&&x&2&&_.push(_.pop().concat(_.shift())),u.push(_.filter(Ev))}}return p}}function Ev(e){return e.length>1}function Av(e,t){return((e=e.x)[0]<0?e[1]-ot-z:ot-e[1])-((t=t.x)[0]<0?t[1]-ot-z:ot-t[1])}var Bc=Fa(function(){return!0},Pv,Dv,[-K,-ot]);function Pv(e){var t=NaN,r=NaN,n=NaN,o;return{lineStart:function(){e.lineStart(),o=1},point:function(i,a){var s=i>0?K:-K,c=J(i-t);J(c-K)<z?(e.point(t,r=(r+a)/2>0?ot:-ot),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(i,r),o=0):n!==s&&c>=K&&(J(t-n)<z&&(t-=n*z),J(i-s)<z&&(i-=s*z),r=Mv(t,r,i,a),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(s,r),o=0),e.point(t=i,r=a),n=s},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-o}}}function Mv(e,t,r,n){var o,i,a=H(e-r);return J(a)>z?Vn((H(t)*(i=G(n))*H(r)-H(n)*(o=G(t))*H(e))/(o*i*a)):(t+n)/2}function Dv(e,t,r,n){var o;if(e==null)o=r*ot,n.point(-K,o),n.point(0,o),n.point(K,o),n.point(K,0),n.point(K,-o),n.point(0,-o),n.point(-K,-o),n.point(-K,0),n.point(-K,o);else if(J(e[0]-t[0])>z){var i=e[0]<t[0]?K:-K;o=r*i/2,n.point(-i,o),n.point(0,o),n.point(i,o)}else n.point(t[0],t[1])}function cm(e){var t=G(e),r=6*q,n=t>0,o=J(t)>z;function i(u,f,p,m){im(m,e,r,p,u,f)}function a(u,f){return G(u)*G(f)>t}function s(u){var f,p,m,d,h;return{lineStart:function(){d=m=!1,h=1},point:function(g,y){var w=[g,y],b,x=a(g,y),_=n?x?0:l(g,y):x?l(g+(g<0?K:-K),y):0;if(!f&&(d=m=x)&&u.lineStart(),x!==m&&(b=c(f,w),(!b||Hn(f,b)||Hn(w,b))&&(w[2]=1)),x!==m)h=0,x?(u.lineStart(),b=c(w,f),u.point(b[0],b[1])):(b=c(f,w),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(o&&f&&n^x){var A;!(_&p)&&(A=c(w,f,!0))&&(h=0,n?(u.lineStart(),u.point(A[0][0],A[0][1]),u.point(A[1][0],A[1][1]),u.lineEnd()):(u.point(A[1][0],A[1][1]),u.lineEnd(),u.lineStart(),u.point(A[0][0],A[0][1],3)))}x&&(!f||!Hn(f,w))&&u.point(w[0],w[1]),f=w,m=x,p=_},lineEnd:function(){m&&u.lineEnd(),f=null},clean:function(){return h|(d&&m)<<1}}}function c(u,f,p){var m=Tt(u),d=Tt(f),h=[1,0,0],g=hr(m,d),y=zo(g,g),w=g[0],b=y-w*w;if(!b)return!p&&u;var x=t*y/b,_=-t*w/b,A=hr(h,g),k=Bo(h,x),P=Bo(g,_);Aa(k,P);var N=A,M=zo(k,N),D=zo(N,N),O=M*M-D*(zo(k,k)-1);if(!(O<0)){var L=Ce(O),v=Bo(N,(-M-L)/D);if(Aa(v,k),v=un(v),!p)return v;var S=u[0],E=f[0],I=u[1],C=f[1],F;E<S&&(F=S,S=E,E=F);var U=E-S,j=J(U-K)<z,Y=j||U<z;if(!j&&C<I&&(F=I,I=C,C=F),Y?j?I+C>0^v[1]<(J(v[0]-S)<z?I:C):I<=v[1]&&v[1]<=C:U>K^(S<=v[0]&&v[0]<=E)){var ne=Bo(N,(-M+L)/D);return Aa(ne,k),[v,un(ne)]}}}function l(u,f){var p=n?e:K-e,m=0;return u<-p?m|=1:u>p&&(m|=2),f<-p?m|=4:f>p&&(m|=8),m}return Fa(a,s,i,n?[0,-e]:[-K,e-K])}function lm(e,t,r,n,o,i){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,p=c-a,m=l-s,d;if(d=r-a,!(!p&&d>0)){if(d/=p,p<0){if(d<u)return;d<f&&(f=d)}else if(p>0){if(d>f)return;d>u&&(u=d)}if(d=o-a,!(!p&&d<0)){if(d/=p,p<0){if(d>f)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<f&&(f=d)}if(d=n-s,!(!m&&d>0)){if(d/=m,m<0){if(d<u)return;d<f&&(f=d)}else if(m>0){if(d>f)return;d>u&&(u=d)}if(d=i-s,!(!m&&d<0)){if(d/=m,m<0){if(d>f)return;d>u&&(u=d)}else if(m>0){if(d<u)return;d<f&&(f=d)}return u>0&&(e[0]=a+u*p,e[1]=s+u*m),f<1&&(t[0]=a+f*p,t[1]=s+f*m),!0}}}}}var Ko=1e9,Va=-Ko;function $c(e,t,r,n){function o(l,u){return e<=l&&l<=r&&t<=u&&u<=n}function i(l,u,f,p){var m=0,d=0;if(l==null||(m=a(l,f))!==(d=a(u,f))||c(l,u)<0^f>0)do p.point(m===0||m===3?e:r,m>1?n:t);while((m=(m+f+4)%4)!==d);else p.point(u[0],u[1])}function a(l,u){return J(l[0]-e)<z?u>0?0:3:J(l[0]-r)<z?u>0?2:1:J(l[1]-t)<z?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),p=a(u,1);return f!==p?f-p:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=La(),p,m,d,h,g,y,w,b,x,_,A,k={point:P,lineStart:O,lineEnd:L,polygonStart:M,polygonEnd:D};function P(S,E){o(S,E)&&u.point(S,E)}function N(){for(var S=0,E=0,I=m.length;E<I;++E)for(var C=m[E],F=1,U=C.length,j=C[0],Y,ne,ie=j[0],de=j[1];F<U;++F)Y=ie,ne=de,j=C[F],ie=j[0],de=j[1],ne<=n?de>n&&(ie-Y)*(n-ne)>(de-ne)*(e-Y)&&++S:de<=n&&(ie-Y)*(n-ne)<(de-ne)*(e-Y)&&--S;return S}function M(){u=f,p=[],m=[],A=!0}function D(){var S=N(),E=A&&S,I=(p=In(p)).length;(E||I)&&(l.polygonStart(),E&&(l.lineStart(),i(null,null,1,l),l.lineEnd()),I&&Ia(p,s,S,i,l),l.polygonEnd()),u=l,p=m=d=null}function O(){k.point=v,m&&m.push(d=[]),_=!0,x=!1,w=b=NaN}function L(){p&&(v(h,g),y&&x&&f.rejoin(),p.push(f.result())),k.point=P,x&&u.lineEnd()}function v(S,E){var I=o(S,E);if(m&&d.push([S,E]),_)h=S,g=E,y=I,_=!1,I&&(u.lineStart(),u.point(S,E));else if(I&&x)u.point(S,E);else{var C=[w=Math.max(Va,Math.min(Ko,w)),b=Math.max(Va,Math.min(Ko,b))],F=[S=Math.max(Va,Math.min(Ko,S)),E=Math.max(Va,Math.min(Ko,E))];lm(C,F,e,t,r,n)?(x||(u.lineStart(),u.point(C[0],C[1])),u.point(F[0],F[1]),I||u.lineEnd(),A=!1):I&&(u.lineStart(),u.point(S,E),A=!1)}w=S,b=E,x=I}return k}}function um(e,t,r){var n=dr(e,t-z,r).concat(t);return function(o){return n.map(function(i){return[o,i]})}}function fm(e,t,r){var n=dr(e,t-z,r).concat(t);return function(o){return n.map(function(i){return[i,o]})}}function mn(){var e,t,r,n,o,i,a,s,c=10,l=c,u=90,f=360,p,m,d,h,g=2.5;function y(){return{type:"MultiLineString",coordinates:w()}}function w(){return dr(Go(n/u)*u,r,u).map(d).concat(dr(Go(s/f)*f,a,f).map(h)).concat(dr(Go(t/c)*c,e,c).filter(function(b){return J(b%u)>z}).map(p)).concat(dr(Go(i/l)*l,o,l).filter(function(b){return J(b%f)>z}).map(m))}return y.lines=function(){return w().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[d(n).concat(h(a).slice(1),d(r).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(n=+b[0][0],r=+b[1][0],s=+b[0][1],a=+b[1][1],n>r&&(b=n,n=r,r=b),s>a&&(b=s,s=a,a=b),y.precision(g)):[[n,s],[r,a]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],i=+b[0][1],o=+b[1][1],t>e&&(b=t,t=e,e=b),i>o&&(b=i,i=o,o=b),y.precision(g)):[[t,i],[e,o]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],y):[u,f]},y.stepMinor=function(b){return arguments.length?(c=+b[0],l=+b[1],y):[c,l]},y.precision=function(b){return arguments.length?(g=+b,p=um(i,o,90),m=fm(t,e,g),d=um(s,a,90),h=fm(n,r,g),y):g},y.extentMajor([[-180,-90+z],[180,90-z]]).extentMinor([[-180,-80-z],[180,80+z]])}function Ua(e,t){var r=e[0]*q,n=e[1]*q,o=t[0]*q,i=t[1]*q,a=G(n),s=H(n),c=G(i),l=H(i),u=a*G(r),f=a*H(r),p=c*G(o),m=c*H(o),d=2*ze(Ce(Rc(i-n)+a*c*Rc(o-r))),h=H(d),g=d?function(y){var w=H(y*=d)/h,b=H(d-y)/h,x=b*u+w*p,_=b*f+w*m,A=b*s+w*l;return[Ie(_,x)*he,Ie(A,Ce(x*x+_*_))*he]}:function(){return[r*he,n*he]};return g.distance=d,g}var Jo=e=>e;var qc=new Pe,Wc=new Pe,pm,mm,Yc,Xc,Lr={point:be,lineStart:be,lineEnd:be,polygonStart:function(){Lr.lineStart=kv,Lr.lineEnd=Cv},polygonEnd:function(){Lr.lineStart=Lr.lineEnd=Lr.point=be,qc.add(J(Wc)),Wc=new Pe},result:function(){var e=qc/2;return qc=new Pe,e}};function kv(){Lr.point=Rv}function Rv(e,t){Lr.point=dm,pm=Yc=e,mm=Xc=t}function dm(e,t){Wc.add(Xc*e-Yc*t),Yc=e,Xc=t}function Cv(){dm(pm,mm)}var Kc=Lr;var Gn=1/0,Ha=Gn,Zo=-Gn,Ga=Zo,Nv={point:Lv,lineStart:be,lineEnd:be,polygonStart:be,polygonEnd:be,result:function(){var e=[[Gn,Ha],[Zo,Ga]];return Zo=Ga=-(Ha=Gn=1/0),e}};function Lv(e,t){e<Gn&&(Gn=e),e>Zo&&(Zo=e),t<Ha&&(Ha=t),t>Ga&&(Ga=t)}var jn=Nv;var Jc=0,Zc=0,Qo=0,ja=0,za=0,zn=0,Qc=0,el=0,ei=0,ym,xm,Xt,Kt,Ot={point:dn,lineStart:hm,lineEnd:gm,polygonStart:function(){Ot.lineStart=Fv,Ot.lineEnd=Vv},polygonEnd:function(){Ot.point=dn,Ot.lineStart=hm,Ot.lineEnd=gm},result:function(){var e=ei?[Qc/ei,el/ei]:zn?[ja/zn,za/zn]:Qo?[Jc/Qo,Zc/Qo]:[NaN,NaN];return Jc=Zc=Qo=ja=za=zn=Qc=el=ei=0,e}};function dn(e,t){Jc+=e,Zc+=t,++Qo}function hm(){Ot.point=Ov}function Ov(e,t){Ot.point=Iv,dn(Xt=e,Kt=t)}function Iv(e,t){var r=e-Xt,n=t-Kt,o=Ce(r*r+n*n);ja+=o*(Xt+e)/2,za+=o*(Kt+t)/2,zn+=o,dn(Xt=e,Kt=t)}function gm(){Ot.point=dn}function Fv(){Ot.point=Uv}function Vv(){vm(ym,xm)}function Uv(e,t){Ot.point=vm,dn(ym=Xt=e,xm=Kt=t)}function vm(e,t){var r=e-Xt,n=t-Kt,o=Ce(r*r+n*n);ja+=o*(Xt+e)/2,za+=o*(Kt+t)/2,zn+=o,o=Kt*e-Xt*t,Qc+=o*(Xt+e),el+=o*(Kt+t),ei+=o*3,dn(Xt=e,Kt=t)}var tl=Ot;function Ba(e){this._context=e}Ba.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ge);break}}},result:be};var nl=new Pe,rl,bm,wm,ti,ri,$a={point:be,lineStart:function(){$a.point=Hv},lineEnd:function(){rl&&Sm(bm,wm),$a.point=be},polygonStart:function(){rl=!0},polygonEnd:function(){rl=null},result:function(){var e=+nl;return nl=new Pe,e}};function Hv(e,t){$a.point=Sm,bm=ti=e,wm=ri=t}function Sm(e,t){ti-=e,ri-=t,nl.add(Ce(ti*ti+ri*ri)),ti=e,ri=t}var ol=$a;var Tm,qa,_m,Em,Bn=class{constructor(t){this._append=t==null?Am:Gv(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==_m||this._append!==qa){let n=this._radius,o=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,_m=n,qa=this._append,Em=this._,this._=o}this._+=Em;break}}}result(){let t=this._;return this._="",t.length?t:null}};function Am(e){let t=1;this._+=e[0];for(let r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Gv(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Am;if(t!==Tm){let r=10**t;Tm=t,qa=function(o){let i=1;this._+=o[0];for(let a=o.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+o[i]}}return qa}function It(e,t){let r=3,n=4.5,o,i;function a(s){return s&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),St(s,o(i))),i.result()}return a.area=function(s){return St(s,o(Kc)),Kc.result()},a.measure=function(s){return St(s,o(ol)),ol.result()},a.bounds=function(s){return St(s,o(jn)),jn.result()},a.centroid=function(s){return St(s,o(tl)),tl.result()},a.projection=function(s){return arguments.length?(o=s==null?(e=null,Jo):(e=s).stream,a):e},a.context=function(s){return arguments.length?(i=s==null?(t=null,new Bn(r)):new Ba(t=s),typeof n!="function"&&i.pointRadius(n),a):t},a.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(i.pointRadius(+s),+s),a):n},a.digits=function(s){if(!arguments.length)return r;if(s==null)r=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);r=c}return t===null&&(i=new Bn(r)),a},a.projection(e).digits(r).context(t)}function ni(e){return function(t){var r=new il;for(var n in e)r[n]=e[n];return r.stream=t,r}}function il(){}il.prototype={constructor:il,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function al(e,t,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),St(r,e.stream(jn)),t(jn.result()),n!=null&&e.clipExtent(n),e}function sl(e,t,r){return al(e,function(n){var o=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(o/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+t[0][0]+(o-a*(n[1][0]+n[0][0]))/2,c=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([s,c])},r)}function Pm(e,t,r){return sl(e,[[0,0],t],r)}function Mm(e,t,r){return al(e,function(n){var o=+t,i=o/(n[1][0]-n[0][0]),a=(o-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];e.scale(150*i).translate([a,s])},r)}function Dm(e,t,r){return al(e,function(n){var o=+t,i=o/(n[1][1]-n[0][1]),a=-i*n[0][0],s=(o-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,s])},r)}var km=16,jv=G(30*q);function cl(e,t){return+t?Bv(e,t):zv(e)}function zv(e){return ni({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function Bv(e,t){function r(n,o,i,a,s,c,l,u,f,p,m,d,h,g){var y=l-n,w=u-o,b=y*y+w*w;if(b>4*t&&h--){var x=a+p,_=s+m,A=c+d,k=Ce(x*x+_*_+A*A),P=ze(A/=k),N=J(J(A)-1)<z||J(i-f)<z?(i+f)/2:Ie(_,x),M=e(N,P),D=M[0],O=M[1],L=D-n,v=O-o,S=w*L-y*v;(S*S/b>t||J((y*L+w*v)/b-.5)>.3||a*p+s*m+c*d<jv)&&(r(n,o,i,a,s,c,D,O,N,x/=k,_/=k,A,h,g),g.point(D,O),r(D,O,N,x,_,A,l,u,f,p,m,d,h,g))}}return function(n){var o,i,a,s,c,l,u,f,p,m,d,h,g={point:y,lineStart:w,lineEnd:x,polygonStart:function(){n.polygonStart(),g.lineStart=_},polygonEnd:function(){n.polygonEnd(),g.lineStart=w}};function y(P,N){P=e(P,N),n.point(P[0],P[1])}function w(){f=NaN,g.point=b,n.lineStart()}function b(P,N){var M=Tt([P,N]),D=e(P,N);r(f,p,u,m,d,h,f=D[0],p=D[1],u=P,m=M[0],d=M[1],h=M[2],km,n),n.point(f,p)}function x(){g.point=y,n.lineEnd()}function _(){w(),g.point=A,g.lineEnd=k}function A(P,N){b(o=P,N),i=f,a=p,s=m,c=d,l=h,g.point=b}function k(){r(f,p,u,m,d,h,i,a,o,s,c,l,km,n),g.lineEnd=x,x()}return g}}var $v=ni({point:function(e,t){this.stream.point(e*q,t*q)}});function qv(e){return ni({point:function(t,r){var n=e(t,r);return this.stream.point(n[0],n[1])}})}function Wv(e,t,r,n,o){function i(a,s){return a*=n,s*=o,[t+e*a,r-e*s]}return i.invert=function(a,s){return[(a-t)/e*n,(r-s)/e*o]},i}function Rm(e,t,r,n,o,i){if(!i)return Wv(e,t,r,n,o);var a=G(i),s=H(i),c=a*e,l=s*e,u=a/e,f=s/e,p=(s*r-a*t)/e,m=(s*t+a*r)/e;function d(h,g){return h*=n,g*=o,[c*h-l*g+t,r-l*h-c*g]}return d.invert=function(h,g){return[n*(u*h-f*g+p),o*(m-f*h-u*g)]},d}function Be(e){return Wa(function(){return e})()}function Wa(e){var t,r=150,n=480,o=250,i=0,a=0,s=0,c=0,l=0,u,f=0,p=1,m=1,d=null,h=Bc,g=null,y,w,b,x=Jo,_=.5,A,k,P,N,M;function D(S){return P(S[0]*q,S[1]*q)}function O(S){return S=P.invert(S[0],S[1]),S&&[S[0]*he,S[1]*he]}D.stream=function(S){return N&&M===S?N:N=$v(qv(u)(h(A(x(M=S)))))},D.preclip=function(S){return arguments.length?(h=S,d=void 0,v()):h},D.postclip=function(S){return arguments.length?(x=S,g=y=w=b=null,v()):x},D.clipAngle=function(S){return arguments.length?(h=+S?cm(d=S*q):(d=null,Bc),v()):d*he},D.clipExtent=function(S){return arguments.length?(x=S==null?(g=y=w=b=null,Jo):$c(g=+S[0][0],y=+S[0][1],w=+S[1][0],b=+S[1][1]),v()):g==null?null:[[g,y],[w,b]]},D.scale=function(S){return arguments.length?(r=+S,L()):r},D.translate=function(S){return arguments.length?(n=+S[0],o=+S[1],L()):[n,o]},D.center=function(S){return arguments.length?(i=S[0]%360*q,a=S[1]%360*q,L()):[i*he,a*he]},D.rotate=function(S){return arguments.length?(s=S[0]%360*q,c=S[1]%360*q,l=S.length>2?S[2]%360*q:0,L()):[s*he,c*he,l*he]},D.angle=function(S){return arguments.length?(f=S%360*q,L()):f*he},D.reflectX=function(S){return arguments.length?(p=S?-1:1,L()):p<0},D.reflectY=function(S){return arguments.length?(m=S?-1:1,L()):m<0},D.precision=function(S){return arguments.length?(A=cl(k,_=S*S),v()):Ce(_)},D.fitExtent=function(S,E){return sl(D,S,E)},D.fitSize=function(S,E){return Pm(D,S,E)},D.fitWidth=function(S,E){return Mm(D,S,E)},D.fitHeight=function(S,E){return Dm(D,S,E)};function L(){var S=Rm(r,0,0,p,m,f).apply(null,t(i,a)),E=Rm(r,n-S[0],o-S[1],p,m,f);return u=nm(s,c,l),k=Xo(t,E),P=Xo(u,k),A=cl(k,_),v()}function v(){return N=M=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&O,L()}}function Cm(e){var t=0,r=K/3,n=Wa(e),o=n(t,r);return o.parallels=function(i){return arguments.length?n(t=i[0]*q,r=i[1]*q):[t*he,r*he]},o}function $n(e){return function(t,r){var n=Ce(t*t+r*r),o=e(n),i=H(o),a=G(o);return[Ie(t*i,n*a),ze(n&&r*i/n)]}}function qn(e,t){return[e,t]}qn.invert=qn;function oi(){return Be(qn).scale(152.63)}function Nm(e,t){var r=G(e),n=e===t?H(e):(r-G(t))/(t-e),o=r/n+e;if(J(n)<z)return qn;function i(a,s){var c=o-s,l=n*a;return[c*H(l),o-c*G(l)]}return i.invert=function(a,s){var c=o-s,l=Ie(a,J(c))*ln(c);return c*n<0&&(l-=K*ln(a)*ln(c)),[l/n,o-ln(n)*Ce(a*a+c*c)]},i}function ii(){return Cm(Nm).scale(131.154).center([0,13.9389])}function ll(e,t){var r=G(t),n=G(e)*r;return[r*H(e)/n,H(t)/n]}ll.invert=$n(Vn);function ul(){return Be(ll).scale(144.049).clipAngle(60)}function fl(e,t){return[G(t)*H(e),H(t)]}fl.invert=$n(ze);function ai(){return Be(fl).scale(249.5).clipAngle(90+z)}function pl(e,t){var r=G(t),n=1+G(e)*r;return[r*H(e)/n,H(t)/n]}pl.invert=$n(function(e){return 2*Vn(e)});function si(){return Be(pl).scale(250).clipAngle(142)}var _t=Math.abs;var Ya=Math.atan2;var Ue=Math.cos;var Lm=Math.max,Om=Math.min;var we=Math.sin;var mt=1e-6;var ct=Math.PI,Or=ct/2,P3=ct/4;var ml=Fr(2),M3=Fr(ct),D3=ct*2,Wn=180/ct,Ir=ct/180;function Im(e){return e?e/Math.sin(e):1}function ci(e){return e>1?Or:e<-1?-Or:Math.asin(e)}function li(e){return e>1?0:e<-1?ct:Math.acos(e)}function Fr(e){return e>0?Math.sqrt(e):0}function dl(e,t){var r=Ue(t),n=Im(li(r*Ue(e/=2)));return[2*r*we(e)*n,we(t)*n]}dl.invert=function(e,t){if(!(e*e+4*t*t>ct*ct+mt)){var r=e,n=t,o=25;do{var i=we(r),a=we(r/2),s=Ue(r/2),c=we(n),l=Ue(n),u=we(2*n),f=c*c,p=l*l,m=a*a,d=1-p*s*s,h=d?li(l*s)*Fr(g=1/d):g=0,g,y=2*h*l*a-e,w=h*c-t,b=g*(p*m+h*l*s*f),x=g*(.5*i*u-h*2*c*a),_=g*.25*(u*a-h*c*p*i),A=g*(f*s+h*m*l),k=x*_-A*b;if(!k)break;var P=(w*x-y*A)/k,N=(y*_-w*b)/k;r-=P,n-=N}while((_t(P)>mt||_t(N)>mt)&&--o>0);return[r,n]}};function Yv(e,t){var r=e*we(t),n=30,o;do t-=o=(t+we(t)-r)/(1+Ue(t));while(_t(o)>mt&&--n>0);return t/2}function Xv(e,t,r){function n(o,i){return[e*o*Ue(i=Yv(r,i)),t*we(i)]}return n.invert=function(o,i){return i=ci(i/t),[o/(e*Ue(i)),ci((2*i+we(2*i))/r)]},n}var Fm=Xv(ml/Or,ml,ct);function ui(){return Be(Fm).scale(169.529)}var hl=1.0148,gl=.23185,yl=-.14499,xl=.02406,Kv=hl,Jv=5*gl,Zv=7*yl,Qv=9*xl,Xa=1.790857183;function vl(e,t){var r=t*t;return[e,t*(hl+r*r*(gl+r*(yl+xl*r)))]}vl.invert=function(e,t){t>Xa?t=Xa:t<-Xa&&(t=-Xa);var r=t,n;do{var o=r*r;r-=n=(r*(hl+o*o*(gl+o*(yl+xl*o)))-t)/(Kv+o*o*(Jv+o*(Zv+Qv*o)))}while(_t(n)>mt);return[e,r]};function fi(){return Be(vl).scale(139.319)}function Hm(e,t){var r=Vm(e[1],e[0]),n=Vm(t[1],t[0]),o=eb(r,n),i=Um(r)/Um(n);return pi([1,0,e[0][0],0,1,e[0][1]],pi([i,0,0,0,i,0],pi([Ue(o),we(o),0,-we(o),Ue(o),0],[1,0,-t[0][0],0,1,-t[0][1]])))}function Gm(e){var t=1/(e[0]*e[4]-e[1]*e[3]);return[t*e[4],-t*e[1],t*(e[1]*e[5]-e[2]*e[4]),-t*e[3],t*e[0],t*(e[2]*e[3]-e[0]*e[5])]}function pi(e,t){return[e[0]*t[0]+e[1]*t[3],e[0]*t[1]+e[1]*t[4],e[0]*t[2]+e[1]*t[5]+e[2],e[3]*t[0]+e[4]*t[3],e[3]*t[1]+e[4]*t[4],e[3]*t[2]+e[4]*t[5]+e[5]]}function Vm(e,t){return[e[0]-t[0],e[1]-t[1]]}function Um(e){return Fr(e[0]*e[0]+e[1]*e[1])}function eb(e,t){return Ya(e[0]*t[1]-e[1]*t[0],e[0]*t[0]+e[1]*t[1])}function jm(e,t){r(e,{transform:null});function r(c,l){if(c.edges=rb(c.face),l.face){var u=c.shared=tb(c.face,l.face),f=Hm(u.map(l.project),u.map(c.project));c.transform=l.transform?pi(l.transform,f):f;for(var p=l.edges,m=0,d=p.length;m<d;++m)Vr(u[0],p[m][1])&&Vr(u[1],p[m][0])&&(p[m]=c),Vr(u[0],p[m][0])&&Vr(u[1],p[m][1])&&(p[m]=c);for(p=c.edges,m=0,d=p.length;m<d;++m)Vr(u[0],p[m][0])&&Vr(u[1],p[m][1])&&(p[m]=l),Vr(u[0],p[m][1])&&Vr(u[1],p[m][0])&&(p[m]=l)}else c.transform=l.transform;return c.children&&c.children.forEach(function(h){r(h,c)}),c}function n(c,l){var u=t(c,l),f=u.project([c*Wn,l*Wn]),p;return(p=u.transform)?[p[0]*f[0]+p[1]*f[1]+p[2],-(p[3]*f[0]+p[4]*f[1]+p[5])]:(f[1]=-f[1],f)}Bm(e)&&(n.invert=function(c,l){var u=o(e,[c,-l]);return u&&(u[0]*=Ir,u[1]*=Ir,u)});function o(c,l){var u=c.project.invert,f=c.transform,p=l;if(f&&(f=Gm(f),p=[f[0]*p[0]+f[1]*p[1]+f[2],f[3]*p[0]+f[4]*p[1]+f[5]]),u&&c===i(m=u(p)))return m;for(var m,d=c.children,h=0,g=d&&d.length;h<g;++h)if(m=o(d[h],l))return m}function i(c){return t(c[0]*Ir,c[1]*Ir)}var a=Be(n),s=a.stream;return a.stream=function(c){var l=a.rotate(),u=s(c),f=(a.rotate([0,0]),s(c));return a.rotate(l),u.sphere=function(){f.polygonStart(),f.lineStart(),zm(f,e),f.lineEnd(),f.polygonEnd()},u},a.angle(-30)}function zm(e,t,r){var n,o=t.edges,i=o.length,a,s={type:"MultiPoint",coordinates:t.face},c=t.face.filter(function(h){return _t(h[1])!==90}),l=Fc({type:"MultiPoint",coordinates:c}),u=!1,f=-1,p=l[1][0]-l[0][0],m=p===180||p===360?[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]:Yo(s);if(r)for(;++f<i&&o[f]!==r;);++f;for(var d=0;d<i;++d)a=o[(d+f)%i],Array.isArray(a)?(u||(e.point((n=Ua(a[0],m)(mt))[0],n[1]),u=!0),e.point((n=Ua(a[1],m)(mt))[0],n[1])):(u=!1,a!==r&&zm(e,a,t))}function Vr(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}function tb(e,t){for(var r,n,o=e.length,i=null,a=0;a<o;++a){r=e[a];for(var s=t.length;--s>=0;)if(n=t[s],r[0]===n[0]&&r[1]===n[1]){if(i)return[i,r];i=r}}}function rb(e){for(var t=e.length,r=[],n=e[t-1],o=0;o<t;++o)r.push([n,n=e[o]]);return r}function Bm(e){return e.project.invert||e.children&&e.children.some(Bm)}var nb=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],bl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(e){return e.map(function(t){return nb[t]})});function mi(e){e=e||function(a){var s=a.length===6?Yo({type:"MultiPoint",coordinates:a}):a[0];return ul().scale(1).translate([0,0]).rotate([-s[0],-s[1]])};var t=bl.map(function(a){for(var s=a.map(Sl),c=s.length,l=s[c-1],u,f=[],p=0;p<c;++p)u=s[p],f.push($m([l[0]*.9486832980505138+u[0]*.31622776601683794,l[1]*.9486832980505138+u[1]*.31622776601683794,l[2]*.9486832980505138+u[2]*.31622776601683794]),$m([u[0]*.9486832980505138+l[0]*.31622776601683794,u[1]*.9486832980505138+l[1]*.31622776601683794,u[2]*.9486832980505138+l[2]*.31622776601683794])),l=u;return f}),r=[],n=[-1,0,0,1,0,1,4,5];t.forEach(function(a,s){for(var c=bl[s],l=c.length,u=r[s]=[],f=0;f<l;++f)t.push([c[f],a[(f*2+2)%(2*l)],a[(f*2+1)%(2*l)]]),n.push(s),u.push(ob(Sl(a[(f*2+2)%(2*l)]),Sl(a[(f*2+1)%(2*l)])))});var o=t.map(function(a){return{project:e(a),face:a}});n.forEach(function(a,s){var c=o[a];c&&(c.children||(c.children=[])).push(o[s])});function i(a,s){var c=Ue(s),l=[c*Ue(a),c*we(a),we(s)],u=a<-ct/2?s<0?6:4:a<0?s<0?2:0:a<ct/2?s<0?3:1:s<0?7:5,f=r[u];return o[wl(f[0],l)<0?8+3*u:wl(f[1],l)<0?8+3*u+1:wl(f[2],l)<0?8+3*u+2:u]}return jm(o[0],i).angle(-30).scale(110.625).center([0,45])}function wl(e,t){for(var r=0,n=e.length,o=0;r<n;++r)o+=e[r]*t[r];return o}function ob(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function $m(e){return[Ya(e[1],e[0])*Wn,ci(Lm(-1,Om(1,e[2])))*Wn]}function Sl(e){var t=e[0]*Ir,r=e[1]*Ir,n=Ue(r);return[n*Ue(t),n*we(t),we(r)]}function Tl(e,t){var r=dl(e,t);return[(r[0]+e/Or)/2,(r[1]+t)/2]}Tl.invert=function(e,t){var r=e,n=t,o=25;do{var i=Ue(n),a=we(n),s=we(2*n),c=a*a,l=i*i,u=we(r),f=Ue(r/2),p=we(r/2),m=p*p,d=1-l*f*f,h=d?li(i*f)*Fr(g=1/d):g=0,g,y=.5*(2*h*i*p+r/Or)-e,w=.5*(h*a+n)-t,b=.5*g*(l*m+h*i*f*c)+.5/Or,x=g*(u*s/4-h*a*p),_=.125*g*(s*p-h*a*l*u),A=.5*g*(c*f+h*m*i)+.5,k=x*_-A*b,P=(w*x-y*A)/k,N=(y*_-w*b)/k;r-=P,n-=N}while((_t(P)>mt||_t(N)>mt)&&--o>0);return[r,n]};function di(){return Be(Tl).scale(158.837)}function _l(e,t,r,n,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*r+(1+3*e+3*i-3*a)*n+a*o)/6}function xr(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],i=e[n+1],a=n>0?e[n-1]:2*o-i,s=n<t-1?e[n+2]:2*i-o;return _l((r-n/t)*t,a,o,i,s)}}function qm(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],i=e[n%t],a=e[(n+1)%t],s=e[(n+2)%t];return _l((r-n/t)*t,o,i,a,s)}}var Ka=e=>()=>e;function Wm(e,t){return function(r){return e+r*t}}function ib(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Yn(e,t){var r=t-e;return r?Wm(e,r>180||r<-180?r-360*Math.round(r/360):r):Ka(isNaN(e)?t:e)}function Ym(e){return(e=+e)==1?Te:function(t,r){return r-t?ib(t,r,e):Ka(isNaN(t)?r:t)}}function Te(e,t){var r=t-e;return r?Wm(e,r):Ka(isNaN(e)?t:e)}var Ur=function e(t){var r=Ym(t);function n(o,i){var a=r((o=Ze(o)).r,(i=Ze(i)).r),s=r(o.g,i.g),c=r(o.b,i.b),l=Te(o.opacity,i.opacity);return function(u){return o.r=a(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return n.gamma=e,n}(1);function Xm(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),i=new Array(r),a,s;for(a=0;a<r;++a)s=Ze(t[a]),n[a]=s.r||0,o[a]=s.g||0,i[a]=s.b||0;return n=e(n),o=e(o),i=e(i),s.opacity=1,function(c){return s.r=n(c),s.g=o(c),s.b=i(c),s+""}}}var El=Xm(xr),ab=Xm(qm);function Et(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Pl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Al=new RegExp(Pl.source,"g");function sb(e){return function(){return e}}function cb(e){return function(t){return e(t)+""}}function Ml(e,t){var r=Pl.lastIndex=Al.lastIndex=0,n,o,i,a=-1,s=[],c=[];for(e=e+"",t=t+"";(n=Pl.exec(e))&&(o=Al.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,c.push({i:a,x:Et(n,o)})),r=Al.lastIndex;return r<t.length&&(i=t.slice(r),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?cb(c[0].x):sb(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}var Km=180/Math.PI,Ja={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dl(e,t,r,n,o,i){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,c/=s),e*n<t*r&&(e=-e,t=-t,c=-c,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Km,skewX:Math.atan(c)*Km,scaleX:a,scaleY:s}}var Za;function Jm(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ja:Dl(t.a,t.b,t.c,t.d,t.e,t.f)}function Zm(e){return e==null?Ja:(Za||(Za=document.createElementNS("http://www.w3.org/2000/svg","g")),Za.setAttribute("transform",e),(e=Za.transform.baseVal.consolidate())?(e=e.matrix,Dl(e.a,e.b,e.c,e.d,e.e,e.f)):Ja)}function Qm(e,t,r,n){function o(l){return l.length?l.pop()+" ":""}function i(l,u,f,p,m,d){if(l!==f||u!==p){var h=m.push("translate(",null,t,null,r);d.push({i:h-4,x:Et(l,f)},{i:h-2,x:Et(u,p)})}else(f||p)&&m.push("translate("+f+t+p+r)}function a(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(o(f)+"rotate(",null,n)-2,x:Et(l,u)})):u&&f.push(o(f)+"rotate("+u+n)}function s(l,u,f,p){l!==u?p.push({i:f.push(o(f)+"skewX(",null,n)-2,x:Et(l,u)}):u&&f.push(o(f)+"skewX("+u+n)}function c(l,u,f,p,m,d){if(l!==f||u!==p){var h=m.push(o(m)+"scale(",null,",",null,")");d.push({i:h-4,x:Et(l,f)},{i:h-2,x:Et(u,p)})}else(f!==1||p!==1)&&m.push(o(m)+"scale("+f+","+p+")")}return function(l,u){var f=[],p=[];return l=e(l),u=e(u),i(l.translateX,l.translateY,u.translateX,u.translateY,f,p),a(l.rotate,u.rotate,f,p),s(l.skewX,u.skewX,f,p),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(m){for(var d=-1,h=p.length,g;++d<h;)f[(g=p[d]).i]=g.x(m);return f.join("")}}}var kl=Qm(Jm,"px, ","px)","deg)"),Rl=Qm(Zm,", ",")",")");var lb=1e-12;function ed(e){return((e=Math.exp(e))+1/e)/2}function ub(e){return((e=Math.exp(e))-1/e)/2}function fb(e){return((e=Math.exp(2*e))-1)/(e+1)}var Cl=function e(t,r,n){function o(i,a){var s=i[0],c=i[1],l=i[2],u=a[0],f=a[1],p=a[2],m=u-s,d=f-c,h=m*m+d*d,g,y;if(h<lb)y=Math.log(p/l)/t,g=function(k){return[s+k*m,c+k*d,l*Math.exp(t*k*y)]};else{var w=Math.sqrt(h),b=(p*p-l*l+n*h)/(2*l*r*w),x=(p*p-l*l-n*h)/(2*p*r*w),_=Math.log(Math.sqrt(b*b+1)-b),A=Math.log(Math.sqrt(x*x+1)-x);y=(A-_)/t,g=function(k){var P=k*y,N=ed(_),M=l/(r*w)*(N*fb(t*P+_)-ub(_));return[s+M*m,c+M*d,l*N/ed(t*P+_)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,c=s*s;return e(a,s,c)},o}(Math.SQRT2,2,4);function td(e){return function(t,r){var n=e((t=lr(t)).h,(r=lr(r)).h),o=Te(t.s,r.s),i=Te(t.l,r.l),a=Te(t.opacity,r.opacity);return function(s){return t.h=n(s),t.s=o(s),t.l=i(s),t.opacity=a(s),t+""}}}var hi=td(Yn),pb=td(Te);function Xn(e,t){var r=Te((e=Ct(e)).l,(t=Ct(t)).l),n=Te(e.a,t.a),o=Te(e.b,t.b),i=Te(e.opacity,t.opacity);return function(a){return e.l=r(a),e.a=n(a),e.b=o(a),e.opacity=i(a),e+""}}function rd(e){return function(t,r){var n=e((t=Do(t)).h,(r=Do(r)).h),o=Te(t.c,r.c),i=Te(t.l,r.l),a=Te(t.opacity,r.opacity);return function(s){return t.h=n(s),t.c=o(s),t.l=i(s),t.opacity=a(s),t+""}}}var gi=rd(Yn),mb=rd(Te);function nd(e){return function t(r){r=+r;function n(o,i){var a=e((o=fr(o)).h,(i=fr(i)).h),s=Te(o.s,i.s),c=Te(o.l,i.l),l=Te(o.opacity,i.opacity);return function(u){return o.h=a(u),o.s=s(u),o.l=c(Math.pow(u,r)),o.opacity=l(u),o+""}}return n.gamma=t,n}(1)}var db=nd(Yn),Nl=nd(Te);function Qa(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}var es=e=>El(e[e.length-1]);var od=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Qa),yi=es(od);var id=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Qa),xi=es(id);var vi=Nl(fr(300,.5,0),fr(-240,.5,1));var Kn=0,wi=0,bi=0,sd=1e3,ts,Si,rs=0,hn=0,ns=0,Ti=typeof performance=="object"&&performance.now?performance:Date,cd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ei(){return hn||(cd(hb),hn=Ti.now()+ns)}function hb(){hn=0}function _i(){this._call=this._time=this._next=null}_i.prototype=os.prototype={constructor:_i,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Ei():+r)+(t==null?0:+t),!this._next&&Si!==this&&(Si?Si._next=this:ts=this,Si=this),this._call=e,this._time=r,Ll()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ll())}};function os(e,t,r){var n=new _i;return n.restart(e,t,r),n}function ld(){Ei(),++Kn;for(var e=ts,t;e;)(t=hn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Kn}function ad(){hn=(rs=Ti.now())+ns,Kn=wi=0;try{ld()}finally{Kn=0,yb(),hn=0}}function gb(){var e=Ti.now(),t=e-rs;t>sd&&(ns-=t,rs=e)}function yb(){for(var e,t=ts,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:ts=r);Si=e,Ll(n)}function Ll(e){if(!Kn){wi&&(wi=clearTimeout(wi));var t=e-hn;t>24?(e<1/0&&(wi=setTimeout(ad,e-Ti.now()-ns)),bi&&(bi=clearInterval(bi))):(bi||(rs=Ti.now(),bi=setInterval(gb,sd)),Kn=1,cd(ad))}}function is(e,t,r){var n=new _i;return t=t==null?0:+t,n.restart(o=>{n.stop(),e(o+t)},t,r),n}var xb=nt("start","end","cancel","interrupt"),vb=[],pd=0,ud=1,ss=2,as=3,fd=4,cs=5,Ai=6;function Hr(e,t,r,n,o,i){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;bb(e,r,{name:t,index:n,group:o,on:xb,tween:vb,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:pd})}function Pi(e,t){var r=je(e,t);if(r.state>pd)throw new Error("too late; already scheduled");return r}function Xe(e,t){var r=je(e,t);if(r.state>as)throw new Error("too late; already running");return r}function je(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function bb(e,t,r){var n=e.__transition,o;n[t]=r,r.timer=os(i,0,r.time);function i(l){r.state=ud,r.timer.restart(a,r.delay,r.time),r.delay<=l&&a(l-r.delay)}function a(l){var u,f,p,m;if(r.state!==ud)return c();for(u in n)if(m=n[u],m.name===r.name){if(m.state===as)return is(a);m.state===fd?(m.state=Ai,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[u]):+u<t&&(m.state=Ai,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[u])}if(is(function(){r.state===as&&(r.state=fd,r.timer.restart(s,r.delay,r.time),s(l))}),r.state=ss,r.on.call("start",e,e.__data__,r.index,r.group),r.state===ss){for(r.state=as,o=new Array(p=r.tween.length),u=0,f=-1;u<p;++u)(m=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(o[++f]=m);o.length=f+1}}function s(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=cs,1),f=-1,p=o.length;++f<p;)o[f].call(e,u);r.state===cs&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Ai,r.timer.stop(),delete n[t];for(var l in n)return;delete e.__transition}}function gn(e,t){var r=e.__transition,n,o,i=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((n=r[a]).name!==t){i=!1;continue}o=n.state>ss&&n.state<cs,n.state=Ai,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]}i&&delete e.__transition}}function md(e){return this.each(function(){gn(this,e)})}function wb(e,t){var r,n;return function(){var o=Xe(this,e),i=o.tween;if(i!==r){n=r=i;for(var a=0,s=n.length;a<s;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}o.tween=n}}function Sb(e,t,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=Xe(this,e),a=i.tween;if(a!==n){o=(n=a).slice();for(var s={name:t,value:r},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}i.tween=o}}function dd(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=je(this.node(),r).tween,o=0,i=n.length,a;o<i;++o)if((a=n[o]).name===e)return a.value;return null}return this.each((t==null?wb:Sb)(r,e,t))}function Jn(e,t,r){var n=e._id;return e.each(function(){var o=Xe(this,n);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return je(o,n).value[t]}}function ls(e,t){var r;return(typeof t=="number"?Et:t instanceof Ae?Ur:(r=Ae(t))?(t=r,Ur):Ml)(e,t)}function Tb(e){return function(){this.removeAttribute(e)}}function _b(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Eb(e,t,r){var n,o=r+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===n?i:i=t(n=a,r)}}function Ab(e,t,r){var n,o=r+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===n?i:i=t(n=a,r)}}function Pb(e,t,r){var n,o,i;return function(){var a,s=r(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===n&&c===o?i:(o=c,i=t(n=a,s)))}}function Mb(e,t,r){var n,o,i;return function(){var a,s=r(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===n&&c===o?i:(o=c,i=t(n=a,s)))}}function hd(e,t){var r=pr(e),n=r==="transform"?Rl:ls;return this.attrTween(e,typeof t=="function"?(r.local?Mb:Pb)(r,n,Jn(this,"attr."+e,t)):t==null?(r.local?_b:Tb)(r):(r.local?Ab:Eb)(r,n,t))}function Db(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function kb(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Rb(e,t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&kb(e,i)),r}return o._value=t,o}function Cb(e,t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Db(e,i)),r}return o._value=t,o}function gd(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=pr(e);return this.tween(r,(n.local?Rb:Cb)(n,t))}function Nb(e,t){return function(){Pi(this,e).delay=+t.apply(this,arguments)}}function Lb(e,t){return t=+t,function(){Pi(this,e).delay=t}}function yd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nb:Lb)(t,e)):je(this.node(),t).delay}function Ob(e,t){return function(){Xe(this,e).duration=+t.apply(this,arguments)}}function Ib(e,t){return t=+t,function(){Xe(this,e).duration=t}}function xd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ob:Ib)(t,e)):je(this.node(),t).duration}function Fb(e,t){if(typeof t!="function")throw new Error;return function(){Xe(this,e).ease=t}}function vd(e){var t=this._id;return arguments.length?this.each(Fb(t,e)):je(this.node(),t).ease}function Vb(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Xe(this,e).ease=r}}function bd(e){if(typeof e!="function")throw new Error;return this.each(Vb(this._id,e))}function wd(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,s=n[o]=[],c,l=0;l<a;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&s.push(c);return new lt(n,this._parents,this._name,this._id)}function Sd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,o=r.length,i=Math.min(n,o),a=new Array(n),s=0;s<i;++s)for(var c=t[s],l=r[s],u=c.length,f=a[s]=new Array(u),p,m=0;m<u;++m)(p=c[m]||l[m])&&(f[m]=p);for(;s<n;++s)a[s]=t[s];return new lt(a,this._parents,this._name,this._id)}function Ub(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Hb(e,t,r){var n,o,i=Ub(t)?Pi:Xe;return function(){var a=i(this,e),s=a.on;s!==n&&(o=(n=s).copy()).on(t,r),a.on=o}}function Td(e,t){var r=this._id;return arguments.length<2?je(this.node(),r).on.on(e):this.each(Hb(r,e,t))}function Gb(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function _d(){return this.on("end.remove",Gb(this._id))}function Ed(e){var t=this._name,r=this._id;typeof e!="function"&&(e=sn(e));for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a)for(var s=n[a],c=s.length,l=i[a]=new Array(c),u,f,p=0;p<c;++p)(u=s[p])&&(f=e.call(u,u.__data__,p,s))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,Hr(l[p],t,r,p,l,je(u,r)));return new lt(i,this._parents,t,r)}function Ad(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Nt(e));for(var n=this._groups,o=n.length,i=[],a=[],s=0;s<o;++s)for(var c=n[s],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var p=e.call(u,u.__data__,f,c),m,d=je(u,r),h=0,g=p.length;h<g;++h)(m=p[h])&&Hr(m,t,r,h,p,d);i.push(p),a.push(u)}return new lt(i,a,t,r)}var jb=mr.prototype.constructor;function Pd(){return new jb(this._groups,this._parents)}function zb(e,t){var r,n,o;return function(){var i=Rr(this,e),a=(this.style.removeProperty(e),Rr(this,e));return i===a?null:i===r&&a===n?o:o=t(r=i,n=a)}}function Md(e){return function(){this.style.removeProperty(e)}}function Bb(e,t,r){var n,o=r+"",i;return function(){var a=Rr(this,e);return a===o?null:a===n?i:i=t(n=a,r)}}function $b(e,t,r){var n,o,i;return function(){var a=Rr(this,e),s=r(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Rr(this,e))),a===c?null:a===n&&c===o?i:(o=c,i=t(n=a,s))}}function qb(e,t){var r,n,o,i="style."+t,a="end."+i,s;return function(){var c=Xe(this,e),l=c.on,u=c.value[i]==null?s||(s=Md(t)):void 0;(l!==r||o!==u)&&(n=(r=l).copy()).on(a,o=u),c.on=n}}function Dd(e,t,r){var n=(e+="")=="transform"?kl:ls;return t==null?this.styleTween(e,zb(e,n)).on("end.style."+e,Md(e)):typeof t=="function"?this.styleTween(e,$b(e,n,Jn(this,"style."+e,t))).each(qb(this._id,e)):this.styleTween(e,Bb(e,n,t),r).on("end.style."+e,null)}function Wb(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Yb(e,t,r){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Wb(e,a,r)),n}return i._value=t,i}function kd(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Yb(e,t,r==null?"":r))}function Xb(e){return function(){this.textContent=e}}function Kb(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Rd(e){return this.tween("text",typeof e=="function"?Kb(Jn(this,"text",e)):Xb(e==null?"":e+""))}function Jb(e){return function(t){this.textContent=e.call(this,t)}}function Zb(e){var t,r;function n(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&Jb(o)),t}return n._value=e,n}function Cd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Zb(e))}function Nd(){for(var e=this._name,t=this._id,r=us(),n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=je(c,t);Hr(c,e,r,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new lt(n,this._parents,e,r)}function Ld(){var e,t,r=this,n=r._id,o=r.size();return new Promise(function(i,a){var s={value:a},c={value:function(){--o===0&&i()}};r.each(function(){var l=Xe(this,n),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&i()})}var Qb=0;function lt(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Od(e){return mr().transition(e)}function us(){return++Qb}var vr=mr.prototype;lt.prototype=Od.prototype={constructor:lt,select:Ed,selectAll:Ad,selectChild:vr.selectChild,selectChildren:vr.selectChildren,filter:wd,merge:Sd,selection:Pd,transition:Nd,call:vr.call,nodes:vr.nodes,node:vr.node,size:vr.size,empty:vr.empty,each:vr.each,on:Td,attr:hd,attrTween:gd,style:Dd,styleTween:kd,text:Rd,textTween:Cd,remove:_d,tween:dd,delay:yd,duration:xd,ease:vd,easeVarying:bd,end:Ld,[Symbol.iterator]:vr[Symbol.iterator]};function fs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var e2={time:null,delay:0,duration:250,ease:fs};function t2(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Id(e){var t,r;e instanceof lt?(t=e._id,e=e._name):(t=us(),(r=e2).time=Ei(),e=e==null?null:e+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],s=a.length,c,l=0;l<s;++l)(c=a[l])&&Hr(c,e,t,l,a,r||t2(c,t));return new lt(n,this._parents,e,t)}mr.prototype.interrupt=md;mr.prototype.transition=Id;var Mi=e=>()=>e;function Ol(e,{sourceEvent:t,target:r,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function Ft(e,t,r){this.k=e,this.x=t,this.y=r}Ft.prototype={constructor:Ft,scale:function(e){return e===1?this:new Ft(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ft(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Jt=new Ft(1,0,0);Il.prototype=Ft.prototype;function Il(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Jt;return e.__zoom}function ps(e){e.stopImmediatePropagation()}function Zn(e){e.preventDefault(),e.stopImmediatePropagation()}function r2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function n2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fd(){return this.__zoom||Jt}function o2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function i2(){return navigator.maxTouchPoints||"ontouchstart"in this}function a2(e,t,r){var n=e.invertX(t[0][0])-r[0][0],o=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],a=e.invertY(t[1][1])-r[1][1];return e.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Di(){var e=r2,t=n2,r=a2,n=o2,o=i2,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Cl,l=nt("start","zoom","end"),u,f,p,m=500,d=150,h=0,g=10;function y(v){v.property("__zoom",Fd).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",M).filter(o).on("touchstart.zoom",D).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(v,S,E,I){var C=v.selection?v.selection():v;C.property("__zoom",Fd),v!==C?_(v,S,E,I):C.interrupt().each(function(){A(this,arguments).event(I).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},y.scaleBy=function(v,S,E,I){y.scaleTo(v,function(){var C=this.__zoom.k,F=typeof S=="function"?S.apply(this,arguments):S;return C*F},E,I)},y.scaleTo=function(v,S,E,I){y.transform(v,function(){var C=t.apply(this,arguments),F=this.__zoom,U=E==null?x(C):typeof E=="function"?E.apply(this,arguments):E,j=F.invert(U),Y=typeof S=="function"?S.apply(this,arguments):S;return r(b(w(F,Y),U,j),C,a)},E,I)},y.translateBy=function(v,S,E,I){y.transform(v,function(){return r(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),a)},null,I)},y.translateTo=function(v,S,E,I,C){y.transform(v,function(){var F=t.apply(this,arguments),U=this.__zoom,j=I==null?x(F):typeof I=="function"?I.apply(this,arguments):I;return r(Jt.translate(j[0],j[1]).scale(U.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof E=="function"?-E.apply(this,arguments):-E),F,a)},I,C)};function w(v,S){return S=Math.max(i[0],Math.min(i[1],S)),S===v.k?v:new Ft(S,v.x,v.y)}function b(v,S,E){var I=S[0]-E[0]*v.k,C=S[1]-E[1]*v.k;return I===v.x&&C===v.y?v:new Ft(v.k,I,C)}function x(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function _(v,S,E,I){v.on("start.zoom",function(){A(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(I).end()}).tween("zoom",function(){var C=this,F=arguments,U=A(C,F).event(I),j=t.apply(C,F),Y=E==null?x(j):typeof E=="function"?E.apply(C,F):E,ne=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),ie=C.__zoom,de=typeof S=="function"?S.apply(C,F):S,ue=c(ie.invert(Y).concat(ne/ie.k),de.invert(Y).concat(ne/de.k));return function(xe){if(xe===1)xe=de;else{var me=ue(xe),Oe=ne/me[2];xe=new Ft(Oe,Y[0]-me[0]*Oe,Y[1]-me[1]*Oe)}U.zoom(null,xe)}})}function A(v,S,E){return!E&&v.__zooming||new k(v,S)}function k(v,S){this.that=v,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,S),this.taps=0}k.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,S){return this.mouse&&v!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var S=V(this.that).datum();l.call(v,this.that,new Ol(v,{sourceEvent:this.sourceEvent,target:y,type:v,transform:this.that.__zoom,dispatch:l}),S)}};function P(v,...S){if(!e.apply(this,arguments))return;var E=A(this,S).event(v),I=this.__zoom,C=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,n.apply(this,arguments)))),F=He(v);if(E.wheel)(E.mouse[0][0]!==F[0]||E.mouse[0][1]!==F[1])&&(E.mouse[1]=I.invert(E.mouse[0]=F)),clearTimeout(E.wheel);else{if(I.k===C)return;E.mouse=[F,I.invert(F)],gn(this),E.start()}Zn(v),E.wheel=setTimeout(U,d),E.zoom("mouse",r(b(w(I,C),E.mouse[0],E.mouse[1]),E.extent,a));function U(){E.wheel=null,E.end()}}function N(v,...S){if(p||!e.apply(this,arguments))return;var E=v.currentTarget,I=A(this,S,!0).event(v),C=V(v.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",ne,!0),F=He(v,E),U=v.clientX,j=v.clientY;Oo(v.view),ps(v),I.mouse=[F,this.__zoom.invert(F)],gn(this),I.start();function Y(ie){if(Zn(ie),!I.moved){var de=ie.clientX-U,ue=ie.clientY-j;I.moved=de*de+ue*ue>h}I.event(ie).zoom("mouse",r(b(I.that.__zoom,I.mouse[0]=He(ie,E),I.mouse[1]),I.extent,a))}function ne(ie){C.on("mousemove.zoom mouseup.zoom",null),Io(ie.view,I.moved),Zn(ie),I.event(ie).end()}}function M(v,...S){if(e.apply(this,arguments)){var E=this.__zoom,I=He(v.changedTouches?v.changedTouches[0]:v,this),C=E.invert(I),F=E.k*(v.shiftKey?.5:2),U=r(b(w(E,F),I,C),t.apply(this,S),a);Zn(v),s>0?V(this).transition().duration(s).call(_,U,I,v):V(this).call(y.transform,U,I,v)}}function D(v,...S){if(e.apply(this,arguments)){var E=v.touches,I=E.length,C=A(this,S,v.changedTouches.length===I).event(v),F,U,j,Y;for(ps(v),U=0;U<I;++U)j=E[U],Y=He(j,this),Y=[Y,this.__zoom.invert(Y),j.identifier],C.touch0?!C.touch1&&C.touch0[2]!==Y[2]&&(C.touch1=Y,C.taps=0):(C.touch0=Y,F=!0,C.taps=1+!!u);u&&(u=clearTimeout(u)),F&&(C.taps<2&&(f=Y[0],u=setTimeout(function(){u=null},m)),gn(this),C.start())}}function O(v,...S){if(this.__zooming){var E=A(this,S).event(v),I=v.changedTouches,C=I.length,F,U,j,Y;for(Zn(v),F=0;F<C;++F)U=I[F],j=He(U,this),E.touch0&&E.touch0[2]===U.identifier?E.touch0[0]=j:E.touch1&&E.touch1[2]===U.identifier&&(E.touch1[0]=j);if(U=E.that.__zoom,E.touch1){var ne=E.touch0[0],ie=E.touch0[1],de=E.touch1[0],ue=E.touch1[1],xe=(xe=de[0]-ne[0])*xe+(xe=de[1]-ne[1])*xe,me=(me=ue[0]-ie[0])*me+(me=ue[1]-ie[1])*me;U=w(U,Math.sqrt(xe/me)),j=[(ne[0]+de[0])/2,(ne[1]+de[1])/2],Y=[(ie[0]+ue[0])/2,(ie[1]+ue[1])/2]}else if(E.touch0)j=E.touch0[0],Y=E.touch0[1];else return;E.zoom("touch",r(b(U,j,Y),E.extent,a))}}function L(v,...S){if(this.__zooming){var E=A(this,S).event(v),I=v.changedTouches,C=I.length,F,U;for(ps(v),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),F=0;F<C;++F)U=I[F],E.touch0&&E.touch0[2]===U.identifier?delete E.touch0:E.touch1&&E.touch1[2]===U.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(U=He(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<g)){var j=V(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return y.wheelDelta=function(v){return arguments.length?(n=typeof v=="function"?v:Mi(+v),y):n},y.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Mi(!!v),y):e},y.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:Mi(!!v),y):o},y.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Mi([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),y):t},y.scaleExtent=function(v){return arguments.length?(i[0]=+v[0],i[1]=+v[1],y):[i[0],i[1]]},y.translateExtent=function(v){return arguments.length?(a[0][0]=+v[0][0],a[1][0]=+v[1][0],a[0][1]=+v[0][1],a[1][1]=+v[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(v){return arguments.length?(r=v,y):r},y.duration=function(v){return arguments.length?(s=+v,y):s},y.interpolate=function(v){return arguments.length?(c=v,y):c},y.on=function(){var v=l.on.apply(l,arguments);return v===l?y:v},y.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,y):Math.sqrt(h)},y.tapDistance=function(v){return arguments.length?(g=+v,y):g},y}function Fl(e){return e!==null&&e.getAttribute("aria-disabled")!=="true"}function ki(e){for(let t=e;t!==null;t=t.parentElement)if(t.hasAttribute("inert"))return!0;return!1}function ms(e){return function(...t){return e(this,...t)}}function Vt(e){return function(...t){return e(V(this),...t)}}function Qe(e){return function(...t){if(Fl(this))return e.apply(this,t)}}function Vd(e){var r;return((r=e.getAttribute("aria-controls"))!=null?r:"").split(/\s+/).filter(n=>n!=="").map(n=>"#"+n).sort().join(",")}function ds(e){e.stopPropagation(),e.preventDefault()}var Zt=Math.PI,br=2*Zt,Qt=360/br,De=br/360,s2=1,Vl=1e3*s2,Ri=60*Vl,wr=60*Ri,Ud=24*wr,Hd=7e37;function $e(e,t){let r=e-t*Math.floor(e/t);return r===t?0:r}function Ci(e){let r=Math.abs(e);return r<4503599627370496&&(r+=4503599627370496,r-=4503599627370496),Math.sign(e)*r}function Gd(e,t){return Ci(e/t)*t}function pe(e,t,r){return Math.max(t,Math.min(e,r))}function Ke(e,t,r,n,o){return(e-t)/(r-t)*(o-n)+n}function Ut(e){let[t,r]=e;return Math.sqrt(t*t+r*r)}function Ni(e,t){return Ut([t[0]-e[0],t[1]-e[1]])}function jd(e){return(Math.atan2(e[0],e[1])*Qt+360)%360}function zd(e,t,r,n,o){let a=r<0?1e-7:-1e-7,s=e(t+1e-7,r),c=e(t,r+a),u=1e-7*Math.cos(r*De);return[(s[0]-n)/u,(s[1]-o)/u,(c[0]-n)/a,(c[1]-o)/a]}function Gr(e,t){return[e[0]*t,e[1]*t]}var hs=Nt("a[href], button, [tabindex]");function Ul(e){for(let t=e;t!==null;t=t.parentElement)if(t.hidden||t.hasAttribute("inert")||t.classList.contains("cloaked"))return!1;return!0}function Qn(e){return e.find(Ul)}function Ht(e,t,r){let n=e.length;t=$e(t,n);for(let o=$e(t+r,n);o!==t;o=$e(o+r,n)){let i=e[o];if(Ul(i))return i}}function Hl(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Ul(r))return r}}var Wd="inert"in HTMLElement.prototype,c2=Nt("[data-inert-tabindex]");function Bd(e){e.each(function(){this.hasAttribute("data-inert-tabindex")||(this.setAttribute("data-inert-tabindex",this.hasAttribute("tabindex")?this.getAttribute("tabindex"):""),this.removeAttribute("tabindex"),this.tabIndex>=0&&(this.tabIndex=-1,this.focus=()=>{}))})}function $d(e){e.each(function(){var t;if(!ki(this)&&this.hasAttribute("data-inert-tabindex")){let r=(t=this.getAttribute("data-inert-tabindex"))!=null?t:"";this.removeAttribute("data-inert-tabindex"),r===""?this.removeAttribute("tabindex"):this.tabIndex=r,delete this.focus}})}function l2(e){return Wd||!ki(e)?"tabindex":"data-inert-tabindex"}function yn(e,t){e.each(function(){let r=t.apply(this,arguments);this.setAttribute(l2(this),r)})}function qd(e){e.attr("aria-hidden",!0).call(Bd).selectAll(hs).call(Bd)}function u2(e){e.attr("aria-hidden",null).call($d).selectAll(c2).call($d)}(function(){if(Wd)return;let t=new MutationObserver(n=>{let o=n.map(i=>i.target);$(o.filter(i=>i.hasAttribute("inert"))).call(qd),$(o.filter(i=>!i.hasAttribute("inert"))).call(u2)}),r=V(":root");t.observe(r.node(),{attributes:!0,attributeFilter:["inert"],subtree:!0}),r.selectAll("[inert]").call(qd)})();var Yd,gs=(Yd=navigator.userAgent)!=null?Yd:"",f2=new URLSearchParams(window.location.search);function Xd(){return+window.location.port==8081}function eo(){return window.self!==window.top}function ys(e){return f2.has(e)}function er(){var r;let e=(r=document.referrer.split("/")[2])!=null?r:"",t=/dailymail/i.test(e);return ys("kiosk")&&!t}function to(){return eo()&&!er()&&!Sr()}function Kd(){return ys("debug")}function Jd(){return ys("float")}function Sr(){return ys("bridge")}function Zd(){var e,t;return(t=(e=window.location.hostname.match(/(.*)\.nullschool\.net$/))==null?void 0:e[1])!=null?t:"unknown"}function Qd(){var e,t;return(t=(e=document.querySelector("html"))==null?void 0:e.dataset.version)!=null?t:"unknown"}function eh(){return/firefox/i.test(gs)}function th(){return/ipad|iphone|ipod/i.test(gs)||/macintosh/i.test(gs)&&navigator.maxTouchPoints>2}function rh(){return/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(gs)}function nh(){return window.matchMedia("(hover: hover)").matches}function xs(){if(Sr())return!1;let e=document.querySelector("[data-name=earth]");return e instanceof HTMLElement&&e.style.display==="none"}function vs(e){return e!==void 0}function jr(e){return e!=null}function tr(e){return typeof e=="boolean"}function zr(e){return typeof e=="number"}function Gl(e){return e===void 0||typeof e=="number"}function At(e){return typeof e=="string"}function bs(e){return e===void 0||typeof e=="string"}function p2(e){return typeof e=="function"}function ws(e){if(e==null)return!0;switch(typeof e){case"boolean":case"number":case"bigint":case"string":case"symbol":return!0}return!1}function bt(e){return typeof e=="object"&&e!==null||p2(e)}function oh(e){return e===!0?!0:e===!1?!1:void 0}function Tr(e){return typeof e=="number"?e:void 0}function Ss(e){return typeof e=="string"?e:void 0}function ih(e){if(e===!0)return!0;if(e===!1)return!1;if(typeof e=="string")switch(e.trim()){case"true":return!0;case"false":return!1}}function xn(e,t){return e===e?e:t}function Z(e,t=NaN){return xn(typeof e=="number"?e:typeof e=="string"&&e.trim()!==""?Number(e):NaN,t)}function Li(e,t=NaN){return typeof e=="string"&&e.indexOf("/")>=1&&(e=e.split("/")),Array.isArray(e)&&e.length===2?xn(Z(e[0])/Z(e[1]),t):Z(e,t)}var jl={};function m2(e){let[t=NaN,r=NaN]=(e!=null?e:"").split(",").map(n=>Z(n));return t===t&&r===r?[t,r]:void 0}function d2(e){let[t,r=null]=(e!=null?e:"").split("|");return{country:t.length===2&&t===t.toUpperCase()?t:void 0,coords:m2(r)}}function ah(){var t;let e=Date.now();return(t=jl.promise)!=null?t:jl.promise=fetch("./init.json",{cache:"no-store"}).then(r=>{var i,a;let n=Date.now(),o=new Date((i=r.headers.get("date"))!=null?i:NaN).getTime();return{timing:{t0:e,t1:o,t2:o,t3:n},...d2(r.headers.get("x-geo")),xrw:(a=r.headers.get("x-xrw"))!=null?a:void 0}})}var h2=function(){let e="F5v6#VQR5%";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}(),g2={length:0,getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{},key:()=>null};function y2(e){return{get(t){return e.getItem(t)},put(t,r){try{r===null?e.removeItem(t):e.setItem(t,r)}catch{}}}}var Br=y2(h2?localStorage:g2);var x2=0;function T(e,...t){let r=e[0];for(let n=0;n<t.length;n++)r+=t[n]+e[n+1];return r.replace(/(\S+)/g,(n,o)=>`${o}.$${x2++}`)}function ge(...e){return Object.assign(Object.create(null),...e)}function sh(e,t,r){let n={};for(let[o,i]of Object.entries(e)){let a=o.substring(0,t),s=typeof i=="string"?i.substring(0,r):i;if(a in n)throw new Error(`key collision: ${a}`);n[a]=s}return n}function vn(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),o=0;o<r;o++)n[o]=arguments[o+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=n,e.apply(this,i)}}var ch=vn(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)});function et(e,t,r){var n,o,i=function(s,c){n=null,c&&(o=e.apply(s,c))},a=vn(function(s){if(n&&clearTimeout(n),r){var c=!n;n=setTimeout(i,t),c&&(o=e.apply(this,s))}else n=ch(i,t,this,s);return o});return a.cancel=function(){clearTimeout(n),n=null},a}function bn(e){var t=typeof e;return t==="function"||t==="object"&&!!e}var lh="1.11.0",zl=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},uh=Array.prototype,Ts=Object.prototype,Bl=typeof Symbol<"u"?Symbol.prototype:null,nN=uh.push,Oi=uh.slice,wn=Ts.toString,$l=Ts.hasOwnProperty,ql=typeof ArrayBuffer<"u",fh=Array.isArray,Wl=Object.keys;var Yl=ql&&ArrayBuffer.isView,ph=isNaN;var _s=!{toString:null}.propertyIsEnumerable("toString"),Xl=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],mh=Math.pow(2,53)-1;function dt(e,t){return e!=null&&$l.call(e,t)}function Gt(e){return function(t){return wn.call(t)==="[object "+e+"]"}}var dh=Gt("Function"),v2=zl.document&&zl.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof v2!="function"&&(dh=function(e){return typeof e=="function"||!1});var _r=dh;function b2(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(o){return t[o]},push:function(o){return t[o]=!0,e.push(o)}}}function Ii(e,t){t=b2(t);var r=Xl.length,n=e.constructor,o=_r(n)&&n.prototype||Ts,i="constructor";for(dt(e,i)&&!t.contains(i)&&t.push(i);r--;)i=Xl[r],i in e&&e[i]!==o[i]&&!t.contains(i)&&t.push(i)}function Je(e){if(!bn(e))return[];if(Wl)return Wl(e);var t=[];for(var r in e)dt(e,r)&&t.push(r);return _s&&Ii(e,t),t}function Kl(e){var t=function(i){return e[i]},r="(?:"+Je(e).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return function(i){return i=i==null?"":""+i,n.test(i)?i.replace(o,t):i}}var hh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var Jl=Kl(hh);function qe(e){if(e instanceof qe)return e;if(!(this instanceof qe))return new qe(e);this._wrapped=e}qe.VERSION=lh;qe.prototype.value=function(){return this._wrapped};qe.prototype.valueOf=qe.prototype.toJSON=qe.prototype.value;qe.prototype.toString=function(){return String(this._wrapped)};function Zl(e){return e}var Sn=fh||Gt("Array");function Ql(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var o=1;o<n;o++)for(var i=arguments[o],a=e(i),s=a.length,c=0;c<s;c++){var l=a[c];(!t||r[l]===void 0)&&(r[l]=i[l])}return r}}var gh=Ql(Je);function eu(e,t){var r=Je(t),n=r.length;if(e==null)return!n;for(var o=Object(e),i=0;i<n;i++){var a=r[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function tu(e){return e=gh({},e),function(t){return eu(t,e)}}function Tn(e){return function(t){return t==null?void 0:t[e]}}function ru(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}function Es(e){return Sn(e)?function(t){return ru(t,e)}:Tn(e)}function _n(e,t,r){if(t===void 0)return e;switch(r==null?3:r){case 1:return function(n){return e.call(t,n)};case 3:return function(n,o,i){return e.call(t,n,o,i)};case 4:return function(n,o,i,a){return e.call(t,n,o,i,a)}}return function(){return e.apply(t,arguments)}}function Fi(e,t,r){return e==null?Zl:_r(e)?_n(e,t,r):bn(e)&&!Sn(e)?tu(e):Es(e)}function As(e,t){return Fi(e,t,1/0)}qe.iteratee=As;function rr(e,t,r){return qe.iteratee!==As?qe.iteratee(e,t):Fi(e,t,r)}function Vi(e){return function(t){var r=e(t);return typeof r=="number"&&r>=0&&r<=mh}}var Pt=Tn("length");var En=Vi(Pt);function nu(e,t,r){t=_n(t,r);var n,o;if(En(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var i=Je(e);for(n=0,o=i.length;n<o;n++)t(e[i[n]],i[n],e)}return e}function ou(e,t){return function(r,n,o){var i=t?[[],[]]:{};return n=rr(n,o),nu(r,function(a,s){var c=n(a,s,r);e(i,a,c)}),i}}var iu=ou(function(e,t,r){dt(e,r)?e[r].push(t):e[r]=[t]});function au(e){for(var t=Je(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=e[t[o]];return n}function An(e,t,r,n){r=rr(r,n,1);for(var o=r(t),i=0,a=Pt(e);i<a;){var s=Math.floor((i+a)/2);r(e[s])<o?i=s+1:a=s}return i}function su(e){return function(t,r,n){r=rr(r,n);for(var o=Pt(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(r(t[i],i,t))return i;return-1}}var yh=su(1);var xh=Gt("Number");function cu(e){return xh(e)&&ph(e)}function lu(e,t,r){return function(n,o,i){var a=0,s=Pt(n);if(typeof i=="number")e>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(r&&i&&s)return i=r(n,o),n[i]===o?i:-1;if(o!==o)return i=t(Oi.call(n,a,s),cu),i>=0?i+a:-1;for(i=e>0?a:s-1;i>=0&&i<s;i+=e)if(n[i]===o)return i;return-1}}var vh=lu(1,yh,An);function Ps(e,t,r,n){return En(e)||(e=au(e)),(typeof r!="number"||n)&&(r=0),vh(e,t,r)>=0}function Ms(e){for(var t=[],r=arguments.length,n=0,o=Pt(e);n<o;n++){var i=e[n];if(!Ps(t,i)){var a;for(a=1;a<r&&Ps(arguments[a],i);a++);a===r&&t.push(i)}}return t}var Ui=Tn("byteLength");var bh=Gt("DataView");function uu(e){return function(){return e}}var wh=Vi(Ui);var w2=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function S2(e){return Yl?Yl(e)&&!bh(e):wh(e)&&w2.test(wn.call(e))}var Sh=ql?S2:uu(!1);function fu(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;return o!=="function"&&o!=="object"&&typeof t!="object"?!1:pu(e,t,r,n)}function pu(e,t,r,n){e instanceof qe&&(e=e._wrapped),t instanceof qe&&(t=t._wrapped);var o=wn.call(e);if(o!==wn.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Bl.valueOf.call(e)===Bl.valueOf.call(t);case"[object ArrayBuffer]":return pu(new DataView(e),new DataView(t),r,n);case"[object DataView]":var i=Ui(e);if(i!==Ui(t))return!1;for(;i--;)if(e.getUint8(i)!==t.getUint8(i))return!1;return!0}if(Sh(e))return pu(new DataView(e.buffer),new DataView(t.buffer),r,n);var a=o==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var s=e.constructor,c=t.constructor;if(s!==c&&!(_r(s)&&s instanceof s&&_r(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var l=r.length;l--;)if(r[l]===e)return n[l]===t;if(r.push(e),n.push(t),a){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!fu(e[l],t[l],r,n))return!1}else{var u=Je(e),f;if(l=u.length,Je(t).length!==l)return!1;for(;l--;)if(f=u[l],!(dt(t,f)&&fu(e[f],t[f],r,n)))return!1}return r.pop(),n.pop(),!0}function $r(e,t){return fu(e,t)}function mu(e,t,r){return Oi.call(e,t==null||r?1:t)}function Hi(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[e.length-1]:mu(e,Math.max(0,e.length-t))}function Ds(e,t,r){t=rr(t,r);for(var n=Je(e),o=n.length,i={},a=0;a<o;a++){var s=n[a];i[s]=t(e[s],s,e)}return i}function ks(e,t){var r=function(n){var o=r.cache,i=""+(t?t.apply(this,arguments):n);return dt(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return r.cache={},r}function du(e){if(!bn(e))return[];var t=[];for(var r in e)t.push(r);return _s&&Ii(e,t),t}function hu(e,t,r){return t in r}var gu=Gt("Arguments");(function(){gu(arguments)||(gu=function(e){return dt(e,"callee")})})();var Th=gu;function Rs(e,t,r,n){if(n=n||[],!t&&t!==0)t=1/0;else if(t<=0)return n.concat(e);for(var o=n.length,i=0,a=Pt(e);i<a;i++){var s=e[i];if(En(s)&&(Sn(s)||Th(s)))if(t>1)Rs(s,t-1,r,n),o=n.length;else for(var c=0,l=s.length;c<l;)n[o++]=s[c++];else r||(n[o++]=s)}return n}var Cs=vn(function(e,t){var r={},n=t[0];if(e==null)return r;_r(n)?(t.length>1&&(n=_n(n,t[1])),t=du(e)):(n=hu,t=Rs(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],s=e[a];n(s,a,e)&&(r[a]=s)}return r});function Ns(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var yu=Date.now||function(){return new Date().getTime()};function Gi(e,t,r){var n,o,i,a,s=0;r||(r={});var c=function(){s=r.leading===!1?0:yu(),n=null,a=e.apply(o,i),n||(o=i=null)},l=function(){var u=yu();!s&&r.leading===!1&&(s=u);var f=t-(u-s);return o=this,i=arguments,f<=0||f>t?(n&&(clearTimeout(n),n=null),s=u,a=e.apply(o,i),n||(o=i=null)):!n&&r.trailing!==!1&&(n=setTimeout(c,f)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=i=null},l}function Eh(e){return e.trim().split(/^|\s+/)}function ro(e,t){let r=ge(e()),n=new Set(Object.keys(r)),o=nt.apply(void 0,["change"].concat([...n].map(i=>`change:${String(i)}`)));return{get fields(){return[...n]},initialState(){return e()},validate(i){for(let[a,s]of Object.entries(i)){if(!n.has(a))throw new Error(`unknown key: ${String(a)}`);if(!t[a](s))throw new Error(`value for key '${String(a)}' is not valid: ${s}`)}return i},reset(){this.save(e(),{source:"reset",force:!0})},on(i,a){let s=Eh(i).join(" ");return a===void 0?o.on(s):(o.on(s,a),this)},get(i){return r[i]},getAll(){return ge(r)},save(i,a){let s=ge(),c=ge();Object.keys(i).forEach(u=>{if(!n.has(u))throw new Error(`unknown key: ${String(u)}`);let f=i[u],p=r[u];((a==null?void 0:a.force)===!0||!$r(f,p))&&(s[u]=f,c[u]=p)});let l=Object.keys(s);return l.length>0?(l.forEach(u=>r[u]=s[u]),l.forEach(u=>o.call(`change:${String(u)}`,void 0,s[u],c[u],a)),o.call("change",void 0,s,c,a),!0):!1},set(i,a,s){let c=ge();return c[i]=a,this.save(c,s)},getAndSet(i,a,s){return this.set(i,a(this.get(i)),s)},toggle(i,a){this.getAndSet(i,s=>s!==!0,a)},handle(i){let a=this;return{on(s,c){s=Eh(s)[0];let l=`${s.substring(0,6)}:${String(i)}${s.substring(6)}`;return c===void 0?o.on(l):(o.on(l,c),this)},get(){return r[i]},set(s,c){return a.set(i,s,c)},getAndSet(s,c){return a.getAndSet(i,s,c)},toggle(s){a.toggle(i,s)}}}}}var Ah={strokeStyle:"rgba(250,250,250,0.65)",lineWidth:1.25},Ph={strokeStyle:"rgba(250,250,250,0.65)",lineWidth:1.25},Mh={strokeStyle:"rgba(220,220,220,0.30)",lineWidth:1.25},Dh={strokeStyle:"rgba(250,250,250,0.45)",lineWidth:1.25},kh={strokeStyle:"rgba(250,250,250,0.30)",lineWidth:1.25,lineDash:[5,5]},T2={strokeStyle:"rgba(250,250,250,0.45)",lineWidth:1.25,lineDash:[3,3]},Rh={strokeStyle:"rgba(250,250,250,0.45)",lineWidth:1,lineDash:[2,2]},xu={admin_1:{admin_1_110m:{file:"/map/v2/admin_1_110m-topo.json",style:Rh,detail:"lo"},admin_1_50m:{file:"/map/v2/admin_1_50m-topo.json",style:Rh,detail:"hi"}},disputed_areas:{disputed_50m:{file:"/map/v2/disputed_50m-topo.json",style:T2,detail:"hi"}},pacific_groupings:{pacific_110m:{file:"/map/v2/pacific_110m-topo.json",style:kh,detail:"lo"},pacific_50m:{file:"/map/v2/pacific_50m-topo.json",style:kh,detail:"hi"}},admin_0:{admin_0_110m:{file:"/map/v2/admin_0_110m-topo.json",style:Dh,detail:"lo"},admin_0_50m:{file:"/map/v2/admin_0_50m-topo.json",style:Dh,detail:"hi"}},rivers:{rivers_110m:{file:"./init.json",style:Mh,detail:"lo"},rivers_50m:{file:"./init.json",style:Mh,detail:"hi"}},lakes:{lakes_110m:{file:"./init.json",style:Ph,detail:"lo"},lakes_50m:{file:"./init.json",style:Ph,detail:"hi"}},coastline:{coastline_110m:{file:"./init.json",style:Ah,detail:"lo"},coastline_50m:{file:"./init.json",style:Ah,detail:"hi"}}},_2=new Set(Object.keys(xu));function Ch(e){let t=e;return t.version===2&&Array.isArray(t.elements)&&t.elements.every(r=>_2.has(r))}function Nh(e){return e==="nearest"||e==="bilinear"}function Ls(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function E2(e){return Ls(e)?e:void 0}function A2(e){try{return JSON.parse(e)}catch{return}}function no(e){return E2(A2(e))}var P2=V(".cta-bar").property("hidden")!==!0,M2=()=>{var e;return(e=Br.get("settings.font_size"))!=null?e:"medium"},D2=function(){var t;let e=no((t=Br.get("settings.selected_units"))!=null?t:"{}");return Lh(e)?e:{}},k2=()=>({map_scene:{version:2,elements:["rivers","lakes","coastline"]},interpolation_type:"bilinear",hd_enabled:!1,status:void 0,error:void 0,progress:void 0,display_timezone:"device",show_menu:!1,notice:void 0,show_cta:P2,colorbar_cursor:void 0,selected_units:D2(),font_size:M2()}),R2={map_scene:Ch,interpolation_type:Nh,hd_enabled:tr,status:bs,error:bs,progress:Gl,display_timezone:At,show_menu:tr,notice:bs,show_cta:tr,colorbar_cursor:Gl,selected_units:Lh,font_size:At};function Lh(e){return bt(e)&&Object.entries(e).flat().every(At)}var oe=ro(k2,R2);oe.on(T`change:font_size`,e=>Br.put("settings.font_size",e!=null?e:null));oe.on(T`change:selected_units`,e=>Br.put("settings.selected_units",JSON.stringify(e)));function oo(e){return Array.isArray(e)&&e.every(zr)}function qr(e){return oo(e)&&e.length===2}function Oh(e){return oo(e)&&e.length===3}function Mt(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],o=t[r];if(n!==o&&!(n!==n&&o!==o)&&!Mt(n,o))return!1}return!0}function Ih(e,t){let r=new Float32Array(e.length*2);for(let n=0;n<e.length;n++){let o=n*2;r[o]=e[n],r[o+1]=t[n]}return r}function Fh(e,t){if(typeof e.set=="function")e.set(t);else for(let r=0;r<t.length;r++)e[r]=t[r]}function Vh(e){let t=new Float32Array(e.length);for(let r=0;r<e.length;r++){let n=e[r];t[r]=n===n?n:Hd}return t}function ji(e){return[...new Set(e)]}function vu(e){let t=ji(e.map(Vd));if(t.length>1)throw new Error;return $(t[0])}function C2(e){let t=e.select(function(){return this.parentElement}).nodes().filter(jr);return $(ji(t))}function N2(e){return e.selectAll(function(){return this.children})}function bu(e){let t=new Set(e.nodes());return N2(C2(e)).filter(function(){return!t.has(this)})}function io(e,t){e.on(T`click`,Qe(t))}function Os(e,t,r){let n=typeof r=="function"?r:()=>r;function o(){t.save(n())}e.on(T`click`,Qe(o))}function ao(e,t,r){let n=typeof r=="function"?r:()=>r;function o(){t.getAndSet(n)}e.on(T`click`,Qe(o))}function Is(e,t){function r(o){e.attr("aria-pressed",o)}function n(){t.toggle()}r(t.get()),t.on(T`change`,r),e.on(T`click`,Qe(n))}function Uh(e,t){let r=vu(e.nodes());function n(i){e.attr("aria-expanded",i),r.property("hidden",!i)}function o(){t.toggle()}n(t.get()),t.on(T`change`,n),e.on(T`click`,Qe(o))}function Hh(e,t,r){let n=Ds(iu(e.nodes(),s=>s.dataset.name),vu);function o(s){e.attr("aria-selected",function(){return s===this.dataset.name}),Object.values(n).forEach(c=>c.property("hidden",!0)),queueMicrotask(()=>{var c;return(c=n[s])==null?void 0:c.property("hidden",!1)})}let i=r!=null?r:s=>t.set(s);function a(){var s;i((s=this.dataset.name)!=null?s:"")}t.on(T`change`,o),e.on(T`click`,Qe(a))}function Gh(e,t,r){function n(a){e.attr("aria-checked",function(){return a===this.dataset.name})}let o=r!=null?r:a=>t.set(a);function i(){var a;o((a=this.dataset.name)!=null?a:"")}n(t.get()),t.on(T`change`,n),e.on(T`click`,Qe(i))}function jh(e,t){let r=e.select(".field"),n=e.select("button");function o(){var a,s;let i=(s=(a=t.get("error"))!=null?a:t.get("status"))!=null?s:null;e.property("hidden",(i!=null?i:"")===""),r.text(i)}t.on(T`change:status change:error`,o),io(n,()=>t.save({status:void 0,error:void 0}))}Sr()||jh($("[data-name=status-card]"),oe);var ke={status(e){console.log(`[status] ${e}`),oe.set("status",e)},error(e,t){var i,a,s;let r=(a=(i=e==null?void 0:e.error)!=null?i:e)!=null?a:"unexpected error",n=String((s=r.message)!=null?s:r),o=[t?`[${t}]`:null,e==null?void 0:e.resource,r].filter(c=>!!c);console.error(...o),oe.set("error",n)},reset(){oe.save({status:void 0,error:void 0})}};var L2=[/dailymail/i,/tamilinstanews/i,/xtremeweatherforecast/i,/oracle77.asuscomm/i];function zh(e){var r;let t=(r=e.split("/")[2])!=null?r:"";return L2.some(n=>n.test(t))}function Bh(){V("body").attr("style","font-size: 12em; color: red;").text("XX - contact @cambecc").selectAll("*").remove()}function zi(e){let{clientWidth:t,clientHeight:r}=e.node();return{xMin:0,yMin:0,xMax:t-1,yMax:r-1,width:t,height:r}}function $h(e,t){function r(){let n=zi(t);$r(n,e.value())||e.submit(n)}V(window).on(T`resize`,et(r,1e3))}function qh(e){let{name:t="",initial:r=null,events:n=[]}=e!=null?e:{},o=n.concat(["submit","update","reject","fail"]),i=nt.apply(void 0,o);function a(){let f=Object.assign(()=>void(f.requested=!0),{requested:!1});return f}function s(f,p,m){function d(w,b){return f.requested?null:typeof w=="function"?w.apply(u,b):w}function h(w){if(!f.requested){let b=c;c=w,i.call("update",void 0,w,u,b)}}function g(w){f.requested||i.call("reject",void 0,w,u)}function y(w){i.call("fail",void 0,w,u)}try{Promise.all(m).then(w=>d(p,w)).then(h,g).catch(y),i.call("submit",void 0,u)}catch(w){y(w)}}let c=r,l=et(s,0),u=Object.assign(i,{value:()=>c,cancel:a(),submit(f,...p){return this.cancel(),l(this.cancel=a(),f,p),this},toString:()=>t});return u}function ht(e,t){return qh(ge(t,{name:e})).on(T`reject fail`,ke.error)}function Wh(e){return{viewboxAgent:ht("viewbox",{initial:zi(e)}),mapAgent:ht("map"),globeAgent:ht("globe"),layerManagerAgent:ht("layer"),primaryLayerAgent:ht("primaryLayer"),overlayLayerAgent:ht("overlayLayer"),activeLayerAgent:ht("activeLayer"),annotationLayerAgent:ht("annotLayer"),rendererAgent:ht("renderer",{events:["start","render","redraw"]}),fieldAgent:ht("field"),fastoverlayAgent:ht("fastoverlay"),animatorAgent:ht("animator"),overlayAgent:ht("overlay"),overlayGridAgent:ht("overlayGrid")}}var Yh=`
uniform vec2 u_translate;   // screen coords translation (x0, y0)
uniform float u_R2;         // scale R, squared
uniform float u_lon0;       // origin longitude
uniform float u_sinlat0;    // sin(lat0)
uniform float u_Rcoslat0;   // R * cos(lat0)
uniform float u_coslat0dR;  // cos(lat0) / R
uniform float u_flip;       // 1.0 if lat0 in range [-90deg, +90deg], otherwise -1.0

// Handbook of Mathematical Functions, M. Abramowitz and I.A. Stegun, Ed. For input on range [-1, +1]
// Cg 3.1 Toolkit Documentation https://developer.download.nvidia.com/cg/index_stdlib.html
float arcsin(in float v) {
    float x = abs(v);
    float ret = -0.0187293;
    ret *= x;
    ret += 0.0742610;
    ret *= x;
    ret -= 0.2121144;
    ret *= x;
    ret += 1.5707288;
    ret = PI / 2.0 - sqrt(1.0 - x) * ret;
    return sign(v) * ret;
}

/** @returns [lon, lat] in radians for the specified point [x, y], or [NIL, NIL] if the point is unprojectable. */
vec2 invert(in vec2 point) {
    vec2 p = (point - u_translate) * u_flip;
    float d = 1.0 - dot(p, p) / u_R2;
    if (d >= 0.0) {
        float cosc = sqrt(d);
        float lon = u_lon0 + atan(p.x, cosc * u_Rcoslat0 - p.y * u_sinlat0);  // u_lon0 + [-pi/2, pi/2]
        float lat = arcsin(cosc * u_sinlat0 + p.y * u_coslat0dR);             // [-pi/2, pi/2] [-90deg, +90deg]
        return vec2(lon, lat);
    }
    return vec2(NIL);  // outside of projection
}
`;function Xh(e){let[t,r]=e.rotate(),[n,o]=e.translate();return[e.scale(),-t,-r,n,o]}function Fs(e,t,r,n,o){let i=$e(r+90,360),a=180<i?-1:1;a<0?(r=270-i,t+=180):r=i-90,r*=De,t=($e(t+180,360)-180)*De;let s=e*e,c=Math.sin(r),l=Math.cos(r),u=e*l,f=l/e;function p(h,g){let y=h*De,w=g*De,b=y-t,x=Math.sin(b),_=Math.cos(b),A=Math.sin(w),k=Math.cos(w),P=e*k;if(c*A+l*k*_<0)return[NaN,NaN];let M=P*x,D=P*_*c-u*A,O=M*a+n,L=D*a+o;return[O,L]}function m(h,g){let y=(h-n)*a,w=(o-g)*a,x=1-(y*y+w*w)/s;if(x>=0){let _=Math.sqrt(x),A=t+Math.atan2(y,_*u-w*c),k=Math.asin(_*c+w*f);return[A*Qt,k*Qt]}return[NaN,NaN]}function d(h){let g=[n,h.display.height-o];return{shaderSource:Yh,uniforms:{u_translate:g,u_R2:s,u_lon0:t,u_sinlat0:c,u_Rcoslat0:u,u_coslat0dR:f,u_flip:a}}}return{project:p,invert:m,webgl:d}}var Kh=`
uniform vec2 u_translate;
uniform float u_R;
uniform float u_lon0;

const vec2 BOUNDS = vec2(PI, PI / 2.0);

/** @returns (lon, lat) in radians for the specified point (x, y), or (NIL, NIL) if the point is unprojectable. */
vec2 invert(in vec2 point) {
    // translate and scale
    vec2 p = (point - u_translate) / u_R;
    if (all(lessThanEqual(abs(p), BOUNDS))) {
        // project
        float lambda = p.x;
        float phi = p.y;
        // rotate
        float lon = lambda - u_lon0;
        float lat = phi;
        return vec2(lon, lat);
    }
    return vec2(NIL);  // outside of projection
}
`;var Jh=`
uniform vec2 u_translate;
uniform float u_R;
uniform float u_lon0;
uniform float u_sinlat0;
uniform float u_coslat0;
uniform float u_singam0;
uniform float u_cosgam0;

const vec2 BOUNDS = vec2(PI, PI / 2.0);

/** @returns (lon, lat) in radians for the specified point (x, y), or (NIL, NIL) if the point is unprojectable. */
vec2 invert(in vec2 point) {
    // translate and scale
    vec2 p = (point - u_translate) / u_R;
    if (all(lessThanEqual(abs(p), BOUNDS))) {
        // project
        float lambda = p.x;
        float phi = p.y;
        // rotate (formulas pulled from d3-geo)
        float cosphi = cos(phi);
        float q = cos(lambda) * cosphi;
        float r = sin(lambda) * cosphi;
        float s = sin(phi);
        float t = s * u_cosgam0 - r * u_singam0;
        float u = r * u_cosgam0 + s * u_singam0;
        float v = q * u_coslat0 + t * u_sinlat0;
        float w = t * u_coslat0 - q * u_sinlat0;
        float lon = atan(u, v) - u_lon0;
        float lat = asin(clamp(w, -1.0, 1.0));  // keep holes from forming at poles
        return vec2(lon, lat);
    }
    return vec2(NIL);  // outside of projection
}
`;function Zh(e){let[t,r,n]=e.rotate(),[o,i]=e.translate();return[e.scale(),t,r,n,o,i]}function Qh(e,t,r,n,o,i){return r===0&&n===0?U2(e,t,o,i):H2(e,t,r,n,o,i)}function U2(e,t,r,n){t*=De;function o(s,c){let l=s*De,u=c*De;l+=t;let f=$e(Zt+l,br)-Zt,p=u,m=e*f+r,d=n-e*p;return[m,d]}function i(s,c){let l=(s-r)/e,u=(n-c)/e;if(Math.abs(l)<=Zt&&Math.abs(u)<=Zt/2){let f=l,p=u;f-=t;let m=f*Qt,d=p*Qt;return[m,d]}return[NaN,NaN]}function a(s){let c=[r,s.display.height-n];return{shaderSource:Kh,uniforms:{u_translate:c,u_R:e,u_lon0:t}}}return{project:o,invert:i,webgl:a}}function H2(e,t,r,n,o,i){t*=De,r*=De,n*=De;let a=Math.cos(r),s=Math.sin(r),c=Math.cos(n),l=Math.sin(n);function u(m,d){let h=m*De,g=d*De;h+=t;let y=Math.cos(g),w=Math.cos(h)*y,b=Math.sin(h)*y,x=Math.sin(g),_=x*a+w*s;h=Math.atan2(b*c-_*l,w*a-x*s),g=Math.asin(_*c+b*l);let A=h,k=g,P=e*A+o,N=i-e*k;return[P,N]}function f(m,d){let h=(m-o)/e,g=(i-d)/e;if(Math.abs(h)<=Zt&&Math.abs(g)<=Zt/2){let y=h,w=g,b=Math.cos(w),x=Math.cos(y)*b,_=Math.sin(y)*b,A=Math.sin(w),k=A*c-_*l;y=Math.atan2(_*c+A*l,x*a+k*s),w=Math.asin(k*a-x*s),y-=t;let P=y*Qt,N=w*Qt;return[P,N]}return[NaN,NaN]}function p(m){let d=[o,m.display.height-i];return{shaderSource:Jh,uniforms:{u_translate:d,u_R:e,u_lon0:t,u_sinlat0:s,u_coslat0:a,u_singam0:l,u_cosgam0:c}}}return{project:u,invert:f,webgl:p}}var e0=Object.freeze({conicEquidistant:wu,equirectangular:Su,mollweide:Tu,orthographic:_u,patterson:Eu,polyhedralWaterman:Au,stereographic:Pu,winkel3:Mu});function G2(){let e=z2(this),t=e.invert.bind(e),r=[NaN,NaN];return{project(n,o){var i;return r[0]=n,r[1]=o,(i=e(r))!=null?i:[NaN,NaN]},invert(n,o){var i;return r[0]=n,r[1]=o,(i=t(r))!=null?i:[NaN,NaN]}}}function Wr(e,t,r=G2){let n=e;return n.key=t,n.optimize=r,n}function wu(){return Wr(ii(),"conicEquidistant")}function Su(){return Wr(oi(),"equirectangular",function(){return Qh(...Zh(this))})}function Tu(){return Wr(ui(),"mollweide")}function _u(){return Wr(ai(),"orthographic",function(){return Fs(...Xh(this))})}function Eu(){return Wr(fi(),"patterson")}function Au(){return Wr(mi(),"polyhedralWaterman")}function Pu(){return Wr(si(),"stereographic")}function Mu(){return Wr(di(),"winkel3")}function t0(e){return"parallels"in e}function Pn(e){if(e0[e.key]===void 0)throw new Error(`Unsupported projection: ${e}`);let t={name:e.key,clipAngle:e.clipAngle(),clipExtent:e.clipExtent(),scale:e.scale(),translate:e.translate(),center:e.center(),angle:e.angle(),reflectX:e.reflectX(),reflectY:e.reflectY(),rotate:e.rotate(),precision:e.precision()};return t0(e)&&(t.parallels=e.parallels()),t}function j2(e){let t=e.name,r=e0[t];if(r===void 0)throw new Error(`Unknown projection: ${t}`);let n=r().clipAngle(e.clipAngle).clipExtent(e.clipExtent).scale(e.scale).translate(e.translate).center(e.center).angle(e.angle).reflectX(e.reflectX).reflectY(e.reflectY).rotate(e.rotate).precision(e.precision);return e.parallels!==void 0&&t0(n)&&n.parallels(e.parallels),n}function z2(e){return j2(Pn(e))}function so(e=1,t=1){let r=document.createElement("canvas");return r.width=e,r.height=t,r}function Yr(e){let{width:t,height:r}=e.canvas;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,r),e.restore()}function Bi(e){Yr(e.getContext("2d"))}function $i(e,t){let r=typeof e=="function"?e:()=>e;return{renderTo(n,o){var i,a;n.beginPath(),o(r()),t.fillStyle&&(n.fillStyle=t.fillStyle,n.fill()),t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=(i=t.lineWidth)!=null?i:1,n.setLineDash((a=t.lineDash)!=null?a:[]),n.stroke())}}}function co(){let e=[];return{add(t){e.push(t)},clear(){e.length=0},renderTo(t,r){e.forEach(n=>n.renderTo(t,r))}}}function qi(e){return{renderTo(t,r){Yr(t),r.context(t),t.lineJoin="bevel",e.forEach(n=>n.renderTo(t,r))}}}function Mn(e){let{scale:t="default",rotate:r="default",translate:n="default"}=e;return{scale:t,rotate:r,translate:n}}function Du(){return[$e(new Date().getTimezoneOffset()/4,360),0]}function Xr(e,t){let[[r,n],[o,i]]=It(e).bounds({type:"Sphere"}),a=(o-r)/e.scale(),s=(i-n)/e.scale(),c=Math.min(t.width/a,t.height/s)*.9,l=[t.width/2,t.height/2];return e.scale(c).translate(l)}var n0=Object.assign(()=>{throw new Error},{key:"impossible"});function B2(){return{projection:n0,newProjection(){throw new Error("method must be overridden")},bounds(e){let[[t,r],[n,o]]=It(this.projection).bounds({type:"Sphere"}),i=Math.max(Math.floor(xn(t,0)),0),a=Math.max(Math.floor(xn(r,0)),0),s=Math.min(Math.ceil(xn(n,e.width)),e.width-1),c=Math.min(Math.ceil(xn(o,e.height)),e.height-1);return{xMin:i,yMin:a,xMax:s,yMax:c,width:s-i+1,height:c-a+1}},center(e){return[e.width/2,e.height/2]},scaleExtent(){return[25,25e4]},getOrientation(){let e=this.projection,t=e.scale(),r=e.rotate().slice(0,2),n=e.translate();return ge({scale:t,rotate:r,translate:n})},reorient(e,t){let r=this.projection,n=e.scale==="default",o=e.rotate==="default",i=e.translate==="default",a=n||o||i?this.newProjection(t):n0,s=n?a.scale():Z(e.scale,r.scale());s=pe(s*Z(e.scaleBy,1),...this.scaleExtent());let[c,l,u]=o?a.rotate():r.rotate();Array.isArray(e.rotate)&&(c=Z(e.rotate[0],c),l=Z(e.rotate[1],l),u=Z(e.rotate[2],u)),Array.isArray(e.rotateBy)&&(c+=Z(e.rotateBy[0],0),l+=Z(e.rotateBy[1],0),u+=Z(e.rotateBy[2],0));let[f,p]=i?a.translate():r.translate();Array.isArray(e.translate)&&(f=Z(e.translate[0],f),p=Z(e.translate[1],p)),Array.isArray(e.translateBy)&&(f+=Z(e.translateBy[0],0),p+=Z(e.translateBy[1],0)),r.scale(s).rotate([c,l,u]).translate([f,p])},manipulator(e,t){let r=this.projection,n=60/t,o=[r.rotate()[0]/n,-r.rotate()[1]/n],i=r.precision();return r.precision(i*10),{move(a,s){if(a){let c=a[0]-e[0]+o[0],l=a[1]-e[1]+o[1];r.rotate([c*n,-l*n,r.rotate()[2]])}r.scale(s)},end(){r.precision(i)}}},defineMask(e){return It(this.projection,e)({type:"Sphere"}),e},backgroundRenderer(){return{renderTo(e,t){e.fillStyle="#303030",e.beginPath(),t({type:"Sphere"}),e.fill()}}},graticuleRenderer(){let e=mn()(),t=mn().extentMinor([[0,0],[0,0]]).stepMajor([0,90])(),r=$i(e,{strokeStyle:"rgba(180,180,180,0.20)",lineWidth:1}),n=$i(t,{strokeStyle:"rgba(250,250,250,0.20)",lineWidth:1});return{renderTo(o,i){r.renderTo(o,i),n.renderTo(o,i)}}},preForegroundRenderer(){return{renderTo(){}}},postForegroundRenderer(){return{renderTo(e,t){e.strokeStyle="#000005",e.lineWidth=3,e.beginPath(),t({type:"Sphere"}),e.stroke()}}}}}function Kr(e,t){let r=Object.assign(B2(),e);return r.projection=r.newProjection(t),r}function $2(e){return Kr({newProjection(t){return Xr(Tu().rotate([30,-45,90]).precision(.1),t)}},e)}function q2(e){return Kr({newProjection(t){return Xr(wu().rotate(Du()).precision(.1),t)}},e)}function W2(e){return Kr({newProjection(t){return Xr(Su().rotate(Du()).precision(.1),t)}},e)}function Y2(e){return Kr({newProjection(t){return Xr(_u().rotate(Du()).precision(.1).clipAngle(90),t)},backgroundRenderer(){return{renderTo(t,r){let n=r.projection(),[o,i]=n.translate(),a=n.scale(),s=t.createRadialGradient(o,i,0,o,i,a);s.addColorStop(.69,"#303030"),s.addColorStop(.91,"#202020"),s.addColorStop(.999,"#000005"),s.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=s,t.fillRect(o-a,i-a,a*2,a*2)}}},postForegroundRenderer(){return{renderTo(t,r){let n=r.projection(),[o,i]=n.translate(),a=n.scale(),s=2;if(Jd()){let c=a+60,l=t.createRadialGradient(o,i,a,o,i,c);l.addColorStop(0,"transparent"),l.addColorStop(.001,"rgba(0,0,0,0.25)"),l.addColorStop(1,"transparent"),t.fillStyle=l,t.fillRect(o-c,i-c,c*2,c*2),s=1}t.strokeStyle="#000005",t.lineWidth=3,t.beginPath(),r({type:"Sphere"}),t.stroke()}}}},e)}function X2(e){return Kr({newProjection(t){return Xr(Eu().precision(.1),t)}},e)}function K2(e){return Kr({newProjection(t){return Xr(Pu().rotate([-43,-20]).precision(1).clipAngle(180-1e-4).clipExtent([[0,0],[t.width,t.height]]),t)},postForegroundRenderer(){return{renderTo(){}}}},e)}function J2(e){return Kr({newProjection(t){return Xr(Au().rotate([20,0]).precision(.1),t)},preForegroundRenderer(){return{renderTo(t,r){t.save(),t.beginPath(),r({type:"Sphere"}),t.clip()}}},postForegroundRenderer(){return{renderTo(t,r){t.restore(),t.strokeStyle="#000005",t.lineWidth=3,t.beginPath(),r({type:"Sphere"}),t.stroke()}}}},e)}function Z2(e){return Kr({newProjection(t){return Xr(Mu().precision(.1),t)}},e)}var ku=Object.freeze({atlantis:$2,conic_equidistant:q2,equirectangular:W2,orthographic:Y2,patterson:X2,stereographic:K2,waterman:J2,winkel3:Z2});var o0=6,Q2=750;function i0(e,t,r,n){let o=nt("moveStart","move","moveEnd","click"),i=e.node(),a=t.handle("orientation"),s,c=null,l={time:0,mouse:[0,0]},u=!1;function f(M,D){return{type:"click",startMouse:M,startScale:D,manipulator:s.manipulator(M,D)}}function p(M){var D;c=c!=null?c:f((D=On(M,i)[0])!=null?D:[NaN,NaN],s.projection.scale())}function m(M){var L,v,S;let D=(L=On(M,i)[0])!=null?L:[NaN,NaN],O=(S=(v=M.transform)==null?void 0:v.k)!=null?S:s.projection.scale();if(c=c!=null?c:f(D,1),c.type==="click"){let E=Ni(D,c.startMouse);if(O===c.startScale&&(E<o0||isNaN(E)))return;b(),c.type="drag"}(O!==c.startScale||isNaN(D[0]))&&(c.type="zoom"),c.manipulator.move(c.type==="zoom"?void 0:D,O),x()}function d(){return Date.now()-l.time<500&&Ni(l.mouse,c.startMouse)<o0||u}function h(){c!==null&&(c.manipulator.end(),c.type==="click"?d()||(w(),l={time:Date.now(),mouse:c.startMouse}):y(),c=null)}let g;function y(){g&&clearTimeout(g),g=setTimeout(()=>{g=void 0,(!c||c.type!=="drag"&&c.type!=="zoom")&&(a.set(s.getOrientation(),{source:"moveEnd"}),_())},Q2)}function w(){var O;let M=c.startMouse,D=(O=s.projection.invert(M))!=null?O:[NaN,NaN];o.call("click",void 0,M,D)}function b(){n==null||n.reorientStart(Pn(s.projection)),o.call("moveStart")}function x(){n==null||n.reorientStep(Pn(s.projection)),o.call("move")}function _(){n==null||n.reorientEnd(Pn(s.projection)),o.call("moveEnd")}let A=Di().on("start",p).on("zoom",m).on("end",h),k=Uo().on("start",p).on("drag",m).on("end",h);to()?e.call(k):e.call(A).on(T`wheel`,M=>M.preventDefault());function P(M,D){if(!s||(D==null?void 0:D.source)==="moveEnd")return;let O=u;u=!0;try{b(),s.reorient(M,r.value());let L=s.projection.scale();A.transform(e,Jt.scale(L)),_()}finally{u=O}}function N(M){if(!s)return;let D=u;u=!0;try{g||b();let O=s.projection.scale();s.reorient(M,r.value());let L=s.projection.scale();L!==O&&A.transform(e,Jt.scale(L)),x(),y()}finally{u=D}}return t.on(T`change`,(M,D,O)=>{M.orientation!==void 0&&M.projection_type===void 0&&P(Mn(M.orientation),O)}),r.on(T`update`,(M,D,O)=>{var ne;if(!s)return;let{scale:L="default",translate:v="default"}=(ne=a.get())!=null?ne:{},[S,E]=s.center(O),[I,C]=Array.isArray(v)?v:[S,E],F=I-S,U=C-E,[j,Y]=s.center(M);N({scale:L,translate:[j+F,Y+U]})}),Object.assign(o,{assignGlobe(M){s=M,A.scaleExtent(s.scaleExtent()),P(Mn(a.get()))},reorient:N,cancelMove(){h()}})}function lo(e){let t=e;return bt(t)&&t.type==="epak"&&Ru(t.header)&&"blocks"in t}function Ru(e){let t=e;if(bt(t)){if(bt(t.variables))return Object.values(t.variables).every(r=>Array.isArray(r.dimensions));if(bt(t.columns))return Object.values(t.columns).every(bt)}return!1}function jt(e,t){if(e.data&&"block"in e.data){let r=t.blocks[e.data.block];if(r.type==="ppak")return r.data}throw new Error(`cannot find ppak data for variable '${e["@variable"]}'`)}function a0(e){return Array.isArray(e)&&e.every(t=>zr(t)||qr(t))}function s0(e,t){let r=0,n=0;for(;r<t.length;){let o=t[r++];if(o<128)o=o<<25>>25;else switch(o>>4){case 8:case 9:case 10:case 11:o=o<<26>>18|t[r++];break;case 12:case 13:o=o<<27>>11|t[r++]<<8|t[r++];break;case 14:o=o<<28>>4|t[r++]<<16|t[r++]<<8|t[r++];break;case 15:if(o===255){for(let i=1+t[r++];i>0;i--)e[n++]=NaN;continue}else switch(o&7){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++];break;case 8:case 9:case 10:case 11:default:throw new Error("NYI")}break}e[n++]=o}return e}function ew(e,t,r,n){let o,i,a,s,c,l,u;for(a=0;a<n;a++){for(l=a*t*r,o=1;o<t;o++)s=l+o,u=e[s-1],e[s]+=u===u?u:0;for(i=1;i<r;i++)for(c=l+i*t,u=e[c-t],e[c]+=u===u?u:0,o=1;o<t;o++){s=c+o;let f=e[s-1],p=e[s-t],m=e[s-t-1];u=f+p-m,e[s]+=u===u?u:f===f?f:p===p?p:m===m?m:0}}return e}function c0(e,t){for(let r=0;r<e.length;r++)e[r]/=t;return e}function tw(e,t,r,n,o){let i=new Float32Array(t*r*n);return s0(i,e),ew(i,t,r,n),c0(i,o),i}function rw(e,t,r){let n=new DataView(e,t,r),o=new Uint8Array(e,t+16,r-16),i=n.getInt32(0),a=n.getInt32(4),s=n.getInt32(8),c=Math.pow(10,n.getFloat32(12));return{type:"ppak",data:tw(o,i,a,s,c),cols:i,rows:a,grids:s,scaleFactor:c,missingValue:NaN}}function nw(e,t){switch(e){case 0:return[];case 8:return new Float32Array(t);case 9:return new Float64Array(t);default:throw new Error(`unknown element type: ${e}`)}}function ow(e,t,r,n){let o=nw(t,r);return s0(o,e),aw(o,o),c0(o,n),o}function iw(e,t,r){let n=new DataView(e,t,r),o=new Uint8Array(e,t+13,r-13),i=n.getUint8(0),a=n.getInt32(1),s=n.getFloat64(5);return{type:"qpak",data:ow(o,i,a,s),scaleFactor:s,missingValue:NaN}}function l0(e,t){let{headerOnly:r=!1}=t!=null?t:{},n=0,o=new DataView(e),i=new TextDecoder("utf-8"),a=i.decode(new Uint8Array(e,n,4));if(n+=4,a!=="head")throw new Error("expected 'head' but found '"+a+"'");let s=o.getInt32(n);n+=4;let c=no(i.decode(new Uint8Array(e,n,s)));n+=s;let l,u=[],f;for(;!r&&(f=i.decode(new Uint8Array(e,n,4)))!=="tail";){switch(n+=4,s=o.getInt32(n),n+=4,f){case"ppak":l=rw(e,n,s);break;case"qpak":l=iw(e,n,s);break;default:throw new Error("unknown block type: "+f)}u.push(l),n+=s}if(!Ru(c))throw new Error("epak header is not valid");return{type:"epak",header:c,blocks:u}}function u0(e,t,r,n){let o=new Float32Array(n),i=0;for(let a=0,s=0;a<e.length&&i<n;a++){let c=e[a],l=Array.isArray(c),u=l?c[0]:c,f=l?pe(+c[1]+i,i,n):i+1,p=+u;if(u===null||p!==p){if(!(i<f))continue;for(;i<f;)o[i++]=NaN;s=0}else for(;i<f;)o[i++]=(s=s+p)*t+r}for(;i<n;)o[i++]=NaN;return o}function aw(e,t){for(let r=0,n=0;n<e.length;n++)t[n]=r=r+e[n]}var f0,p0,m0,cw=(m0=no((p0=(f0=document.querySelector("#translations"))==null?void 0:f0.textContent)!=null?p0:"{}"))!=null?m0:{};function R(e){var r;if(e.length>1)throw new Error("NYI");let t=e[0];return String((r=cw[t])!=null?r:t)}function uo(e){return setTimeout(e,1)}function fo(e,t=1){let r;return function(...n){r===void 0&&(r=setTimeout(()=>{r=void 0,e.apply(this,n)},t))}}function d0(e,t){return t!==void 0?setTimeout(e,t):void e()}function ut(e,t){t.site_version=Qd();let r=e.substring(0,40),n=sh(t,40,100);"gtag"in window&&typeof window.gtag=="function"&&(window.gtag("event",r,n),lw())}var lw=fo(()=>{if("dataLayer"in window&&Array.isArray(window.dataLayer)){let{dataLayer:e}=window;e.length>=1e3&&e.splice(0,e.length/2)}},5e3);function uw(e){try{let{host:t,pathname:r}=new URL(e,window.location.href);ut("fetch",{fetch_host:t,fetch_pathname:r})}catch(t){ut("exception",{category:"fetch",description:t})}}function h0(e,t){uw(e);function r(o){if(o.ok)return t(o).catch(a=>Promise.reject({resource:e,error:a}));let i=o.status===404?R`Data not available for this date`:`Error: HTTP ${o.status}: ${o.statusText}`;return Promise.reject({resource:e,error:i})}function n(o){let i=navigator.onLine?`${R`Data download failed`}: ${o.message}`:R`Network not available`;return Promise.reject({resource:e,error:i})}return fetch(e).then(r,n)}function Vs(e){return h0(e,t=>t.json())}var vF=ks(Vs);function Wi(e,t){return h0(e,async r=>{let n=await r.arrayBuffer();return n.byteLength>0?l0(n,t):Promise.reject({resource:e,error:R`Data is empty`})})}function fw(e){return e?/\.epak([/?#]|$)/.test(e)?Wi(e):Vs(e):Promise.reject({resource:e,error:R`Data not available for this date`})}function pw(e,t){return e===void 0||t.requested?Promise.resolve(e):Promise.all(e.paths.map(fw)).then(r=>t.requested?e:Object.assign(e,e.builder(...r)))}function g0(e,t){return Promise.all(e.map(r=>pw(r,t)))}function Cu(e){return e}function Us(e){if(e==null)return Cu;var t,r,n=e.scale[0],o=e.scale[1],i=e.translate[0],a=e.translate[1];return function(s,c){c||(t=r=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*n+i,f[1]=(r+=s[1])*o+a;l<u;)f[l]=s[l],++l;return f}}function y0(e,t){for(var r,n=e.length,o=n-t;o<--n;)r=e[o],e[o++]=e[n],e[n]=r}function Nu(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return x0(e,r)})}:x0(e,t)}function x0(e,t){var r=t.id,n=t.bbox,o=t.properties==null?{}:t.properties,i=Lu(e,t);return r==null&&n==null?{type:"Feature",properties:o,geometry:i}:n==null?{type:"Feature",id:r,properties:o,geometry:i}:{type:"Feature",id:r,bbox:n,properties:o,geometry:i}}function Lu(e,t){var r=Us(e.transform),n=e.arcs;function o(u,f){f.length&&f.pop();for(var p=n[u<0?~u:u],m=0,d=p.length;m<d;++m)f.push(r(p[m],m));u<0&&y0(f,d)}function i(u){return r(u)}function a(u){for(var f=[],p=0,m=u.length;p<m;++p)o(u[p],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,p;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":p=i(u.coordinates);break;case"MultiPoint":p=u.coordinates.map(i);break;case"LineString":p=a(u.arcs);break;case"MultiLineString":p=u.arcs.map(a);break;case"Polygon":p=c(u.arcs);break;case"MultiPolygon":p=u.arcs.map(c);break;default:return null}return{type:f,coordinates:p}}return l(t)}async function yw(e){let t=ji(Object.values(e).map(o=>o.file)),r=await Promise.all(t.map(Vs)),n={};for(let[o,i]of Object.entries(e))n[o]=r[t.indexOf(i.file)];return n}async function xw(e,t,r,n){ke.status("Downloading...");try{let c=function(l){return Object.keys(i).filter(u=>i[u].detail===l).map(u=>$i(s[u],i[u].style))};var o=c;console.time("build map");let i={};e.elements.forEach(l=>Object.assign(i,xu[l]));let a=await yw(i);if(n.requested)return;let s={};for(let[l,u]of Object.entries(a))s[l]=Nu(u,l);t.clear(),c("lo").forEach(l=>t.add(l)),r.clear(),c("hi").forEach(l=>r.add(l))}finally{console.timeEnd("build map")}}function v0(e,t){let{mapAgent:r}=e,n=co(),o=co();function i(){r.submit(async function(){return await xw(t.get(),n,o,this.cancel),{mapLo:n,mapHi:o}})}t.on(T`change`,i)}var b0=new Set(Object.keys(ku));function w0(e,t,r){let{globeAgent:n,viewboxAgent:o}=e;function i(s,c){let l=o.value();l!==null&&(s==null||s.reorient(Mn(c),l))}function a(s){var u,f;let c=o.value(),l=c?(f=(u=ku)[s])==null?void 0:f.call(u,c):void 0;i(l!=null?l:null,r.get()),n.submit(l!=null?l:Promise.reject(`Unknown projection: ${s}`))}t.on(T`change`,a),r.on(T`change`,s=>i(n.value(),s))}var Ou=5;function Yi(e,t,r,n){var p,m;let o=e.select(`#${t}`);if(r===null){o.remove();return}let i=V((p=o.node())!=null?p:e.append("path").attr("id",t).node()).datum(r),a=(m=r.properties)!=null?m:{},s=a.class,c=Ae(a.fill),l=Ae(a.stroke),{strokeWidth:u,strokeDasharray:f}=a;if(s?i.attr("class",s):i.attr("class",null),c?(i.attr("fill",c.copy({opacity:1}).toString()),i.attr("fill-opacity",c.opacity!==1?c.opacity:null)):(i.attr("fill",null),i.attr("fill-opacity",l?0:null)),l?(i.attr("stroke",l.copy({opacity:1}).toString()),i.attr("stroke-opacity",l.opacity!==1?l.opacity:null),i.attr("stroke-width",u!=null?u:1),i.attr("stroke-dasharray",oo(f)?f.join(","):null)):(i.attr("stroke",null),i.attr("stroke-opacity",null),i.attr("stroke-width",null),i.attr("stroke-dasharray",null)),n){let d=It(n).pointRadius(h=>{var g,y;return(y=(g=h.properties)==null?void 0:g.pointRadius)!=null?y:Ou});i.attr("d",d)}}function S0(){return!0}var Hs=Symbol("low detail scene"),Iu=Symbol("high detail scene");function vw(e,t,r,n,o){var v,S;let{rendererAgent:i,viewboxAgent:a,globeAgent:s,mapAgent:c}=t,l=s.value(),u=c.value();if(!l||!u)return null;ke.status("Rendering Globe..."),console.time("rendering map");let f=(v=e.select("[data-name=map]").node())==null?void 0:v.getContext("2d"),p=(S=e.select("[data-name=foreground]").node())==null?void 0:S.getContext("2d"),m=e.select("[data-name=annotation]");l.reorient(Mn(n.get()),a.value());let d=It(l.projection).pointRadius(E=>{var I,C;return(C=(I=E.properties)==null?void 0:I.pointRadius)!=null?C:Ou}),h=5,g=Gi(L,h,{leading:!1}),y=l.backgroundRenderer(),w=l.graticuleRenderer(),b=l.preForegroundRenderer(),x=l.postForegroundRenderer(),{mapLo:_,mapHi:A}=u,k=co(),P=co(),N={[Hs]:qi([y]),[Iu]:qi([y])},M={[Hs]:qi([b,w,_,k,x]),[Iu]:qi([b,w,A,P,x])};function D(E){let I=N[E],C=M[E];f&&I.renderTo(f,d),p&&C.renderTo(p,d),d.context(null)}function O(){m.selectAll("path").attr("d",d)}function L(){D(Hs),O(),i.call("redraw"),g=Gi(L,h,{leading:!1})}return r.on("moveStart.renderer",()=>{i.call("start")}),r.on("move.renderer",()=>{g()}),r.on("moveEnd.renderer",()=>{D(o),O(),i.call("render")}),Promise.resolve().then(()=>{r.assignGlobe(l)}).catch(ke.error),console.timeEnd("rendering map"),{dynamicItemsLo:k,dynamicItemsHi:P,draw(){D(o),O()}}}function T0(e,t,r,n){let{rendererAgent:o,globeAgent:i,mapAgent:a}=t,s=S0()?Iu:Hs;function c(){o.submit(()=>vw(e,t,r,n,s))}i.on(T`update`,c),a.on(T`update`,c)}var _0="CAMS / Copernicus / European Commission + ECMWF",E0="CPC / NCEP / US National Weather Service",A0="Coral Reef Watch / NOAA",P0="VIIRS NRT / FIRMS / EOSDIS / NASA",Fu="GEOS-5 / GMAO / NASA",M0="GFS / NCEP / US National Weather Service";var D0="OI SST V2.1 / PSL / NOAA";var k0="OSCAR v2.0 / Earth & Space Research",Vu="OSTIA / UK Met Office + GHRSST + CMEMS",R0="OVATION / SWPC / NCEP / NWS / NOAA",Uu="RTG-SST / NCEP / US National Weather Service",Hu="WAVEWATCH III / NCEP / NWS";function po(e,t,r="0"){return String(e).padStart(t,r)}function C0(e){return e.length===0?e:e.charAt(0).toUpperCase()+e.substring(1)}function N0(e,t=2){let r=$e(Number(e==null?void 0:e[0])+180,360)-180,n=Number(e==null?void 0:e[1]);return r===r&&n===n?`${Math.abs(n).toFixed(t)}° ${n>=0?"N":"S"}, ${Math.abs(r).toFixed(t)}° ${r>=0?"E":"W"}`:void 0}function L0(e,t){try{return new URL(e,t)}catch{}}var bw=["year","month","day","hour","minute","second","milli"];function O0(e){return e instanceof Date?e:typeof e=="number"||typeof e=="string"?new Date(e):new Date(NaN)}function _e(e){return e=O0(e),{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),milli:e.getUTCMilliseconds()}}function Gu(e){return e=O0(e),{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),milli:e.getMilliseconds()}}function re(e){var n,o,i,a,s,c,l;let t=+((n=e.year)!=null?n:0),r=new Date(Date.UTC(t,((o=e.month)!=null?o:1)-1,(i=e.day)!=null?i:1,(a=e.hour)!=null?a:0,(s=e.minute)!=null?s:0,(c=e.second)!=null?c:0,(l=e.milli)!=null?l:0));return+r==+r&&0<=t&&t<=99&&r.setUTCFullYear(t),r}function ww(e){var n,o,i,a,s,c,l;let t=+((n=e.year)!=null?n:0),r=new Date(t,((o=e.month)!=null?o:1)-1,(i=e.day)!=null?i:1,(a=e.hour)!=null?a:0,(s=e.minute)!=null?s:0,(c=e.second)!=null?c:0,(l=e.milli)!=null?l:0);return+r==+r&&0<=t&&t<=99&&r.setFullYear(t),r}function Gs(e){return Gu(re(e))}function I0(e){return _e(ww(e))}function Dn(e){return F0(re(e))}var F0=_e;function tt(e,t){let r=Object.assign({},e);return bw.filter(n=>n in t).forEach(n=>{var o;r[n]=Number((o=r[n])!=null?o:0)+Number(t[n])}),r}function V0(e,t){let r=re(e).getTime();isNaN(r)&&(r=-1/0);let n=re(t).getTime();return isNaN(n)&&(n=-1/0),r<n?-1:r>n?1:0}function B(e,t){let r=[];for(let n=0;n<t.length;n++){let o=t[n];if(o!=="{"){r.push(o);continue}let i="";for(n++;n<t.length;n++){if(o=t[n],o!=="}"){i+=o;continue}let a=NaN;switch(i[0]){case"Y":a=Number(e.year);break;case"M":a=Number(e.month);break;case"D":a=Number(e.day);break;case"h":a=Number(e.hour);break;case"m":a=Number(e.minute);break;case"s":a=Number(e.second);break;case"S":a=Number(e.milli);break}a===a?r.push(po(a,i.length)):r.push("{",i,"}");break}}return r.join("")}function js(e){return re(e).toISOString()}function U0(e,t){let{day:r=0,hour:n=0,minute:o=0,second:i=0,milli:a=0}=t,s=r*Ud+n*wr+o*Ri+i*Vl+a,c=+re(e),l=Math.floor(c/s)*s;return F0(l)}function Sw(e,t){if(t===void 0)return e;let r=+re(e),n=+re(t);return n!==n?_e(NaN):n<r?Object.assign({},t):e}function Tw(e,t){if(t===void 0)return e;let r=+re(e),n=+re(t);return n!==n?_e(NaN):n>r?Object.assign({},t):e}function Xi(e,t,r){return Tw(Sw(e,r),t)}var H0=`
uniform vec2 u_Low;
uniform vec2 u_Size;

vec2 grid(in vec2 coord) {
    vec2 tex = (coord - u_Low) / u_Size;
    float s = tex.s;
    float t = tex.t;

    if (t < 0.0 || 1.0 < t) discard;  // lat out of bounds, so nothing to draw

    return vec2(fract(s), t);  // UNDONE: fract used here only because lon is circular.
}
`;function kt(e,t){let r=Math.floor(e.size),n=Math.floor(t.size),o=r*n,i=Li(e.delta),a=Li(t.delta),s=Li(e.start),c=Li(t.start),l=s+i*(r-1),u=c+a*(n-1),f=(s-i/2)*De,m=(l+i/2)*De-f,d=(c-a/2)*De,g=(u+a/2)*De-d,y=[f,d],w=[m,g],b=Math.floor(r*i)>=360;return{dimensions(){return{width:r,height:n}},isCylindrical(){return b},forEach(x,_){for(let A=_||0;A<o;A++){let k=A%r,P=Math.floor(A/r),N=s+k*i,M=c+P*a;if(x(N,M,A))return A+1}return NaN},closest(x,_){if(x===x&&_===_){let A=$e(x-s,360)/i,k=(_-c)/a,P=Math.round(A),N=Math.round(k);if(0<=N&&N<n&&0<=P&&(P<r||P===r&&b)){let M=N*r+P;return P===r?M-r:M}}return NaN},closest4(x,_){if(x===x&&_===_){let A=$e(x-s,360)/i,k=(_-c)/a,P=Math.floor(A),N=Math.floor(k),M=P+1,D=N+1,O=A-P,L=k-N;if(0<=N&&D<n&&0<=P&&(M<r||M===r&&b)){let v=N*r+P,S=v+1,E=v+r,I=E+1;return M===r&&(S-=r,I-=r),[v,S,E,I,O,L]}}return[NaN,NaN,NaN,NaN,NaN,NaN]},webgl(){return{shaderSource:H0,uniforms:{u_Low:y,u_Size:w}}}}}var G0=`
uniform sampler2D u_Data;

float lookup(in vec2 st) {
    vec4 h = texture2D(u_Data, st);
    return scalarize(h);
}
`;var j0=`
uniform sampler2D u_Data;
uniform vec2 u_TextureSize;

vec4 getSample(in vec2 st) {
    // Use of fract below assumes cylindrical x axis (usually lon) and non-cylindrical y axis (usually lat).
    return texture2D(u_Data, vec2(fract(st.s), st.t));
}

float lookup(in vec2 st) {
    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm
    vec2 uv = st * u_TextureSize - 0.5;
    vec2 iuv = floor(uv);
    vec2 fuv = fract(uv);
    vec2 ruv = 1.0 - fuv;

    vec4 a = getSample((iuv + vec2(0.5, 0.5)) / u_TextureSize);  // LL
    vec4 b = getSample((iuv + vec2(1.5, 0.5)) / u_TextureSize);  // LR
    vec4 c = getSample((iuv + vec2(0.5, 1.5)) / u_TextureSize);  // UL
    vec4 d = getSample((iuv + vec2(1.5, 1.5)) / u_TextureSize);  // UR
    vec4 h;

    int tag = int(dot(step(NIL, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));
    if (tag == 0) {
        // a b c d
        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);
    } else if (tag == 1 && ruv.y < fuv.x) {
        // d b c
        h = d + ruv.x * (c - d) + ruv.y * (b - d);
    } else if (tag == 2 && fuv.x < fuv.y) {
        // c a d
        h = c + fuv.x * (d - c) + ruv.y * (a - c);
    } else if (tag == 4 && fuv.x >= fuv.y) {
        // b a d
        h = b + ruv.x * (a - b) + fuv.y * (d - b);
    } else if (tag == 8 && fuv.x <= ruv.y) {
        // a b c
        h = a + fuv.x * (b - a) + fuv.y * (c - a);
    } else {
        // not enough points to interpolate
        h = vec4(NIL);
    }

    return scalarize(h);
}
`;var z0=`
float scalarize(in vec4 h) {
    return h.x;
}
`;var B0=`
float scalarize(in vec4 h) {
    float isMissing = step(NIL, h.x);
    return length((1.0 - isMissing) * h.xy) + isMissing * NIL;
}
`;function ju(){return G0}function zu(){return j0}function zs(){return z0}function Bs(){return B0}function $s(e,t){function r(a,s){return+t[e.closest(a,s)]}let n={},{width:o,height:i}=e.dimensions();return r.webgl=function(s){let c=s.context,l={internalFormat:c.R32F,format:c.RED,type:c.FLOAT,width:o,height:i,pixels:t,hash:n};return{shaderSource:[zs(),ju()],textures:{weather_data:l},uniforms:{u_Data:"weather_data"}}},r}function mo(e,t){function r(a,s){let c=e.closest(a,s)*2;if(c===c){let l=t[c],u=t[c+1];if(l===l&&u===u)return[l,u]}return[NaN,NaN]}let n={},{width:o,height:i}=e.dimensions();return r.webgl=function(s){let c=s.context,l={internalFormat:c.RG32F,format:c.RG,type:c.FLOAT,width:o,height:i,pixels:t,hash:n};return{shaderSource:[Bs(),ju()],textures:{weather_data:l},uniforms:{u_Data:"weather_data"}}},r}function qs(e,t){function r(a,s){let c=e.closest4(a,s),l=c[0];if(l===l){let u=c[1],f=c[2],p=c[3],m=c[4],d=c[5],h=1-m,g=1-d,y=t[l],w=t[u],b=t[f],x=t[p];if(y===y)if(w===w&&b===b&&x===x){let _=h*g,A=m*g,k=h*d,P=m*d;return y*_+w*A+b*k+x*P}else{if(x===x&&w===w&&m>=d)return w+h*(y-w)+d*(x-w);if(b===b&&x===x&&m<d)return b+m*(x-b)+g*(y-b);if(b===b&&w===w&&m<=g)return y+m*(w-y)+d*(b-y)}else if(x===x&&b===b&&w===w&&m>g)return x+h*(b-x)+g*(w-x)}return NaN}let n={},{width:o,height:i}=e.dimensions();return r.webgl=function(s){let c=s.context,l={internalFormat:c.R32F,format:c.RED,type:c.FLOAT,width:o,height:i,pixels:t,hash:n};return{shaderSource:[zs(),zu()],textures:{weather_data:l},uniforms:{u_Data:"weather_data",u_TextureSize:[o,i]}}},r}function Jr(e,t){function r(s,c,l,u,f,p,m,d){let h=l+s*(m-l)+c*(f-l),g=u+s*(d-u)+c*(p-u);return[h,g]}function n(s,c){let l=e.closest4(s,c),u=l[0]*2;if(u===u){let f=l[1]*2,p=l[2]*2,m=l[3]*2,d=l[4],h=l[5],g=1-d,y=1-h,w=t[u],b=t[u+1],x=t[f],_=t[f+1],A=t[p],k=t[p+1],P=t[m],N=t[m+1];if(b===b)if(_===_&&k===k&&N===N){let M=g*y,D=d*y,O=g*h,L=d*h,v=w*M+x*D+A*O+P*L,S=b*M+_*D+k*O+N*L;return[v,S]}else{if(N===N&&_===_&&d>=h)return r(g,h,x,_,P,N,w,b);if(k===k&&N===N&&d<h)return r(d,y,A,k,w,b,P,N);if(k===k&&_===_&&d<=y)return r(d,h,w,b,A,k,x,_)}else if(N===N&&k===k&&_===_&&d>y)return r(g,y,P,N,x,_,A,k)}return[NaN,NaN]}let o={},{width:i,height:a}=e.dimensions();return n.webgl=function(c){let l=c.context,u={internalFormat:l.RG32F,format:l.RG,type:l.FLOAT,width:i,height:a,pixels:t,hash:o};return{shaderSource:[Bs(),zu()],textures:{weather_data:u},uniforms:{u_Data:"weather_data",u_TextureSize:[i,a]}}},n}function $0(e){if(!lo(e))throw new Error("data is not an epak");let{header:t}=e,{variables:r}=t;if(r===void 0)throw new Error("unexpected epak format");let n=r.Primary_wave_direction_surface,o=r.Primary_wave_mean_period_surface,i=r[n.dimensions[0]],a=r[n.dimensions[1]],s=r[n.dimensions[2]],c=jt(n,e),l=jt(o,e),u=new Float32Array(c.length*2);for(let m=0;m<c.length;m++){let d=m*2,h=c[m]*De,g=l[m];h===h&&g===g?(u[d]=-g*Math.sin(h),u[d+1]=-g*Math.cos(h)):u[d]=u[d+1]=NaN}u.containsNaN=!0;let f=kt(s.sequence,a.sequence),p={type:"vec2",valueAt:m=>{let d=m*2,h=u[d],g=u[d+1];return[h,g]},scalarize:Ut,isDefined:m=>!isNaN(u[m*2]),nearest:mo(f,u),bilinear:Jr(f,u)};return{validTime:()=>_e(Array.isArray(i.data)?i.data[0]:NaN),grid:()=>f,field:()=>p}}function Ws(e,t,r){let n=e[0].header,o=tt(_e(n.refTime),{hour:n.forecastTime}),i={time:{"@variable":"time",dimensions:["time"],data:[js(o)]},lat:{"@variable":"lat",dimensions:["lat"],sequence:{start:n.la1,delta:-n.dy,size:n.ny}},lon:{"@variable":"lon",dimensions:["lon"],sequence:{start:n.lo1,delta:n.dx,size:n.nx}}},a=[];return t.forEach((s,c)=>{i[s]={"@variable":s,dimensions:r!=null?r:["time","lat","lon"],data:{block:c}},a[c]={type:"ppak",data:new Float32Array(e[c].data),cols:n.nx,rows:n.ny,grids:1,scaleFactor:1,missingValue:NaN}}),{type:"epak",header:{variables:i},blocks:a}}function q0(e,t){let r=e.variables,n=[];return Object.keys(r).forEach(o=>{if(t.test(o)){let i=r[o];n.push({type:"ppak",data:new Float32Array(i.data)}),i.data={block:n.length-1}}}),{type:"epak",header:e,blocks:n}}function te(e,t,r={}){if(ws(e))throw new Error("data is not an object");if(Array.isArray(e)&&(e=Ws(e,[r.legacyName].filter(vs))),e.blocks||(e=q0(e,t)),!lo(e))throw new Error("data is not an epak");let n=e,{header:o}=n,{variables:i}=o;if(i===void 0)throw new Error("unexpected epak format");let a=Object.keys(i).find(h=>t.test(h));if(a===void 0)throw new Error("cannot find expected variable");let s=i[a],c=s.dimensions,l=i[c[0]],u=i[Hi(c,2)[0]],f=i[Hi(c,2)[1]],p=jt(s,n);p.containsNaN=r.hasMissing,typeof r.transform=="function"&&r.transform(p);let m=kt(f.sequence,u.sequence),d={type:"scalar",valueAt:h=>p[h],scalarize:h=>h,isDefined:h=>!isNaN(p[h]),nearest:$s(m,p),bilinear:qs(m,p)};return{validTime:()=>_e(Array.isArray(l.data)?l.data[0]:NaN),grid:()=>m,field:()=>d}}var Y0={kind:"skew",skew:0,now:()=>Date.now()},iV=Promise.resolve(Y0);function Ys(){return Y0.now()}var kw={happy_valentines_day:"2024-02-14T00:00:00Z"};function Xs(){return _e(Ys())}var X0=!1;function ee(e){xs()&&(e=kw.happy_valentines_day,X0||(X0=!0,ut("report",{category:"app",message:"bad"})));let t=e==="now";return{instant:t?Xs():_e(e),isNow:t}}function K0(e,t){return V0(tt(e,t),Xs())<0}function Bu(e){return e.replace(/\^([^\s./$)]*)/g,"<sup>$1</sup>")}function J0(e){return e.replace(/\^([^\s./$)]*)/g,(t,r)=>{let n=Number(r);return n===n?`${n<0?"⁻":""}${"⁰¹²³⁴⁵⁶⁷⁸⁹".charAt(Math.abs(n))}`:`^${r}`})}var Ks=()=>({valueText:"",valueHTML:"",valueAndUnitsText:"",valueAndUnitsHTML:""});function Z0(e,t){if(e===e){let r=e===e?e.toFixed(t.precision):"";return{valueText:r,valueHTML:r,valueAndUnitsText:`${r} ${J0(t.symbol)}`,valueAndUnitsHTML:`${r} ${t.symbolHTML}`}}return Ks()}function Rw(e,t){let[r,n]=e;if(r===r&&n===n){e=t.convention==="into"?[-r,-n]:[r,n];let o=Gd(jd(e),5),i=t.formatScalar(t.scalarize(e)),a=`${o.toFixed(0)}° @ ${i.valueText}`,s=`${o.toFixed(0)}° @ ${i.valueHTML}`;return{valueText:a,valueHTML:s,valueAndUnitsText:`${a} ${J0(t.symbol)}`,valueAndUnitsHTML:`${s} ${t.symbolHTML}`}}return Ks()}function Cw(e){let t=e!==void 0?this.categories[this.convert(e)]:"";return{valueText:t,valueHTML:t,valueAndUnitsText:t,valueAndUnitsHTML:t}}function Nw(e,t){function r(o){return Z0(o,this)}let n={type:"scalar",symbol:e,symbolHTML:Bu(e),convert:o=>o,convertScalar:function(o){return this.convert(o)},scalarize:o=>o,precision:0,format:r,formatScalar:function(o){return this.format(o)}};return Object.assign(n,t)}function Lw(e,t){function r(i){return Z0(i,this)}function n(i){return Rw(i,this)}let o={type:"vec2",symbol:e,symbolHTML:Bu(e),convert:i=>i,convertScalar:i=>i,scalarize:Ut,precision:0,convention:"into",format:n,formatScalar:r};return Object.assign(o,t)}function Ow(e,t){return Object.assign({type:"category",name:e,categories:[],convert:n=>Ci(n),convertScalar:function(n){return this.convert(n)},scalarize:n=>n,format:Cw,formatScalar:function(n){return this.format(n)}},t)}function Iw(e,t){let r={type:"object",symbol:e,symbolHTML:Bu(e),precision:0,convert:n=>n,convertScalar:n=>n,scalarize:n=>+n,format:()=>{throw new Error("format must be overridden")},formatScalar:()=>{throw new Error("formatScalar must be overridden")}};return Object.assign(r,t)}function Fw(e,t){var n;(n=t.type)!=null||(t.type="scalar");let r=t;switch(t.type){case"scalar":return Nw(e,r);case"vec2":return Lw(e,r);case"category":return Ow(e,r);case"object":return Iw(e,r);default:throw new Error(`unknown units type: ${t.type}`)}}function W(e){let t=[];for(let[r,n]of Object.entries(e))t.push(Fw(r,n!=null?n:{}));return t}function Q0(e){return{resolve(...t){return e+t.join("/")}}}var Vw=Q0("https://pangaea.nullschool.net/data/"),$u=Q0("https:https://gaia.nullschool.net/data/");function Le(e,t={day:90}){return K0(e,t)?Vw:$u}var eg=`
float fmap(in float v) {
    return log(v);
}
`;var tg=`
float fmap(in float v) {
    return v;
}
`;var rg=`
uniform vec2 u_Range;  // [min, size]
uniform lowp sampler2D u_Palette;
uniform lowp float u_Alpha;

lowp vec4 colorize(in float v) {
    vec2 st = vec2((fmap(v) - u_Range.x) / u_Range.y, 0.5);
    lowp vec4 color = texture2D(u_Palette, st);
    lowp float alpha = (1.0 - step(NIL, v)) * u_Alpha;
    return vec4(color.rgb * alpha, alpha);  // premultiply alpha
}
`;function ng(e){if(Array.isArray(e)){let[r,n,o,i]=e;return Ze(r,n,o,i)}let t=typeof e=="string"?Ae(e):e!==null?Ae(e):null;if(t===null)throw new Error(`color format is not valid: ${e}`);return t}function og(e,t){let[r,n,o]=e,i=t[0]-r,a=t[1]-n,s=t[2]-o;return c=>[pe(Math.floor(r+c*i),0,255),pe(Math.floor(n+c*a),0,255),pe(Math.floor(o+c*s),0,255)]}function jw(e,t){let r=[],n=[],o=[];for(let l=0;l<e.length;l++){let u=Ct(e[l]);r[l]=u.l,n[l]=u.a,o[l]=u.b}let i=xr(r),a=xr(n),s=xr(o);return Object.assign(l=>Ct(i(l),a(l),s(l))+"",{mode:()=>"lab",domain:()=>t})}function zw(e,t,r){switch(e){case"rgb":return Ur(t,r);case"lab":return Xn(t,r);case"hcl":return gi(t,r);case"hsl":return hi(t,r);default:throw new Error(`unsupported color space: ${e}`)}}function qu(e,t){let r=zw(e.mode,ng(e.color),ng(t.color));return Object.assign(r,{mode:()=>e.mode,domain:()=>[e.p,t.p]})}function Zs(e,t,r){return Object.assign(o=>e(o),{mode:()=>t,domain:()=>r})}function ig(e){let t=e*br*5/6;t*=.75;let r=Math.sin(t),n=Math.cos(t),o=Math.floor(Math.max(0,-n)*255),i=Math.floor(Math.max(r,0)*255),a=Math.floor(Math.max(n,0,-r)*255);return[o,i,a]}var Js=.45,Bw=og(ig(1),[255,255,255]);function ag(e){return e<=Js?ig(e/Js):Bw((e-Js)/(1-Js))}function $w(e){let t=[],r=[],n=[];for(let o=0;o<e.length-1;o++)t.push(e[o+1][0]),r.push(og(e[o][1],e[o+1][1])),n.push([e[o][0],e[o+1][0]]);return o=>{let i;for(i=0;i<t.length-1&&!(o<=t[i]);i++);let a=Ke(o,...n[i],0,1);return r[i](a)}}function We(e){let t=[];for(let r=0;r<e.length-1;r++)t.push(qu(e[r],e[r+1]));return t}function ye(e,t,r){let n=e[t],o=e[t+1],i=Ke(r[0],...n.domain(),0,1),a=Ke(r[1],...o.domain(),0,1),s=qu({color:Ae(n(0)),mode:n.mode(),p:n.domain()[0]},{color:Ae(n(i)),mode:n.mode(),p:r[0]}),c=jw([n(i),n(1),o(a)],r),l=qu({color:Ae(o(a)),mode:o.mode(),p:r[1]},{color:Ae(o(1)),mode:o.mode(),p:o.domain()[1]});return[...e.slice(0,t),s,c,l,...e.slice(t+2)]}function Qs(e,t,r,n){let[o,i]=t,[a,s]=r,c=Math.floor(e.length/4),l=(i-o)/(c-1),u=Ci((a-o)/l);for(let f=Math.max(u,0);f<c;f++){let p=a+(f-u)*l;if(p>s)break;let m=n(p),d=m[3],h=f*4;e[h]=m[0],e[h+1]=m[1],e[h+2]=m[2],e[h+3]=d!==void 0?pe(Ke(d,0,1,0,255),0,255):255}}function Er(e,t,r){let n=new Uint8Array(r*4);return t.forEach(o=>{let i=o.domain();Qs(n,e,i,a=>{let s=Ae(o(Ke(a,i[0],i[1],0,1))).rgb();return[s.r,s.g,s.b,s.opacity]})}),n}function gt(e,t,r){let n=Er(e,t,r);return Ye(e,n)}function ae(e,t,r){let n=$w(t),o=new Uint8Array(r*4);return Qs(o,e,e,n),Ye(e,o)}function Ye(e,t,r="linear"){let n=r==="log"?Math.log:d=>d,o=r==="log"?Math.exp:d=>d,i=n(e[0]),a=n(e[1]),s=t.length/4-1,c=s/(a-i),l={},u=(a-i)/(2*s),f=i-u,p=a+u,m=[f,p-f];return{get type(){return r},get colors(){return t},get bounds(){return e},indexOf(d){let h=Math.round((n(d)-i)*c);return pe(h,0,s)},valueFor(d){return o(d/c+i)},valueInRange(d){let h=Math.round(Ke(d,0,1,0,s));return this.valueFor(pe(h,0,s))},rgba(d){let h=this.indexOf(d)*4;return[t[h],t[h+1],t[h+2],t[h+3]]},webgl(d){let h=d.context;return{shaderSource:[n===Math.log?eg:tg,rg],textures:{color_scale:{internalFormat:h.RGBA8,format:h.RGBA,type:h.UNSIGNED_BYTE,width:t.length/4,height:1,pixels:t,hash:l}},uniforms:{u_Range:m,u_Palette:"color_scale",u_Alpha:1}}}}}function sg(e=1e3){return ae([0,15],[[0,[8,29,88]],[1,[37,52,148]],[2,[34,94,168]],[3,[29,145,192]],[4,[65,182,196]],[5,[127,205,187]],[6,[199,233,180]],[7,[237,248,177]],[8,[254,204,92]],[10,[253,141,60]],[12,[240,59,32]],[14,[189,0,38]]],e)}function cg(e=1e3){return ae([0,25],[[0,[0,0,0]],[25,[21,255,255]]],e)}var Wu=[void 0,void 0];function ho(e){return e.z_level==="surface"?R`Surface`:C0(e.z_level)}function Re(e,t,r){let n=U0(e,t);return Dn(tt(n,r!=null?r:{}))}function Ar(e="method not overridden"){return()=>{throw new Error(e)}}var qw=Ye([NaN,NaN],new Uint8Array(0));function Yu(){return{name:"",sourceHTML:"",descriptionHTML:{name:"",qualifier:""},timeline:[],validTime:Ar(),dateFormat:()=>"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}",alignment:Ar(),prev2:Ar(),prev1:Ar(),next1:Ar(),next2:Ar(),navLabels:{prev2:"",prev1:"",next1:"",next2:""},unitDescriptors:[],paths:[],supported_z_levels:void 0,scale:qw,valueInRange(e){return this.scale.valueInRange(e)},alpha:{single:160,animated:112},particles:{velocityScale:NaN,maxIntensity:NaN}}}function fe(...e){let t={type:"scalar",...Yu(),builder:Ar()};return Object.assign(t,...e)}function go(...e){let t={type:"vec2",...Yu(),builder:Ar()};return Object.assign(t,...e)}function lg(...e){let t={type:"object",...Yu(),builder:Ar()};return Object.assign(t,...e)}function Xu(e,t,r,n,o,i){let[a,s]=n.map(u=>u!==void 0?Re(u,t,r):void 0),c=Xi(Re(ee(e).instant,t,r),a,s),l=u=>function(){let f=this.validTime();return f!==void 0?Xi(Re(tt(f,u),t),a,s):void 0};return{alignment:()=>ge(t),validTime:()=>ge(c),prev2:l(o.prev2),prev1:l(o.prev1),next1:l(o.next1),next2:l(o.next2),navLabels:i}}function zt(e,t,r=Wu){return Xu(e,{hour:1},t,r,{prev2:{hour:-8},prev1:{hour:-1},next1:{hour:1},next2:{hour:8}},{prev2:`-8 ${R`hours`}`,prev1:`-1 ${R`hour`}`,next1:`+1 ${R`hour`}`,next2:`+8 ${R`hours`}`})}function nr(e,t,r=Wu){return Xu(e,{hour:3},t,r,{prev2:{day:-1},prev1:{hour:-3},next1:{hour:3},next2:{day:1}},{prev2:`-1 ${R`day`}`,prev1:`-3 ${R`hours`}`,next1:`+3 ${R`hours`}`,next2:`+1 ${R`day`}`})}function ec(e,t,r=Wu){return Xu(e,{day:1},t,r,{prev2:{day:-5},prev1:{day:-1},next1:{day:1},next2:{day:5}},{prev2:`-5 ${R`days`}`,prev1:`-1 ${R`day`}`,next1:`+1 ${R`day`}`,next2:`+5 ${R`days`}`})}var ug=[{type:"regular",start:"2014-12-29T06:00Z",frequency:{hours:3}}],yo={};function fg(e,t){let{instant:r,isNow:n}=ee(e.time_cursor),o=Re(r,{hour:3}),i=n?"current":B(o,"{YYYY}/{MM}/{DD}"),s=`${n?"current":B(o,"{hh}{mm}")}-${t}-wave-30m.epak`;return Le(o).resolve("ww3",i,s)}function pg(e){var t;return go(nr(e.time_cursor),{name:"primary_waves",descriptionHTML:{name:R`Peak Wave Period`,qualifier:""},sourceHTML:Hu,timeline:ug,paths:[fg(e,"primary")],builder:$0,unitDescriptors:W({s:{type:"vec2",precision:1}}),scale:(t=yo.primaryWaves)!=null?t:yo.primaryWaves=cg(),particles:{velocityScale:1/612,maxIntensity:12,particleStyle:"waves"}})}function mg(e){var r;let t=/Significant_height/;return fe(nr(e.time_cursor),{name:"significant_wave_height",descriptionHTML:{name:R`Significant Wave Height`,qualifier:""},sourceHTML:Hu,timeline:ug,paths:[fg(e,"sig_height")],builder:n=>te(n,t,{hasMissing:!0}),unitDescriptors:W({m:{convert:n=>n,precision:2},ft:{convert:n=>n*100/2.54/12,precision:1}}),scale:(r=yo.htsgw)!=null?r:yo.htsgw=sg()})}function xo(e=1e3){return ae([-11,11],[[-11,[255,255,255]],[-3,[7,252,254]],[-1.5,[66,42,253]],[-.75,[34,55,134]],[0,[0,0,6]],[.75,[134,55,34]],[1.5,[253,14,16]],[3,[254,252,0]],[11,[255,255,255]]],e)}function dg(e=1e3){return ae([270,313.15],[[270,[255,255,255]],[271.4,[255,255,255]],[271.5,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[210,22,210]],[313.15,[255,255,255]]],e)}var Zi="sea_surface_temp",Qi="sea_surface_temp_anomaly",vo={};function Ww(e,t){if(t===Zi)return e.hd_enabled?{tag:Zi,res:"0.1"}:{tag:Zi,res:"0.5"};if(t===Qi)return e.hd_enabled?{tag:Qi,res:"0.25"}:{tag:Qi,res:"0.5"};throw new Error("unexpected SST product")}function hg(e,t){let r=Ww(e,t),{instant:n,isNow:o}=ee(e.time_cursor),i=o?"current":B(n,"{YYYY}/{MM}"),s=`${o?"current":B(n,"{YYYY}{MM}{DD}")}-${r.tag}-ostia-${r.res}.epak`;return Le(n).resolve("ostia",i,s)}function gg(e){var t;return fe(Zr(e),{name:Zi,descriptionHTML:{name:R`Sea Surface Temperature`,qualifier:""},sourceHTML:Vu,paths:[hg(e,Zi)],builder:r=>te(r,/analysed_sst/,{hasMissing:!0}),unitDescriptors:W({"°C":{convert:r=>r-273.15,precision:1},"°F":{convert:r=>r*9/5-459.67,precision:1},K:{convert:r=>r,precision:1}}),scale:(t=vo.sst)!=null?t:vo.sst=dg(),alpha:{single:200,animated:132}})}function yg(e){var t;return fe(Zr(e),{name:Qi,descriptionHTML:{name:R`Sea Surface Temperature Anomaly`,qualifier:""},sourceHTML:Vu,paths:[hg(e,Qi)],builder:r=>te(r,/sst_anomaly/,{hasMissing:!0}),unitDescriptors:W({"°C":{convert:r=>r,precision:1},"°F":{convert:r=>r*9/5,precision:1},K:{convert:r=>r,precision:1}}),scale:(t=vo.ssta)!=null?t:vo.ssta=xo()})}function xg(e=1e3){return ae([270,304.65],[[270,[255,255,255]],[271.25,[255,255,255]],[271.3,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[238,0,242]]],e)}var bo={};function vg(e,t){let{instant:r,isNow:n}=ee(e.time_cursor),o=n?"current":B(r,"{YYYY}/{MM}"),a=`${n?"current":B(r,"{YYYY}{MM}{DD}")}-${t}-rtg-0.5.epak`;return Le(r).resolve("rtgsst",o,a)}function bg(e){var t;return fe(Zr(e),{name:"sea_surface_temp",descriptionHTML:{name:R`Sea Surface Temperature`,qualifier:""},sourceHTML:Uu,paths:[vg(e,"sea_surface_temp")],builder:r=>te(r,/Temperature_surface_sparse/,{hasMissing:!0}),unitDescriptors:W({"°C":{convert:r=>r-273.15,precision:1},"°F":{convert:r=>r*9/5-459.67,precision:1},K:{convert:r=>r,precision:1}}),scale:(t=bo.sst)!=null?t:bo.sst=xg(),alpha:{single:200,animated:132}})}function wg(e){var t;return fe(Zr(e),{name:"sea_surface_temp_anomaly",descriptionHTML:{name:R`Sea Surface Temperature Anomaly`,qualifier:""},sourceHTML:Uu,paths:[vg(e,"sea_surface_temp_anomaly")],builder:r=>te(r,/Temperature_surface_anomaly_sparse/,{hasMissing:!0}),unitDescriptors:W({"°C":{convert:r=>r,precision:1},"°F":{convert:r=>r*9/5,precision:1},K:{convert:r=>r,precision:1}}),scale:(t=bo.ssta)!=null?t:bo.ssta=xo()})}var ea="sea_surface_temp_anomaly",Ku={};function Yw(e,t){if(t===ea)return e.hd_enabled?{tag:ea,res:"0.25"}:{tag:ea,res:"0.5"};throw new Error("unexpected SST product")}function Xw(e,t){let r=Yw(e,t),{instant:n,isNow:o}=ee(e.time_cursor),i=o?"current":B(n,"{YYYY}/{MM}"),s=`${o?"current":B(n,"{YYYY}{MM}{DD}")}-${r.tag}-oisst-${r.res}.epak`;return Le(n).resolve("oisst",i,s)}function Sg(e){var t;return fe(Zr(e),{name:ea,descriptionHTML:{name:R`Sea Surface Temperature Anomaly`,qualifier:""},sourceHTML:D0,paths:[Xw(e,ea)],builder:r=>te(r,/anom/,{hasMissing:!0}),unitDescriptors:W({"°C":{convert:r=>r,precision:1},"°F":{convert:r=>r*9/5,precision:1},K:{convert:r=>r,precision:1}}),scale:(t=Ku.ssta)!=null?t:Ku.ssta=xo()})}var Tg=re({year:2019,month:12,day:15}),Kw=re({year:2022,month:12,day:15}),Jw=[{type:"regular",start:"2013-11-01T00:00Z",frequency:{hours:24}}];function Zr(e){let{instant:t,isNow:r}=ee(e.time_cursor),n=tt(t,{day:r?-1:0}),o={day:1},i=Re(n,o),a=s=>function(){let c=this.validTime();return c!==void 0?Re(tt(c,s),o):void 0};return{validTime:()=>ge(i),timeline:Jw,prev2:a({day:-5}),prev1:a({day:-1}),next1:a({day:1}),next2:a({day:5}),navLabels:{prev2:`-5 ${R`days`}`,prev1:`-1 ${R`day`}`,next1:`+1 ${R`day`}`,next2:`+5 ${R`days`}`}}}function _g(e){return re(ee(e.time_cursor).instant)>=Tg?gg(e):bg(e)}function Eg(e){let t=re(ee(e.time_cursor).instant);return t>=Kw?Sg(e):t>=Tg?yg(e):wg(e)}function Ag(e){var t,r,n;if(Ls(e))return{start:(t=Tr(e.start))!=null?t:NaN,delta:(r=Tr(e.delta))!=null?r:NaN,size:pe((n=Tr(e.size))!=null?n:0,0,8192)};throw new Error("axis not valid")}function Pg(e){var m,d;let{Conventions:t,has_missing:r,date:n,encoding:o}=e;if(t!=="earth.nullschool.net/flat-1.0")throw new Error(`Unsupported data conventions: ${Jl(t)}`);let i=Ag(e.lon),a=Ag(e.lat),s=Array.isArray(e.data)?e.data:[],c=[];if(o===void 0)if(s.every(oo))c=s;else throw new Error("bad data");else if(Ls(o)&&(o==null?void 0:o.type)==="packed_delta_rle"){let h=(m=Tr(o.scale_factor))!=null?m:1,g=(d=Tr(o.add_offset))!=null?d:0;c=s.map(y=>{if(a0(y))return u0(y,h,g,i.size);throw new Error("bad data")})}else throw new Error("unsupported encoding");let l=new Float32Array(i.size*a.size),u=0;for(let h of c)l.set(h,u),u+=h.length;l.containsNaN=oh(r);let f=kt(i,a),p={type:"scalar",valueAt:h=>l[h],scalarize:h=>h,isDefined:h=>!isNaN(l[h]),nearest:$s(f,l),bilinear:qs(f,l)};return{validTime:()=>{var h;return _e((h=Ss(n))!=null?h:NaN)},grid:()=>f,field:()=>p}}function Mg(e=1001){let t=[0,100],r=[{color:[0,0,0],mode:"lab",p:t[0]},{color:[4,8,34],mode:"lab",p:5},{color:[78,255,103],mode:"lab",p:40},{color:[252,255,57],mode:"lab",p:60},{color:[219,75,255],mode:"lab",p:t[1]}],n=We(r);return n=ye(n,1,[35,45]),n=ye(n,3,[55,65]),gt(t,n,e)}var Ju;function Zw(e){let{isNow:t,instant:r}=ee(e.time_cursor),n=Re(r,{minute:5}),o=t?"current":B(n,"{YYYY}/{MM}/{DD}"),a=`${t?"current":B(n,"{YYYY}{MM}{DD}{hh}{mm}")}-ovation.json`;return Le(n).resolve("ovation",o,a)}function Dg(e){let t=Re(ee(e.time_cursor).instant,{minute:5}),r=n=>function(){return Re(tt(t,n),{minute:5})};return fe({name:"aurora",descriptionHTML:{name:R`Probability of Visible Aurora`,qualifier:""},sourceHTML:R0,paths:[Zw(e)],validTime:()=>ge(t),timeline:[{type:"regular",start:"2018-02-24T05:55Z",frequency:{minutes:5}}],prev2:r({hour:-1}),prev1:r({minute:-5}),next1:r({minute:5}),next2:r({hour:1}),navLabels:{prev2:`-1 ${R`hour`}`,prev1:`-5 ${R`minutes`}`,next1:`+5 ${R`minutes`}`,next2:`+1 ${R`hour`}`},builder(n){var o;return(o=n.has_missing)!=null||(n.has_missing=!1),Pg(n)},unitDescriptors:W({"%":{symbolHTML:R`% Visibility Chance`,convert:n=>n,precision:0}}),alpha:{single:160,animated:140},scale:Ju!=null?Ju:Ju=Mg()})}function kg(e=1e4){let t=[0,.45],r=[{color:[0,0,15],mode:"hsl",p:t[0]},{color:[32,32,32],mode:"hsl",p:.005},{color:[62,167,45],mode:"hsl",p:.5/40},{color:[255,238,0],mode:"hsl",p:3.5/40},{color:[241,139,0],mode:"hsl",p:6.25/40},{color:[229,50,16],mode:"hsl",p:8.5/40},{color:[181,103,164],mode:"hsl",p:11/40},{color:[231,225,255],mode:"hsl",p:t[1]}],n=We(r);return n=ye(n,1,[.25/40,1/40]),n=ye(n,3,[2.5/40,4.5/40]),gt(t,n,e)}var Zu={};function Qw(e,t){let{instant:r,isNow:n}=ee(e.time_cursor),o=Re(r,t),i=n?"current":B(o,"{YYYY}/{MM}/{DD}"),s=`${n?"current":B(o,"{hh}{mm}")}-cpcuvi.epak`;return Le(o).resolve("cpcuvi",i,s)}var Rg=R`UV Index`,eS=[R`low`,R`low`,R`low`,R`moderate`,R`moderate`,R`moderate`,R`high`,R`high`,R`very high`,R`very high`,R`very high`,R`extreme`];function tS(e){return Math.round(e*40)}function rS(e){let t=eS[pe(e,0,11)],r=`${e} (${t})`,n=`${r} ${Rg}`;return{valueText:r,valueHTML:r,valueAndUnitsText:n,valueAndUnitsHTML:n}}function Cg(e){var n;let t=fe(zt(e.time_cursor)),r={sourceHTML:E0,name:"uv_index",descriptionHTML:{name:R`Ultraviolet Index and Erythemal Dose Rate`,qualifier:` @ ${R`Surface`}`},timeline:[{type:"regular",start:"2021-05-03T13:00Z",frequency:{hours:1}}],paths:[Qw(e,t.alignment())],builder:o=>te(o,/Ultra_Violet_Index_surface/,{hasMissing:!1}),unitDescriptors:W({"UV Index":{convert:tS,precision:0,symbolHTML:Rg,format:rS},"mW/m^2":{convert:o=>o*1e3,precision:0}}),alpha:{single:210,animated:160},scale:(n=Zu.uv)!=null?n:Zu.uv=kg()};return Object.assign(t,r)}function Ng(e=1e3){let t=[1e-11,2e-7],r=[Math.log(t[0]),Math.log(t[1])],n=Zs(i=>yi(1-i),"GyRd",r),o=Er(r,[n],e);return Ye(t,o,"log")}function tc(e=1e3){let t=[1e-9,1e-6],r=[Math.log(t[0]),Math.log(t[1])],n=[{color:[8,29,88],mode:"hcl",p:r[0]},{color:[37,52,148],mode:"hcl",p:Math.log(4e-9)},{color:[34,94,168],mode:"hcl",p:Math.log(6e-9)},{color:[29,145,192],mode:"hcl",p:Math.log(8e-9)},{color:[65,182,196],mode:"hcl",p:Math.log(1e-8)},{color:[127,205,187],mode:"hcl",p:Math.log(16e-9)},{color:[199,233,180],mode:"hcl",p:Math.log(24e-9)},{color:[237,248,177],mode:"hcl",p:Math.log(28e-9)},{color:[255,255,210],mode:"hcl",p:Math.log(32e-9)},{color:[255,237,160],mode:"hcl",p:Math.log(42e-9)},{color:[254,217,118],mode:"hcl",p:Math.log(47e-9)},{color:[254,178,76],mode:"hcl",p:Math.log(57e-9)},{color:[253,141,60],mode:"hcl",p:Math.log(67e-9)},{color:[252,78,42],mode:"hcl",p:Math.log(11e-8)},{color:[227,26,28],mode:"hcl",p:Math.log(25e-8)},{color:[189,0,38],mode:"hcl",p:Math.log(5e-7)},{color:[128,0,38],mode:"hcl",p:r[1]}],o=We(n);o=ye(o,7,[Math.log(3e-8),Math.log(35e-9)]);let i=Er(r,o,e);return Ye(t,i,"log")}function Lg(e=3003){let t=[.01,3.5],r=[{color:[23,79,124],mode:"lab",p:t[0]},{color:[98,155,204],mode:"lab",p:.15},{color:[255,255,255],mode:"lab",p:.8},{color:[239,169,126],mode:"lab",p:1.25},{color:[138,106,1],mode:"lab",p:2.25},{color:[61,0,45],mode:"lab",p:t[1]}],n=We(r);return n=ye(n,1,[.7,.9]),gt(t,n,e)}var Qu=[{type:"regular",start:"2017-06-02T01:00Z",frequency:{hours:1}}],nS=[{type:"regular",start:"2020-11-01T00:00Z",frequency:{hours:3}}],oS=[{type:"regular",start:"2021-10-21T12:00Z",frequency:{hours:1}}],ft={};function ta(e,t,r){let{instant:n,isNow:o}=ee(e.time_cursor),i=Re(n,r),a=o?"current":B(i,"{YYYY}/{MM}/{DD}"),c=`${o?"current":B(i,"{hh}{mm}")}-${t}-cams.epak`;return Le(i).resolve("cams",a,c)}function ra(e){return fe({sourceHTML:_0,timeline:e})}function Og(e){var n;let t=Object.assign(ra(Qu),zt(e.time_cursor)),r={name:"pm1",descriptionHTML:{name:R`Particulate Matter < 1 µm`,qualifier:` @ ${R`Surface`}`},paths:[ta(e,"pm1",t.alignment())],builder:o=>te(o,/pm1/,{hasMissing:!1}),unitDescriptors:W({"µg/m^3":{convert:o=>o*1e9,precision:0}}),alpha:{single:160,animated:140},scale:(n=ft.pmx)!=null?n:ft.pmx=tc()};return Object.assign(t,r)}function Ig(e){var n;let t=Object.assign(ra(Qu),zt(e.time_cursor)),r={name:"pm2.5",descriptionHTML:{name:R`Particulate Matter < 2.5 µm`,qualifier:` @ ${R`Surface`}`},paths:[ta(e,"pm2p5",t.alignment())],builder:o=>te(o,/pm2p5/,{hasMissing:!1}),unitDescriptors:W({"µg/m^3":{convert:o=>o*1e9,precision:0}}),alpha:{single:160,animated:140},scale:(n=ft.pmx)!=null?n:ft.pmx=tc()};return Object.assign(t,r)}function Fg(e){var n;let t=Object.assign(ra(Qu),zt(e.time_cursor)),r={name:"pm10",descriptionHTML:{name:R`Particulate Matter < 10 µm`,qualifier:` @ ${R`Surface`}`},paths:[ta(e,"pm10",t.alignment())],builder:o=>te(o,/pm10/,{hasMissing:!1}),unitDescriptors:W({"µg/m^3":{convert:o=>o*1e9,precision:0}}),alpha:{single:160,animated:140},scale:(n=ft.pmx)!=null?n:ft.pmx=tc()};return Object.assign(t,r)}var iS=1.225;function Vg(e){var n;let t=Object.assign(ra(nS),nr(e.time_cursor)),r={name:"no2",descriptionHTML:{name:R`Nitrogen Dioxide`,qualifier:` @ ${R`Surface`}`},paths:[ta(e,"no2",t.alignment())],builder:o=>te(o,/no2/,{hasMissing:!1}),unitDescriptors:W({ppbw:{convert:o=>o*1e9,precision:2},ppmw:{convert:o=>o*1e6,precision:2},"µg/m^3":{convert:o=>o*iS*1e9,precision:0}}),alpha:{single:160,animated:120},scale:(n=ft.no2)!=null?n:ft.no2=Ng()};return Object.assign(t,r)}function Ug(e){var n;let t=Object.assign(ra(oS),zt(e.time_cursor)),r={name:"organic_matter_aot",descriptionHTML:{name:R`Organic Matter Aerosol Optical Thickness (550 nm)`,qualifier:""},paths:[ta(e,"omaod",t.alignment())],builder:o=>te(o,/omaod550/,{hasMissing:!1}),unitDescriptors:W({τ:{convert:o=>o,precision:3}}),alpha:{single:160,animated:140},scale:(n=ft.omaod550)!=null?n:ft.omaod550=Lg()};return Object.assign(t,r)}function ef(e,t=1e3){let r=[360+e,470+e],n=[{color:[0,0,0],mode:"hcl",p:r[0]},{color:[100,0,0],mode:"hcl",p:400+e},{color:[164,36,0],mode:"hcl",p:405+e},{color:[255,220,140],mode:"hcl",p:420+e},{color:[255,255,255],mode:"hcl",p:450+e},{color:[0,210,255],mode:"hcl",p:r[1]}],o=n[3].p,i=n[4].p,a=n[1].p,s=We(n);return s=ye(s,0,[a-2,a+2]),s=ye(s,3,[o-2,o+2]),s=ye(s,5,[i-2,i+2]),gt(r,s,t)}function Hg(e=1e3){let t=[380,510],r=[{color:[0,0,0],mode:"hcl",p:t[0]},{color:[100,0,0],mode:"hcl",p:412},{color:[164,36,0],mode:"hcl",p:418},{color:[255,220,140],mode:"hcl",p:438},{color:[0,220,180],mode:"hcl",p:485},{color:[0,255,255],mode:"hcl",p:t[1]}],n=r[3].p,o=r[4].p,i=r[1].p,a=We(r);return a=ye(a,0,[i-3,i+2]),a=ye(a,3,[n-3,n+3]),a=ye(a,5,[o-3,o+3]),gt(t,a,e)}function Gg(e=2e3){let t=[40,2500],r=[{color:[0,38,40],mode:"lab",p:t[0]},{color:[255,255,224],mode:"hcl",p:400},{color:[0,0,154],mode:"lab",p:1800},{color:[0,0,0],mode:"lab",p:t[1]}],n=We(r);return n=ye(n,0,[340,460]),n=ye(n,2,[1500,2100]),gt(t,n,e)}function jg(e=400){let t=[1e-13,888e-9],r=[Math.log(t[0]),Math.log(t[1])],n=[{color:[134,134,107],mode:"hcl",p:r[0]},{color:[144,144,117],mode:"hcl",p:Math.log(1e-12)},{color:[255,255,224],mode:"hcl",p:Math.log(7e-11)},{color:[0,0,128],mode:"lab",p:Math.log(19e-8)},{color:[23,20,18],mode:"lab",p:r[1]}],o=We(n);o=ye(o,1,[Math.log(5e-11),Math.log(9e-11)]),o=ye(o,3,[Math.log(8e-8),Math.log(4e-7)]);let i=Er(r,o,e);return Ye(t,i,"log")}function aS(e){let t=new Uint8Array(e.length/3*4);for(let r=0,n=0;r<e.length;r+=3,n+=4)t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2],t[n+3]=255;return t}var zg=aS([4,4,4,10,3,8,13,4,11,16,5,14,18,5,16,21,6,18,22,7,19,24,8,21,26,8,22,27,9,24,28,10,25,30,11,26,31,12,27,32,12,28,33,13,29,35,14,31,36,14,32,37,15,32,38,15,33,39,16,34,40,17,35,41,17,36,42,18,38,43,19,38,44,19,39,46,20,41,46,20,45,46,21,50,45,21,55,45,21,60,45,22,64,45,23,67,45,23,71,45,24,75,45,24,77,45,25,81,45,25,84,44,26,87,44,27,90,45,27,92,45,28,95,44,29,98,44,29,100,44,30,103,44,31,106,44,31,109,44,32,110,44,33,113,44,34,116,43,34,118,42,35,121,40,38,120,38,40,119,36,42,120,34,44,120,33,46,120,32,47,120,31,49,121,30,50,122,30,51,123,29,52,123,29,53,125,28,55,125,28,56,126,27,57,127,28,58,128,28,59,129,27,60,129,27,61,131,27,62,132,27,63,133,28,64,134,27,65,135,27,66,136,27,68,137,27,69,138,25,71,136,22,73,134,21,74,133,20,76,131,17,78,129,16,79,128,15,81,126,14,82,125,10,84,123,10,85,122,9,87,120,8,88,119,7,89,118,6,91,117,4,92,115,4,94,114,4,95,114,3,96,112,1,98,111,1,99,110,0,100,109,0,101,108,0,103,107,0,104,106,0,105,105,0,107,104,0,108,101,0,110,100,0,111,99,0,112,98,0,114,96,0,115,95,0,116,93,0,118,92,0,119,90,0,120,89,0,121,88,0,123,86,0,124,85,0,125,83,0,127,82,0,128,80,0,129,79,0,131,77,0,132,75,0,133,73,0,134,72,0,136,70,0,137,68,0,138,66,0,139,65,0,141,64,0,142,63,0,143,61,0,145,60,0,146,60,0,147,58,0,149,57,0,150,56,0,151,55,0,153,53,0,154,52,0,155,51,0,157,50,0,158,48,0,159,47,0,160,45,0,162,44,0,163,42,0,164,41,0,165,39,0,167,36,0,168,34,0,169,31,0,170,23,0,169,8,9,170,0,20,171,0,29,172,0,35,173,0,40,174,0,45,175,0,48,176,0,52,177,0,55,178,0,59,179,0,61,180,0,64,181,0,66,182,0,68,183,0,71,184,0,73,185,0,76,186,0,78,187,0,79,188,0,81,189,0,83,190,0,85,191,0,87,192,0,92,193,0,99,193,0,106,193,0,114,193,0,119,194,0,125,194,0,130,194,0,135,195,0,140,195,0,145,195,0,149,196,0,153,196,0,157,197,0,161,197,0,165,197,0,169,198,0,172,198,0,176,199,0,180,199,0,184,199,0,186,200,0,190,201,0,193,201,0,197,201,0,200,202,0,201,201,24,203,202,51,206,202,65,207,203,77,209,203,87,212,203,95,213,204,103,215,205,109,218,205,116,219,206,121,221,207,127,223,207,132,226,207,138,227,208,143,229,209,147,231,209,151,232,210,155,235,211,159,237,211,164,238,212,168,240,212,172,243,213,175,243,214,179,245,214,183,248,215,186,248,216,189,248,218,193,247,219,195,247,220,198,247,222,201,248,223,204,247,224,206,247,226,209,247,227,211,247,229,214,247,230,216,247,231,218,247,232,220,248,234,224,247,235,225,247,236,229,247,238,231,247,239,232,248,240,235,248,242,237,247,243,239,248,244,241,248,246,244,248,247,246,248,248,248,249,249,249,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255]);function Bg(){return Ye([1e-4,3],zg,"log")}function $g(e=500){let t=[.002,2.5],r=[Math.log(t[0]),Math.log(t[1])],n=Zs(vi,"cubehelix",r),o=Er(r,[n],e);return Ye(t,o,"log")}var qg=er()?"":"(<a href='about.html#aot'>AOT</a>)",Wg=re({year:2019,month:9,day:1}),rc=[{type:"regular",start:"2015-07-25T00:00Z",end:"2019-08-31T21:00Z",frequency:{hours:3}},{type:"regular",start:"2019-09-01T00:00Z",frequency:{hours:1}}],sS=[{type:"regular",start:"2015-07-24T22:30Z",frequency:{hours:3}}],Fe={};function na(e,t,r,n){let{instant:o,isNow:i}=ee(e.time_cursor);r===void 0&&(r=re(o)>Wg?{hour:1}:{hour:3});let a=Re(o,r,n),s=i?"current":B(a,"{YYYY}/{MM}/{DD}"),l=[i?"current":B(a,"{hh}{mm}"),t,"geos.epak"].join("-");return Le(a).resolve("geos",s,l)}function oa(e,t,r){let n=re(ee(e.time_cursor).instant)>Wg?zt:nr;return fe({sourceHTML:Fu,timeline:t,...n(e.time_cursor)},r)}function Yg(e){var t;return oa(e,rc,{name:"cosc",descriptionHTML:{name:R`Carbon Monoxide Surface Concentration`,qualifier:""},paths:[na(e,"cosc")],builder:r=>te(r,/COSC/,{hasMissing:!1}),unitDescriptors:W({ppbv:{convert:r=>r,precision:0},ppmv:{convert:r=>r/1e3,precision:2}}),alpha:{single:160,animated:140},scale:(t=Fe.cosc)!=null?t:Fe.cosc=Gg()})}function Xg(e){var t;return oa(e,rc,{name:"so2smass",descriptionHTML:{name:R`Sulfur Dioxide Surface Mass`,qualifier:""},paths:[na(e,"so2smass")],builder:r=>te(r,/SO2SMASS/,{hasMissing:!1}),unitDescriptors:W({"µg/m^3":{convert:r=>r*1e9,precision:2}}),alpha:{single:160,animated:140},scale:(t=Fe.so2smass)!=null?t:Fe.so2smass=jg()})}function Kg(e){var t;return oa(e,rc,{name:"duexttau",descriptionHTML:{name:`${R`Dust Extinction (Aerosol Optical Thickness, 550 nm)`} ${qg}`,qualifier:""},paths:[na(e,"duexttau")],builder:r=>te(r,/DUEXTTAU/,{hasMissing:!1}),unitDescriptors:W({τ:{convert:r=>r,precision:4}}),alpha:{single:160,animated:140},scale:(t=Fe.duexttau)!=null?t:Fe.duexttau=Bg()})}function Jg(e){var t;return oa(e,rc,{name:"suexttau",descriptionHTML:{name:`${R`Sulfate Extinction (Aerosol Optical Thickness, 550 nm)`} ${qg}`,qualifier:""},paths:[na(e,"suexttau")],builder:r=>te(r,/SUEXTTAU/,{hasMissing:!1}),unitDescriptors:W({τ:{convert:r=>r,precision:3}}),alpha:{single:240,animated:140},scale:(t=Fe.suexttau)!=null?t:Fe.suexttau=$g()})}function Zg(e){var f,p,m;let t={hour:3},r={minute:90},n=Re(ee(e.time_cursor).instant,t,r),o=re({year:2017,month:1,day:24,hour:4,minute:30}),i=re(n)<o,a=i?32:0,s=re({year:2018,month:7,day:11,hour:4,minute:30}),c=re(n)<s?"A":"B";function l(d){for(let h=0;h<d.length;h++)d[h]+=a}let u=c==="A"?i?(f=Fe.co2scAX)!=null?f:Fe.co2scAX=ef(-8):(p=Fe.co2scAY)!=null?p:Fe.co2scAY=ef(0):(m=Fe.co2scB)!=null?m:Fe.co2scB=Hg();return oa(e,sS,{name:"co2sc",descriptionHTML:{name:R`Carbon Dioxide Surface Concentration`,qualifier:""},sourceHTML:Fu,paths:[na(e,"co2sc",t,r)],...nr(e.time_cursor,r),builder:d=>te(d,/CO2SC/,{hasMissing:!1,transform:a!==0?l:h=>h}),unitDescriptors:W({ppmv:{convert:d=>d,precision:0}}),alpha:{single:200,animated:150},scale:u})}function nc(e){if(ws(e))throw new Error("data is not an object");if(Array.isArray(e)&&(e=Ws(e,["u","v"],["time","level","lat","lon"])),!lo(e))throw new Error("data is not an epak");let t=e,{header:r}=t,{variables:n}=r;if(n===void 0)throw new Error("unexpected epak format");let o=n.U||n.u||n["u-component_of_wind_isobaric"]||n["u-component_of_wind_height_above_ground"],i=n.V||n.v||n["v-component_of_wind_isobaric"]||n["v-component_of_wind_height_above_ground"],a=n[o.dimensions[0]],s=n[o.dimensions[2]],c=n[o.dimensions[3]],l=Ih(jt(o,t),jt(i,t));l.containsNaN=!1;let u=kt(c.sequence,s.sequence),f={type:"vec2",valueAt:p=>{let m=p*2,d=l[m],h=l[m+1];return[d,h]},scalarize:Ut,isDefined:p=>!isNaN(l[p*2]),nearest:mo(u,l),bilinear:Jr(u,l)};return{validTime:()=>_e(Array.isArray(a.data)?a.data[0]:NaN),grid:()=>u,field:()=>f}}function Qg(e,t){let n=nc(e).field(),o=n.valueAt,i=n.nearest,a=n.bilinear,s=te(t,/air_density/,{hasMissing:!1,legacyName:"air_density"}),c=s.field(),l=c.valueAt,u=c.isDefined,f=c.nearest,p=c.bilinear;function m(h,g){let y=Ut(h);return .5*g*y**3}let d={type:"scalar",valueAt:h=>m(o(h),l(h)),scalarize:h=>h,isDefined:u,nearest:(h,g)=>m(i(h,g),f(h,g)),bilinear:(h,g)=>m(a(h,g),p(h,g))};return{validTime:s.validTime,grid:s.grid,field:()=>d}}function ey(e=10){return ae([0,1.5],[[0,[0,0,0]],[1.5,[255,255,255]]],e)}function ty(e=1e3){return ae([0,5e3],[[0,[5,48,97]],[500,[33,102,172]],[1e3,[67,147,195]],[1500,[146,197,222]],[2e3,[209,229,240]],[2500,[247,247,247]],[3e3,[253,219,199]],[3500,[244,165,130]],[4e3,[214,96,77]],[4500,[178,24,43]],[5e3,[103,0,31]]],e)}function ry(e=1e3){return ae([236,332],[[241,[255,255,255]],[245.5,[6,82,255]],[250,[6,82,255]],[258,[46,131,255]],[266,[46,131,255]],[280,[0,0,0]],[300,[0,0,0]],[305,[247,20,35]],[309.5,[247,20,35]],[314,[245,210,5]],[320.5,[245,210,5]],[327,[255,255,255]]],e)}function ny(e=1e3){return ae([92e3,105e3],[[92e3,[40,0,0]],[95e3,[187,60,31]],[96500,[137,32,30]],[98e3,[16,1,43]],[100500,[36,1,93]],[101300,[241,254,18]],[103e3,[228,246,223]],[105e3,[255,255,255]]],e)}function oy(e=2e3){let t=[0,150],r=[{color:[37,79,92],mode:"hcl",p:t[0]},{color:"aliceblue",mode:"hcl",p:2},{color:[51,26,155],mode:"hcl",p:15},{color:"gold",mode:"hcl",p:100},{color:"white",mode:"hcl",p:t[1]}],n=We(r);return n=ye(n,0,[.6,3.4]),n=ye(n,2,[12,18]),gt(t,n,e)}function iy(e=1e3){return ae([0,100],[[0,[230,165,30]],[25,[120,100,95]],[60,[40,44,92]],[75,[21,13,193]],[90,[75,63,235]],[100,[25,255,255]]],e)}function ay(e=1e3){return ae([0,1],[[0,[5,5,89]],[.2,[170,170,230]],[1,[255,255,255]]],e)}function sy(e=1e3){return ae([0,70],[[0,[230,165,30]],[10,[120,100,95]],[20,[40,44,92]],[30,[21,13,193]],[40,[75,63,235]],[60,[25,255,255]],[70,[150,255,255]]],e)}function cy(e=2e3){return ae([193.15,328.15],[[193.15,[37,4,42]],[206,[41,10,130]],[219,[81,40,40]],[233.15,[192,37,149]],[255.372,[70,215,215]],[273.15,[21,84,187]],[275.15,[24,132,14]],[291,[247,251,59]],[298,[235,167,21]],[311,[230,71,39]],[328.15,[88,27,67]]],e)}function ly(e=1e3){let t=[0,100],r=new Uint8Array(e*4);return Qs(r,[0,1],[0,1],ag),Ye(t,r)}function uy(e=1e4){return ae([0,8e4],[[0,[15,4,96]],[250,[30,8,180]],[1e3,[121,102,2]],[2e3,[118,161,66]],[4e3,[50,102,219]],[8e3,[19,131,193]],[16e3,[59,204,227]],[64e3,[241,1,45]],[8e4,[243,0,241]]],e)}var cS=re({year:2014,month:11,day:24}),lS=re({year:2015,month:3,day:11}),uS=re({year:2016,month:6,day:22}),fS=re({year:2021,month:1,day:1}),pS=[{type:"regular",start:"2013-11-01T00:00Z",end:"2020-12-31T21:00Z",frequency:{hours:3}},{type:"regular",start:"2021-01-01T00:00Z",frequency:{hours:1}}],se={};function or(e,t,r,n){let{instant:o,isNow:i}=ee(e.time_cursor),a=Re(o,r),s=i?"current":B(a,"{YYYY}/{MM}/{DD}"),c=i?"current":B(a,"{hh}{mm}"),l=re(a),u=l>=cS?".epak":".json",f="0.5";l<lS||to()?f="1.0":l>=uS&&e.hd_enabled&&(f="0.25");let d=[c,t,n==="surface"?"surface":n!==void 0?"isobaric":void 0,n==="surface"?"level":n!==void 0?n:void 0,"gfs",f].filter(h=>h!==void 0).join("-")+u;return Le(a).resolve("gfs",s,d)}function Bt(e){let{time_cursor:t}=e,r=re(ee(t).instant)>=fS?zt(t):nr(t);return{sourceHTML:M0,timeline:pS,...r}}function tf(e){var n;let t=go(Bt(e)),r={name:"wind",descriptionHTML:{name:R`Wind`,qualifier:` @ ${ho(e)}`},paths:[or(e,"wind",t.alignment(),e.z_level)],builder:nc,unitDescriptors:W({"km/h":{type:"vec2",convert:o=>Gr(o,3.6),convertScalar:o=>o*3.6,precision:0},"m/s":{type:"vec2",convert:o=>o,convertScalar:o=>o,precision:1},kn:{type:"vec2",convert:o=>Gr(o,1.943844),convertScalar:o=>o*1.943844,precision:0},mph:{type:"vec2",convert:o=>Gr(o,2.236936),convertScalar:o=>o*2.236936,precision:0}}),supported_z_levels:["surface","1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:(n=se.wind)!=null?n:se.wind=ly(),particles:{velocityScale:1/100,maxIntensity:15}};return Object.assign(t,r)}function fy(e){var o;let t=/Temperature/,r=fe(Bt(e)),n={name:"temp",descriptionHTML:{name:R`Temperature`,qualifier:` @ ${ho(e)}`},paths:[or(e,"temp",r.alignment(),e.z_level)],builder:i=>te(i,t,{hasMissing:!1,legacyName:"Temperature"}),unitDescriptors:W({"°C":{convert:i=>i-273.15,precision:1},"°F":{convert:i=>i*9/5-459.67,precision:1},K:{convert:i=>i,precision:1}}),supported_z_levels:["surface","1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:(o=se.temp)!=null?o:se.temp=cy()};return Object.assign(r,n)}function py(e){var o;let t=/Relative_humidity/,r=fe(Bt(e)),n={name:"relative_humidity",descriptionHTML:{name:R`Relative Humidity`,qualifier:` @ ${ho(e)}`},paths:[or(e,"relative_humidity",r.alignment(),e.z_level)],builder:i=>te(i,t,{hasMissing:!1}),unitDescriptors:W({"%":{convert:i=>i,precision:0}}),supported_z_levels:["surface","1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:(o=se.rh)!=null?o:se.rh=iy()};return Object.assign(r,n)}function rf(e){var n;let t=fe(Bt(e)),r={name:"air_density",descriptionHTML:{name:R`Air Density`,qualifier:` @ ${ho(e)}`},paths:[or(e,"air_density",t.alignment(),e.z_level)],builder:o=>te(o,/air_density/,{hasMissing:!1}),unitDescriptors:W({"kg/m^3":{convert:o=>o,precision:2}}),supported_z_levels:["1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:(n=se.airdens)!=null?n:se.airdens=ey()};return Object.assign(t,r)}function my(e){var i;let t=tf(e),r=rf(e),n=fe(Bt(e)),o={name:"wind_power_density",descriptionHTML:{name:R`Instantaneous Wind Power Density`,qualifier:` @ ${ho(e)}`},paths:[t.paths[0],r.paths[0]],builder:Qg,unitDescriptors:W({"kW/m^2":{convert:a=>a/1e3,precision:1},"W/m^2":{convert:a=>a,precision:0}}),supported_z_levels:["1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:(i=se.wpd)!=null?i:se.wpd=uy()};return Object.assign(n,o)}function dy(e){var o;let t=` ${R`(feels like)`}`,r=fe(Bt(e)),n={name:"misery_index",descriptionHTML:{name:R`Misery Index`,qualifier:""},paths:[or(e,"misery_index",r.alignment())],builder:i=>te(i,/misery_index/,{hasMissing:!1}),unitDescriptors:W({"°C":{symbolHTML:"°C"+t,convert:i=>i-273.15,precision:1},"°F":{symbolHTML:"°F"+t,convert:i=>i*9/5-459.67,precision:1},K:{symbolHTML:"K"+t,convert:i=>i,precision:1}}),scale:(o=se.misery)!=null?o:se.misery=ry()};return Object.assign(r,n)}function hy(e){var o;let t=/Cloud_water/,r=fe(Bt(e)),n={name:"total_cloud_water",descriptionHTML:{name:R`Total Cloud Water`,qualifier:""},paths:[or(e,"total_cloud_water",r.alignment())],builder:i=>te(i,t,{hasMissing:!1,legacyName:"Cloud_water"}),unitDescriptors:W({"kg/m^2":{convert:i=>i,precision:2}}),scale:(o=se.tcw)!=null?o:se.tcw=ay()};return Object.assign(r,n)}function gy(e){var o;let t=/Precipitable_water/,r=fe(Bt(e)),n={name:"total_precipitable_water",descriptionHTML:{name:R`Total Precipitable Water`,qualifier:""},paths:[or(e,"total_precipitable_water",r.alignment())],builder:i=>te(i,t,{hasMissing:!1,legacyName:"Precipitable_water"}),unitDescriptors:W({"kg/m^2":{convert:i=>i,precision:1}}),scale:(o=se.tpw)!=null?o:se.tpw=sy()};return Object.assign(r,n)}function yy(e){var o;let t=/Pressure_reduced_to_MSL/,r=fe(Bt(e)),n={name:"mean_sea_level_pressure",descriptionHTML:{name:R`Mean Sea Level Pressure`,qualifier:""},paths:[or(e,"mean_sea_level_pressure",r.alignment())],builder:i=>te(i,t,{hasMissing:!1,legacyName:"Pressure_reduced_to_MSL"}),unitDescriptors:W({hPa:{convert:i=>i/100,precision:0},mmHg:{convert:i=>i/133.322387415,precision:0},inHg:{convert:i=>i/3386.389,precision:1}}),scale:(o=se.mslp)!=null?o:se.mslp=ny()};return Object.assign(r,n)}function xy(e){var n;let t=fe(Bt(e)),r={name:"precip_3hr",descriptionHTML:{name:R`3-hour Precipitation Accumulation`,qualifier:""},paths:[or(e,"precip_3hr",t.alignment())],builder:o=>te(o,/precip_accumulation_3hr/,{hasMissing:!1}),unitDescriptors:W({mm:{convert:o=>o,precision:1},in:{convert:o=>o/25.4,precision:2},"kg/m^2":{convert:o=>o,precision:1}}),alpha:{single:160,animated:160},scale:(n=se.precip)!=null?n:se.precip=oy()};return Object.assign(t,r)}function vy(e){var n;let t=fe(Bt(e)),r={name:"cape",descriptionHTML:{name:R`Convective Available Potential Energy from Surface`,qualifier:""},paths:[or(e,"cape",t.alignment())],builder:o=>te(o,/Convective_available_potential_energy_surface/,{hasMissing:!1}),unitDescriptors:W({"J/kg":{convert:o=>o,precision:0}}),alpha:{single:160,animated:140},scale:(n=se.cape)!=null?n:se.cape=ty()};return Object.assign(t,r)}var mS=[{type:"regular",start:"2014-01-01T00:00Z",frequency:{days:1}}],nf={};function dS(e,t){let{instant:r,isNow:n}=ee(e.time_cursor),o=n?"current":B(r,"{YYYY}/{MM}"),i=n?"current":B(r,"{YYYY}{MM}{DD}"),a=e.hd_enabled?"0.05":"0.15",s=`${i}-${t}-crw-${a}.epak`;return Le(r).resolve("crw",o,s)}function hS(){return fe({sourceHTML:A0,timeline:mS})}var gS=[R`No Stress`,R`Bleaching Watch`,R`Bleaching Warning`,R`Alert Level 1`,R`Alert Level 2`,R`Alert Level 3`,R`Alert Level 4`,R`Alert Level 5`];function by(e){var n;let t=Object.assign(hS(),ec(e.time_cursor)),r={name:"bleaching_alert_area",descriptionHTML:{name:R`Bleaching Alert Area`,qualifier:""},paths:[dS(e,"baa5")],builder:o=>te(o,/bleaching_alert_area/,{hasMissing:!0}),unitDescriptors:W({heat_stress_level:{type:"category",categories:gS}}),scale:(n=nf.baa5)!=null?n:nf.baa5=ae([0,7],[[0,[5,122,176]],[1,[255,255,178]],[2,[254,204,92]],[3,[253,141,60]],[4,[227,26,28]],[5,[189,0,38]],[6,[128,0,38]],[7,[70,0,42]]],8),alpha:{single:200,animated:132}};return Object.assign(t,r)}function wy(e=1e3){return ae([0,1.5],[[0,[10,25,68]],[.15,[10,25,250]],[.4,[24,255,93]],[.65,[255,233,102]],[1,[255,233,15]],[1.5,[255,15,15]]],e)}var Sy=[{type:"regular",start:"1993-01-01T00:00Z",frequency:{days:1}}],of,oc;async function yS(){var e;if(oc===void 0){let r=(await Wi(Ty("now"),{headerOnly:!0})).header.variables.time["init-time"];oc=_e((e=Ss(r))!=null?e:""),setTimeout(()=>oc=void 0,3*60*1e3)}return oc}function Ty(e,t){let{instant:r,isNow:n}=ee(e);n||(r=Xi(r,_e(Sy[0].start),t));let o=Re(r,{day:1}),i=n?"current":B(o,"{YYYY}"),s=`${n?"current":B(r,"{YYYY}{MM}{DD}")}-oscar2-0p25.epak`;return Le(o).resolve("oscar2",i,s)}function xS(e,t,r,n){let o=new Float32Array(e.length*2);for(let i=0;i<r;i++)for(let a=0;a<n;a++){let s=i*n+a,l=(a*r+i)*2;o[l]=e[s],o[l+1]=t[s]}return o}function vS(e){let{header:t}=e,{variables:r}=t;if(r===void 0)throw new Error("unexpected epak format");let n=r.u,o=r.v,i=r.time,a=r.lat.sequence,s=r.lon.sequence,c=jt(n,e),l=jt(o,e),u=xS(c,l,s.size,a.size);u.containsNaN=!0;let f=kt(s,a),p={type:"vec2",valueAt:m=>{let d=m*2,h=u[d],g=u[d+1];return[h,g]},scalarize:Ut,isDefined:m=>!isNaN(u[m*2]),nearest:mo(f,u),bilinear:Jr(f,u)};return{validTime:()=>_e(Array.isArray(i.data)?i.data[0]:NaN),grid:()=>f,field:()=>p}}async function _y(e){let t=await yS(),r=Ty(e.time_cursor,t);return go(ec(e.time_cursor,void 0,[void 0,t]),{name:"oscar2_currents",descriptionHTML:{name:R`Ocean Currents`,qualifier:` @ ${R`Surface`}`},sourceHTML:k0,timeline:Sy,paths:[r],builder:vS,unitDescriptors:W({"m/s":{type:"vec2",convert:n=>n,convertScalar:n=>n,precision:2,convention:"with"},"km/h":{type:"vec2",convert:n=>Gr(n,3.6),convertScalar:n=>n*3.6,precision:1,convention:"with"},kn:{type:"vec2",convert:n=>Gr(n,1.943844),convertScalar:n=>n*1.943844,precision:1,convention:"with"},mph:{type:"vec2",convert:n=>Gr(n,2.236936),convertScalar:n=>n*2.236936,precision:1,convention:"with"}}),scale:of!=null?of:of=wy(),particles:{velocityScale:1/7,maxIntensity:.7}})}function ce(e){let t=Object.keys(e);return r=>t.every(n=>e[n]===r[n])}var Ey={wind:{matchesPrimary:ce({animation_type:"wind"}),matchesOverlay:ce({overlay_type:"wind"}),create:tf},temp:{matchesOverlay:ce({overlay_type:"temp"}),create:fy},relative_humidity:{matchesOverlay:ce({overlay_type:"relative_humidity"}),create:py},air_density:{matchesOverlay:ce({overlay_type:"air_density"}),create:rf},wind_power_density:{matchesOverlay:ce({overlay_type:"wind_power_density"}),create:my},misery_index:{matchesOverlay:ce({overlay_type:"misery_index"}),create:dy},total_cloud_water:{matchesOverlay:ce({overlay_type:"total_cloud_water"}),create:hy},total_precipitable_water:{matchesOverlay:ce({overlay_type:"total_precipitable_water"}),create:gy},mean_sea_level_pressure:{matchesOverlay:ce({overlay_type:"mean_sea_level_pressure"}),create:yy},precip_3hr:{matchesOverlay:ce({overlay_type:"precip_3hr"}),create:xy},cape:{matchesOverlay:ce({overlay_type:"cape"}),create:vy},uv_index:{matchesOverlay:ce({overlay_type:"uv_index"}),create:Cg},cosc:{matchesOverlay:ce({overlay_type:"cosc"}),create:Yg},so2smass:{matchesOverlay:ce({overlay_type:"so2smass"}),create:Xg},duexttau:{matchesOverlay:ce({overlay_type:"duexttau"}),create:Kg},suexttau:{matchesOverlay:ce({overlay_type:"suexttau"}),create:Jg},co2sc:{matchesOverlay:ce({overlay_type:"co2sc"}),create:Zg},currents:{matchesPrimary:ce({animation_type:"currents"}),matchesOverlay:ce({overlay_type:"currents"}),create:_y},primary_waves:{matchesPrimary:ce({animation_type:"primary_waves"}),matchesOverlay:ce({overlay_type:"primary_waves"}),create:pg},significant_wave_height:{matchesOverlay:ce({overlay_type:"significant_wave_height"}),create:mg},sea_surface_temp:{matchesOverlay:ce({overlay_type:"sea_surface_temp"}),create:_g},sea_surface_temp_anomaly:{matchesOverlay:ce({overlay_type:"sea_surface_temp_anomaly"}),create:Eg},bleaching_alert_area:{matchesOverlay:ce({overlay_type:"bleaching_alert_area"}),create:by},aurora:{matchesOverlay:ce({overlay_type:"aurora"}),create:Dg},pm1:{matchesOverlay:ce({overlay_type:"pm1"}),create:Og},"pm2.5":{matchesOverlay:ce({overlay_type:"pm2.5"}),create:Ig},pm10:{matchesOverlay:ce({overlay_type:"pm10"}),create:Fg},no2:{matchesOverlay:ce({overlay_type:"no2"}),create:Vg},organic_matter_aot:{matchesOverlay:ce({overlay_type:"organic_matter_aot"}),create:Ug},none:{matchesOverlay:ce({overlay_type:"none"}),create:()=>{}}};function Ay(e){let t=Object.values(Ey).filter(vs),r=t.find(o=>{var i;return(i=o.matchesPrimary)==null?void 0:i.call(o,e)}),n=t.find(o=>{var i;return((i=o.matchesOverlay)==null?void 0:i.call(o,e))&&o!==r});return[r==null?void 0:r.create(e),n==null?void 0:n.create(e)]}var Py=new Set(Object.keys(Ey));var bS=0,af=0,My;function Dy(e,t,r,n){ke.status("Downloading...");let{layerManagerAgent:o,primaryLayerAgent:i,overlayLayerAgent:a,activeLayerAgent:s}=e,c=`build layers #${bS++}`,l=ge(t.getAll(),r.getAll());return Promise.all(Ay(l)).then(u=>(af++,console.time(c),g0(u,n).then(f=>{var d;if(n.requested)return;let p=f[0],m=f[1];i.submit(p!=null?p:null),a.submit(m!=null?m:null),s.submit((d=m!=null?m:p)!=null?d:null)}).catch(f=>{var d;if(ke.error(f),n.requested)return;let p=u[0],m=u[1];i.submit(p!=null?p:null),a.submit(m!=null?m:null),s.submit((d=m!=null?m:p)!=null?d:null)}).finally(()=>{af--,console.timeEnd(c)}))).finally(()=>{clearInterval(My),My=t.get("time_cursor")==="now"?setInterval(()=>o.submit(function(){return Dy(e,t,r,this.cancel)}),30*Ri):void 0})}function ky(e,t,r){let{layerManagerAgent:n}=e;function o(){n.submit(function(){return Dy(e,t,r,this.cancel)})}t.on(T`change:time_cursor change:z_level change:animation_type change:overlay_type`,o),r.on(T`change:hd_enabled`,o)}function Ry(e,t,r){var o;if(af>0){console.log("Download in progress--ignoring nav request.");return}let n=(o=t==null?void 0:t[r])==null?void 0:o.call(t);n!==void 0&&(+re(n)>Ys()&&ut("report",{category:"nav",message:"forecast"}),e.set(re(n).toISOString()))}function Cy(e,t){let r=t.value();if(!e||!r)return null;console.time("render mask");let{width:n,height:o}=r,i=so(n,o),a=e.defineMask(i.getContext("2d"));a.fillStyle="rgba(255, 0, 0, 1)",a.fill();let s=a.createImageData(n,o),c=s.data;return Fh(c,a.getImageData(0,0,n,o).data),console.timeEnd("render mask"),{imageData:s,isVisible(l,u){let f=(u*n+l)*4;return c[f+3]>0},set(l,u,f){let p=(u*n+l)*4;return c[p]=f[0],c[p+1]=f[1],c[p+2]=f[2],c[p+3]=f[3],this}}}var wS=150,SS=10,TS=[NaN,NaN],_S=[NaN,0],ES=[0,0,0,0];function AS(e,t,r){let{xMin:n}=r;return{move(o,i,a,s){let c=Math.round(i);if(0<=c&&c<e.length){let l=e[c],u=(Math.round(o)-n)*3;if(l&&0<=u&&u<l.length){a[s]=o,a[s+1]=i,a[s+2]=l[u],a[s+3]=l[u+1],a[s+4]=l[u+2];return}}a[s]=o,a[s+1]=i,a[s+2]=NaN,a[s+3]=NaN,a[s+4]=NaN},isDefined(o,i){let a=Math.round(i);if(0<=a&&a<e.length){let s=e[a],c=(Math.round(o)-n)*3;if(s&&0<=c&&c<s.length)return!isNaN(s[c])}return!1},isInsideBoundary(o,i){let a=new Float32Array(5);return this.move(o,i,a,0),!isNaN(a[3])},overlay:t==null?void 0:t.imageData}}function PS(e,t,r,n,o,i,a){let s=zd(e,t,r,n,o),[c,l]=a;return a[0]=(s[0]*c+s[2]*l)*i,a[1]=(s[1]*c+s[3]*l)*i,a}var Ny=!1;function MS(e,t,r,n,o){var ie,de;let{viewboxAgent:i,globeAgent:a,rendererAgent:s,primaryLayerAgent:c,activeLayerAgent:l,fastoverlayAgent:u}=e,f=a.value();if(!f||!s.value())return null;let p=(de=(ie=u.value())==null?void 0:ie.draw())!=null?de:{pass:!1},m=p.pass;if(p.err&&!Ny){Ny=!0;let ue=JSON.stringify(p);console.log(`fastoverlay failure: ${ue}`),ut("exception",{category:"gl",description:ue})}let d=c.value(),h=l.value(),g=d!==h;if(!(d!=null&&d.field)||!(h!=null&&h.field))return null;let y=r?1:2,w=d.field(),b=h.field(),x=w[n],_=b[n],A=w.scalarize,k=b.scalarize,P=Cy(f,i);console.time("interpolating field");let{project:N,invert:M}=f.projection.optimize(),D=f.bounds(i.value()),{xMin:O,yMin:L,xMax:v,yMax:S,width:E,height:I}=D,C=d.particles.velocityScale,F=[],U=L,j=h.scale,Y=h.alpha.animated;function ne(ue){let xe=ue===S,me=new Float32Array(E*3);for(let Oe=O,wt=0;Oe<=v;Oe+=y,wt+=y*3){let tn=Oe===v,sr=TS,xc=NaN;if(P.isVisible(Oe,ue)){let[Eo,vc]=M(Oe,ue),Rn=ES;if(Eo===Eo){sr=x(Eo,vc);let Cn=xc=A(sr);Cn===Cn?sr=PS(N,Eo,vc,Oe,ue,C,sr):sr=_S,m||(g&&(Cn=k(_(Eo,vc))),Cn===Cn&&(Rn=j.rgba(Cn),Rn[3]=Y))}m||(P.set(Oe,ue,Rn),r||(tn||(P.set(Oe+1,ue,Rn),xe||P.set(Oe+1,ue+1,Rn)),xe||P.set(Oe,ue+1,Rn)))}me[wt]=sr[0],me[wt+1]=sr[1],me[wt+2]=xc,!r&&!tn&&(me[wt+3]=sr[0],me[wt+4]=sr[1],me[wt+5]=xc)}F[ue]=me,r||(F[ue+1]=me)}return ke.reset(),t.set(0),new Promise((ue,xe)=>{(function me(){try{if(!o.requested){let Oe=Date.now();for(;U<=S;)if(ne(U),U+=y,Date.now()-Oe>wS){t.set((U-L+1)/I),setTimeout(me,SS);return}}ue(AS(F,m?void 0:P,D))}catch(Oe){xe(Oe)}t.set(1),console.timeEnd("interpolating field"),t.set(void 0)})()})}function Ly(e,t,r,n){let{fieldAgent:o,rendererAgent:i,primaryLayerAgent:a,activeLayerAgent:s}=e;function c(){o.submit(function(){return MS(e,t,r.get(),n.get(),this.cancel)})}i.on(T`render`,c),a.on(T`update`,c),s.on(T`update`,c),n.on(T`change`,c),i.on(T`start redraw`,()=>o.cancel())}var DS=10,kS=1,RS=7,CS=.75,NS=40;function LS(e,t){let r=[];for(let n=85;n<=255;n+=e)r.push(`rgb(${n},${n},${n})`);return{colorStyles:r,indexFor(n){return Math.floor(Math.min(n,t)/t*(r.length-1))}}}function OS(e,t,r,n){let{viewboxAgent:o,globeAgent:i,primaryLayerAgent:a,fieldAgent:s}=t,c=i.value(),l=a.value(),u=s.value();if(!e||!c||!l||!u||!r.get())return null;Bi(e);let f=c.bounds(o.value()),{xMin:p,yMin:m,width:d,height:h}=f,{colorStyles:g,indexFor:y}=LS(DS,l.particles.maxIntensity),w=Math.round(d*RS);rh()&&(w=Math.floor(w*CS)),console.log(`particle count: ${w}`);let b=new Float32Array(w*5),x=new Int32Array(w),_=g.map(()=>new Float32Array(w*4)),A=new Int32Array(_.length),k=c.projection.scale();function P(C,F){let U=p+Math.random()*d,j=m+Math.random()*h;F.move(U,j,b,C)}function N(C,F){for(let U=0;U<10;U++)if(P(C,F),!isNaN(b[C+2]))return}let M,D,O=e.getContext("2d");l.particles.particleStyle==="waves"?(M=40,D=v,O.fillStyle="rgba(0, 0, 0, 0.90)"):(M=100,D=S,O.fillStyle=eh()?"rgba(0, 0, 0, 0.95)":"rgba(0, 0, 0, 0.97)"),O.lineWidth=kS;for(let C=0,F=0;C<w;C+=1,F+=5)x[C]=Ns(0,M),N(F,u);let L=new Float32Array(M);for(let C=0;C<L.length;C++)L[C]=Math.sin(-Zt/2+C/7)/2+1/2;function v(){let C=600/k*Math.pow(Math.log(k)/Math.log(600),2.5);for(let F=0;F<A.length;F++)A[F]=0;for(let F=0,U=0;F<w;F+=1,U+=5){++x[F]>=M&&(x[F]=0,P(U,u));let j=b[U],Y=b[U+1],ne=b[U+2],ie=b[U+3],de=j+ne*C,ue=Y+ie*C,xe=b[U+4];if(xe!==xe||!u.isDefined(de,ue))x[F]=M;else{b[U]=de,b[U+1]=ue;let me=Math.sqrt(ne*ne+ie*ie)/2.5;ne/=me,ie/=me;let Oe=y(xe*L[x[F]]),wt=4*A[Oe]++,tn=_[Oe];tn[wt]=j-ie,tn[wt+1]=Y+ne,tn[wt+2]=j+ie,tn[wt+3]=Y-ne}}}function S(){for(let C=0;C<A.length;C++)A[C]=0;for(let C=0,F=0;C<w;C+=1,F+=5){++x[C]>=M&&(x[C]=0,P(F,u));let U=b[F],j=b[F+1],Y=U+b[F+2],ne=j+b[F+3],ie=b[F+4];if(Y===Y){u.move(Y,ne,b,F);let de=b[F+2];if(de===de){let ue=y(ie),xe=4*A[ue]++,me=_[ue];me[xe]=U,me[xe+1]=j,me[xe+2]=Y,me[xe+3]=ne}else x[C]=M}else x[C]=M}}function E(){O.globalCompositeOperation="destination-in",O.fillRect(p,m,d,h),O.globalCompositeOperation="source-over";for(let C=0;C<_.length;C++){let F=_[C],U=4*A[C];if(U>0){O.beginPath(),O.strokeStyle=g[C];for(let j=0;j<U;j+=4)O.moveTo(F[j],F[j+1]),O.lineTo(F[j+2],F[j+3]);O.stroke()}}}function I(){return n.requested?!1:(D(),E(),setTimeout(I,NS),!0)}return I(),{frame:I}}function Oy(e,t,r){let n=e.select("[data-name=animation]").node(),{animatorAgent:o,rendererAgent:i,fieldAgent:a}=t;function s(){o.submit(function(){return OS(n,t,r,this.cancel)})}function c(l){o.value()&&o.submit(null),l&&n&&Bi(n)}r.on(T`change`,l=>{l?s():c(!0)}),a.on(T`submit`,()=>c(!1)),a.on(T`update`,s),i.on(T`start`,()=>c(!0))}var IS=40,FS=10;function VS(e,t,r){let{viewboxAgent:n,globeAgent:o,activeLayerAgent:i}=e,a=o.value(),s=i.value();if(!a||!s)return;t.fillStyle="rgba(255, 255, 255, 0.75)";let{width:c,height:l}=n.value(),u=a.projection.stream({point(d,h){0<=d&&d<c&&0<=h&&h<l&&t.fillRect(Math.round(d),Math.round(h),1,1)},lineEnd(){},lineStart(){},polygonEnd(){},polygonStart(){}}),f=s.grid(),{isDefined:p}=s.field(),m=0;(function d(){if(!r.requested){let h=Date.now()+IS;m=f.forEach((g,y,w)=>(p(w)&&(g=$e(180+g,360)-180,u.point(g,y)),Date.now()>h),m),m===m&&setTimeout(d,FS)}})()}function US(e,t){for(let r=3;r<e.length;r+=4)e[r]!==0&&(e[r]=t)}function HS(e,t,r,n,o){let{overlayGridAgent:i,rendererAgent:a,activeLayerAgent:s,fieldAgent:c}=t,l=c.value();if(!e||!l||!a.value())return;let u=e.getContext("2d"),f=s.value(),{overlay:p}=l;if(Yr(u),r!=="none"){if(p!==void 0){let m=n?f.alpha.animated:f.alpha.single;US(p.data,m),u.putImageData(p,0,0)}o?i.submit(function(){return VS(t,u,this.cancel)}):i.cancel()}}function Iy(e,t,r){let n=e.select("[data-name=overlay]").node(),{overlayAgent:o,overlayGridAgent:i,rendererAgent:a,fieldAgent:s}=t;function c(l,u){o.submit(()=>HS(n,t,l,u,r.get("show_grid_points")))}s.on(T`update`,()=>{c(r.get("overlay_type"),r.get("animation_enabled"))}),r.on(T`change:overlay_type change:animation_enabled change:show_grid_points`,()=>{c(r.get("overlay_type"),r.get("animation_enabled"))}),a.on(T`start`,()=>{n&&(Bi(n),c("none",!1))}),a.on(T`start redraw`,()=>i.cancel())}var GS=()=>({mode:"air",projection_type:"orthographic",orientation:{},time_cursor:"now",z_level:"surface",animation_type:"wind",overlay_type:"wind",annotation_type:"none",spotlight_coords:void 0,show_grid_points:!1,animation_enabled:!0}),jS={mode:At,projection_type:At,orientation:zS,time_cursor:At,z_level:At,animation_type:At,overlay_type:At,annotation_type:At,spotlight_coords:e=>e===void 0||qr(e),show_grid_points:tr,animation_enabled:tr};function zS(e){if(!bt(e))return!1;let t=e;return(t.scale===void 0||zr(t.scale)||t.scale==="default")&&(t.rotate===void 0||qr(t.rotate)||Oh(t.rotate)||t.rotate==="default")&&(t.translate===void 0||qr(t.translate)||t.translate==="default")}var Q=ro(GS,jS);var BS=()=>({show_settings:!1,show_date_chooser:!1}),$S={show_settings:tr,show_date_chooser:tr},ir=ro(BS,$S);var Vy="▫▫▫▫▫▫▫▫▫▫",qS="▪▪▪▪▪▪▪▪▪▪",Fy=Vy.length;function Uy(e,t){t.on(T`change`,r=>{r=pe(r!=null?r:NaN,0,1),e.property("hidden",r!==r),e.attr("aria-valuenow",r===r?r:null);let n=Math.floor(r*Fy);e.text(qS.substring(0,n)+Vy.substring(0,Fy-n))})}function WS(e){return e.length===1&&e===e.toUpperCase()&&e!==e.toLowerCase()}function YS(e,t,r,n){if(t){switch(t){case"Down":return"ArrowDown";case"Esc":return"Escape";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp"}return t}switch(r){case 27:return"Escape";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown"}return e==="keypress"&&n?n:"NYI"}function XS(e,t,r,n,o){let i=[];return t&&(i[0]="Control"),r&&(i[1]="Alt"),n&&!WS(e)&&(i[2]="Shift"),o&&(i[3]="Meta"),e!=="Control"&&e!=="Alt"&&e!=="Shift"&&e!=="Meta"&&(i[4]=e),i.filter(a=>a!==void 0).join("-")}function KS(e){let{type:t,key:r,ctrlKey:n,altKey:o,shiftKey:i,metaKey:a}=e,s=+e.which,c=String.fromCharCode(s),l=YS(t,r,s,c);return XS(l,n,o,i,a)}function ar(e){return function(t,r){t.defaultPrevented||t.isComposing||t.keyCode===229||e.call(this,KS(t),t,r)&&ds(t)}}function yt(e){return e==null||e.focus(),!0}function Pr(e,t){let{enableUpDown:r=!1}=t!=null?t:{},n=e.nodes();e.on(T`keydown`,ar(function(o){let i=n.indexOf(this),a=V(this).style("direction")==="rtl"?-1:1;switch(o){case"Home":return yt(Qn(n));case"ArrowLeft":return yt(Ht(n,i,-a));case"ArrowRight":return yt(Ht(n,i,a));case"ArrowUp":return r&&yt(Ht(n,i,-1));case"ArrowDown":return r&&yt(Ht(n,i,1));case"End":return yt(Hl(n))}return!1}))}function Hy(e,t){let r=e.nodes();function n(o){return Math.floor(o/t)}e.on(T`keydown`,ar(function(o){let i=r.indexOf(this),a=V(this).style("direction")==="rtl"?-1:1;switch(o){case"Control-Home":return yt(Qn(r));case"ArrowLeft":return yt(Ht(r,i,-a));case"ArrowRight":return yt(Ht(r,i,a));case"ArrowUp":return yt(Ht(r,i,-t));case"ArrowDown":return yt(Ht(r,i,t));case"Home":return yt(Ht(r,n(i)*t-1,1));case"End":return yt(Ht(r,(n(i)+1)*t,-1));case"Control-End":return yt(Hl(r))}return!1}))}function wo(e){var n;let t=e.nodes();function r(o){yn(e,function(){return o===this?0:-1})}r((n=Qn(t))!=null?n:t[0]),e.on(T`focus`,ms(r))}function ic(e,t){let r=e.nodes();function n(o){var a;let i=(a=Qn(r))!=null?a:r[0];e.each(function(){i=o===this.dataset.name?this:i}),yn(e,function(){return i===this?0:-1})}n(t.get()),t.on(T`change`,n)}function Qr(e,t,r){e.each(Vt(n=>{let o=n.selectAll("[role=radio]");Gh(o,t,r),Pr(o,{enableUpDown:!0}),ic(o,t)}))}function Gy(e,t,r){e.each(Vt(n=>{let o=n.selectAll("[role=tab]");Hh(o,t,r),Pr(o,{enableUpDown:!1}),ic(o,t)}))}function jy(e){e.each(Vt(t=>{let r=t.selectAll("button, a");Pr(r,{enableUpDown:!0}),wo(r)}))}function zy(e,t,r){let n=["prev2","prev1","next1","next2"];function o(i){Ry(t,r.value(),i)}n.forEach(i=>{let a=e.selectAll(`[data-name=nav-${i}]`),s=a.selectAll("[role=tooltip]");a.on(T`click`,Qe(()=>o(i))),r.on(T`update`,c=>{var u,f;let l=(f=(u=c==null?void 0:c.navLabels)==null?void 0:u[i])!=null?f:"";s.text(l),a.attr("title",l)})})}function By(e,t,r){let n=e.select("[data-name=date-field]"),o=e.select("#change-tz"),i=o.selectAll("[data-tz]").nodes();function a(c,l,u,f){return c&&l&&f?B(u==="device"?Gs(c):c,l).replace("{TZ}",f):R`N/A`}function s(){let c=r.value(),l=c==null?void 0:c.validTime(),u=c==null?void 0:c.dateFormat(),f=t.get("display_timezone"),p=i.filter(d=>d.dataset.tz===f)[0],m=p?V(p).text():"";n.text(a(l,u,f,m))}o.on(T`click`,Qe(()=>{var l;let c=i.map(u=>u.hidden).indexOf(!1);t.set("display_timezone",(l=i[c].dataset.tz)!=null?l:"device")})),t.on(T`change:display_timezone`,c=>{let u=(i.map(f=>f.dataset.tz).indexOf(c)+1)%i.length;i.forEach((f,p)=>f.hidden=p!==u),s()}),r.on(T`update`,s)}function $y(e,t,r){let{primaryLayerAgent:n,activeLayerAgent:o,annotationLayerAgent:i}=r;By(e.selectAll("[data-name=date]"),t,o);let a=e.selectAll("[data-name=description]"),s=e.selectAll("[data-name=source]");function c(){var x,_,A,k,P,N,M;let u=n.value(),f=o.value(),p=(x=u==null?void 0:u.descriptionHTML.name)!=null?x:"",m=(_=u==null?void 0:u.descriptionHTML.qualifier)!=null?_:"",d=(A=f==null?void 0:f.descriptionHTML.name)!=null?A:"",h=(k=f==null?void 0:f.descriptionHTML.qualifier)!=null?k:"",g=i.value(),y=(P=g==null?void 0:g.descriptionHTML.name)!=null?P:"",w=d+h;w&&u!==f&&(m===h?w=`${p} + ${w}`:w=`${p+m} + ${w}`),y&&(w+=` + ${y}`),a.html(w);let b=[(N=f==null?void 0:f.sourceHTML)!=null?N:"",(M=g==null?void 0:g.sourceHTML)!=null?M:""];s.html(b.filter(D=>D).join(" + "))}let l=et(c);n.on(T`update`,l),o.on(T`update`,l),i.on(T`update`,l)}function JS(e){let t=new Set(e.nodes().map(r=>r.id));return $("[aria-labelledby]").filter(function(){let r=V(this),n=r.attr("aria-labelledby").split(/\s+/);for(let o=0;o<n.length;o++){let i=n[o];if(t.has(i))return this.dataset.tooltip=i,r.attr("title",V(`#${i}`).text().trim()),!0}return!1})}function qy(e){let t=JS(e),r;function n(a){clearTimeout(r),r=d0(()=>e.classed("show",!1),a)}function o(a){clearTimeout(r),e.classed("show",!1),a.classed("show",!!a.text())}function i(){o(V(`#${this.dataset.tooltip}`))}return e.on(T`click`,a=>{n(),ds(a)}),t.on(T`focus`,i).on(T`blur`,()=>n(1)),nh()?t.on(T`mouseenter`,i).on(T`mouseleave`,()=>n(250)):t.filter(Vt(a=>!a.classed("no-touch-tt"))).on(T`click`,i).on(T`mouseleave`,()=>n(1)),{hideTooltip(){return e.filter(Vt(a=>a.classed("show"))).classed("show",!1).nodes().length>0},showTooltip:o}}var Wy=5;function ZS(e){return[e.scrollTop>Wy?"up":null,e.scrollHeight-e.clientHeight-e.scrollTop>Wy?"down":null].filter(jr)}function QS(e){let t=ZS(e);t.length>0?e.dataset.scrollable=t.join(" "):delete e.dataset.scrollable}var eT=100,tT=fo(QS,eT);function Yy(e){let t=e.node();if(!t)return;let r=()=>tT(t);e.on(T`scroll`,r),window.ResizeObserver?new ResizeObserver(r).observe(t):(new MutationObserver(r).observe(t,{attributes:!0,attributeFilter:["hidden"],childList:!0,subtree:!0}),V(window).on(T`resize`,r))}function Xy(e){function t(r){return r/=255,r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return .2126*t(e.r)+.7152*t(e.g)+.0722*t(e.b)}function sf(e,t){let r=Xy(e)+.05,n=Xy(t)+.05;return Math.max(r,n)/Math.min(r,n)}function cf(e,t){let{unitDescriptors:r=[]}=e!=null?e:{},n=t==null?void 0:t[e==null?void 0:e.name];return n===void 0?r[0]:r.find(o=>o.symbol===n||o.name===n)}function Ky(e,t){let r=e.select("[data-name=spotlight-coords]");function n(o){e.property("hidden",o===void 0),r.text(N0(o))}n(t.get()),t.on(T`change`,n),ao(e.selectAll("[data-name=hide-spotlight]"),t,()=>{})}function ac(e,t,r,n,o){let i=e.select("[aria-label]"),a=e.select("button"),s=a.select("span");function c(){var w,b,x,_;let u=o.value(),f=cf(u,r.get()),[p=NaN,m=NaN]=(w=t.get())!=null?w:[],d=(b=u==null?void 0:u.field)==null?void 0:b.call(u)[n.get()],h=d==null?void 0:d(p,m),{valueText:g="",valueAndUnitsText:y=""}=(x=h!==void 0&&f!==void 0&&f.format(f.convert(h)))!=null?x:{};e.property("hidden",g===""||!f),i.attr("aria-label",y).text(g),s.html((_=f==null?void 0:f.symbolHTML)!=null?_:"")}function l(){var m;let u=(m=o.value())!=null?m:{},{unitDescriptors:f=[]}=u,p=f.map(d=>{var h;return(h=d.symbol)!=null?h:d.name});p.length>0&&r.getAndSet((d={})=>{var b;let h=(b=d[u.name])!=null?b:p[0],y=(p.indexOf(h)+1)%p.length,w=p[y];return ge(d,{[u.name]:w})})}c(),r.on(T`change`,c),t.on(T`change`,c),o.on(T`update`,c),a.on(T`click`,Qe(l))}function rT(e,t){return{type:"Feature",geometry:{type:"Point",coordinates:[e,t]},properties:{stroke:"#3aff3a",strokeWidth:2.5,pointRadius:7}}}function Jy(e,t,r){let{globeAgent:n}=t;function o(){var c;let i=n.value(),[a,s]=(c=r.get())!=null?c:[NaN,NaN];if(!i||a!==a||s!==s){Yi(e,"location-mark",null,void 0);return}Yi(e,"location-mark",rT(a,s),i.projection)}r.on(T`change`,o),n.on(T`update`,o)}function Zy(e,t,r){let{fieldAgent:n}=e;function o(i,a){let s=+i[0],c=+i[1],l=+a[0],u=+a[1],f=n.value();s===s&&c===c&&l===l&&u===u&&(f!=null&&f.isInsideBoundary(s,c))&&t.set([l,u])}r.on(T`click`,o)}var nT=Ze("#444444"),oT=Ze("#eeeeee");function iT(e){return sf(e,nT)>sf(e,oT)}function Qy(e,t){let r=e.length/4,n=pe(Math.round(Ke(t,0,100,0,r-1)),0,r-1)*4;return Ze(e[n],e[n+1],e[n+2],e[n+3]/255)}function ex(e,t){let r=Z(t==null?void 0:t[0],0),[n,o]=e.style("direction")==="rtl"?[100,0]:[0,100];return pe(Ke(r,0,e.node().clientWidth-1,n,o),0,100)}function aT(e,t){let{width:r,height:n}=e,o=e.getContext("2d");function i(a){var c;let s=(c=a==null?void 0:a.scale.colors)!=null?c:new Uint8Array(0);if(Yr(o),s.length!==0)for(let l=0;l<r;l++)o.fillStyle=String(Qy(s,Ke(l,0,r-1,0,100))),o.fillRect(l,0,1,n)}i(t.value()),t.on(T`update`,i)}function sT(e,t,r,n){function o(i){let a=`calc(${pe(Z(i,0),0,100).toFixed(2)}% - 2px)`,[s,c]=e.style("direction")==="rtl"?[null,a]:[a,null];t.style("left",s).style("right",c)}o(r.get()),r.on(T`change`,o),e.on(T`click`,Qe(function(i){var s;let a=ex(e,He(i));r.set(a),(s=t.node())==null||s.focus()})),t.on(T`keydown`,ar(i=>{function a(c){let l=pe(Z(r.get(),0)+c,0,100);return r.set(l),n(),!0}let s=e.style("direction")==="rtl"?-1:1;switch(i){case"Home":return r.set(0),!0;case"Shift-ArrowLeft":return a(s*-.1);case"Shift-ArrowRight":return a(s*.1);case"Shift-ArrowUp":return a(.1);case"Shift-ArrowDown":return a(-.1);case"ArrowLeft":return a(-s);case"ArrowRight":return a(s);case"ArrowUp":return a(1);case"ArrowDown":return a(-1);case"PageUp":return a(10);case"PageDown":return a(-10);case"End":return r.set(100),!0}return!1}))}function tx(e,t,r,n,o){let i=e.select("canvas").attr("width",500).attr("height",1),a=e.select("#colorbar-cursor"),s=e.select("#colorbar-tt"),c=()=>o.showTooltip(s);aT(i.node(),n),sT(i,a,t,c);function l(m){var g,y;let d=(y=(g=n.value())==null?void 0:g.scale.colors)!=null?y:new Uint8Array(0),h=d.length>0?Qy(d,m):null;s.style("background",h==null?void 0:h.toString()).classed("dark-text",h!==null&&iT(h))}function u(m){var w,b;let d=n.value(),h=cf(d,r.get()),g=(w=d==null?void 0:d.valueInRange)==null?void 0:w.call(d,m/100),{valueAndUnitsHTML:y=""}=(b=g!==void 0&&h!==void 0&&h.formatScalar(h.convertScalar(g)))!=null?b:{};s.html(y)}function f(m){let d=pe(Z(m!=null?m:t.get(),0),0,100);l(d),u(d)}i.on(T`mousemove`,m=>{f(ex(i,He(m))),c()});let p=()=>f();a.on(T`focus`,p),t.on(T`change`,p),r.on(T`change`,p),n.on(T`update`,p)}function cT(){return this.tabIndex>=0}function lT(e){return e.selectAll(hs).filter(cT)}function uT(e){let t=lT(e).nodes();return[t[0],t[t.length-1]]}function rx(e){let t=uT(e);e.on(T`keydown`,ar((r,{target:n})=>{switch(r){case"Tab":return n===t[1]?(t[0].focus(),!0):!1;case"Shift-Tab":return n===t[0]?(t[1].focus(),!0):!1}return!1}))}function sc(e,t,r){let n=e.select(".panel"),o=t.handle(r),i=e.selectAll(".dialog-closer");e.on(T`click`,l=>{var u;if(((u=window.getSelection())==null?void 0:u.toString())!==""){l.stopPropagation();return}o.set(!1)}),n.on(T`click`,l=>l.stopPropagation());let a;function s(){Object.keys(t.getAll()).forEach(u=>u!==r&&t.set(u,!1,{modalOpening:!0})),e.property("hidden",!1),bu(e).attr("inert",""),uo(()=>{var u,f;return(f=(u=e.select(".modal-focus").node())!=null?u:i.node())==null?void 0:f.focus()}),a=document.activeElement}function c(l){if(e.property("hidden",!0),bu(e).attr("inert",null),a&&!(l!=null&&l.modalOpening)){let u=a;uo(()=>u instanceof HTMLElement&&u.focus())}a=null}o.on(T`change`,(l,u,f)=>l?s():c(f)),ao(i,o,!1),rx(n)}function nx(e,t,r,n,o,i){let a={year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,selectedDay:NaN},s=e.select("[data-name=year]").selectAll("button"),c=e.select("[data-name=month]").selectAll("button"),l=e.select("[data-name=day]").selectAll("button"),u=e.select("[data-name=apply]");Pr(s),Pr(c),Hy(l,7),wo(s),wo(c),wo(l);function f(){let{year:d,month:h}=a,g=new Date(d,h-1,1).getDay(),y=new Date(d,h,0).getDate();if(isNaN(g)||isNaN(y))return;a.day=pe(a.selectedDay,1,y),l.each(Vt((x,_,A)=>{let k=A-g+1,P=k<1||y<k?0:k;x.text(po(P,2)).attr("data-name",P).attr("aria-hidden",P===0?!0:null).classed("cloaked",P===0)})),s.attr("aria-selected",function(){return+this.dataset.name===a.year}),c.attr("aria-selected",function(){return+this.dataset.name===a.month}),l.attr("aria-selected",function(){return+this.dataset.name===a.day});let w=s.nodes(),b=[...w.filter(x=>+x.dataset.name===a.year&&!x.hidden),w[0]][0];yn(s,function(){return this===b?0:-1}),s.classed("modal-focus",function(){return this===b}),yn(c,function(){return+this.dataset.name===a.month?0:-1}),yn(l,function(){return+this.dataset.name===a.day?0:-1})}s.on(T`click`,function(){a.year=+this.dataset.name,f()}),c.on(T`click`,function(){a.month=+this.dataset.name,f()}),l.on(T`click`,function(){a.day=a.selectedDay=+this.dataset.name,f()});let p=Math.max(Dn(tt(Xs(),{day:15})).year,2022);s.property("hidden",ms(d=>+d.dataset.name>p));function m(){var k,P;let{instant:d,isNow:h}=ee(n.get()),g=h&&(P=(k=o.value())==null?void 0:k.validTime())!=null?P:d,y=i.get()==="device",{year:w,month:b,day:x,hour:_,minute:A}=y?Gs(g):Dn(g);Object.assign(a,{year:w,month:b,day:x,hour:_,minute:A,selectedDay:x}),f()}ao(u,n,()=>{let d=i.get()==="device",{year:h,month:g,day:y,hour:w,minute:b}=d?I0(a):a;return js({year:h,month:g,day:y,hour:w,minute:b})}),t.handle(r).on(T`change`,d=>d&&m()),sc(e,t,r)}function fT(e){let t={language:"",script:"",region:""},r=(e||"").toLowerCase().split("-");for(let n=0;n<r.length;n++){let o=r[n];if(o.length===1)break;n===0?t.language=o:/^[a-z]{4}$/.test(o)?t.script=o.substring(0,1).toUpperCase()+o.substring(1):/^([a-z]{2}|\d{3})$/.test(o)&&(t.region=o.toUpperCase())}return t}function pT(e){switch(e.language){case"en":return"en";case"cs":return"cs";case"fr":return"fr";case"ja":return"ja";case"ko":return"ko";case"pt":return"pt";case"ru":return"ru";case"zh":switch(e.script){case"Hant":return"zh-TW";case"Hans":return"zh-CN"}switch(e.region){case"HK":case"MO":case"TW":return"zh-TW";case"SG":case"CN":return"zh-CN"}}}function ox(e){var t,r;return(r=(t=e.languages)==null?void 0:t.map(n=>pT(fT(n))).filter(jr)[0])!=null?r:""}function ix(e){var t;return(t=e.containsNaN)==null||t?Vh(e):e}function cc(e,t){var r;try{return(r=e.getContext("webgl2",t))!=null?r:void 0}catch{}}function ax(e,t){let r={PACK_ALIGNMENT:1,UNPACK_ALIGNMENT:1,UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1,UNPACK_COLORSPACE_CONVERSION_WEBGL:e.BROWSER_DEFAULT_WEBGL},n=Object.keys(r),o={TEXTURE_MIN_FILTER:e.NEAREST,TEXTURE_MAG_FILTER:e.NEAREST,TEXTURE_WRAP_S:e.CLAMP_TO_EDGE,TEXTURE_WRAP_T:e.CLAMP_TO_EDGE},i=Object.keys(o);function a(c){let l=e.getError();if(l)throw new Error(`${l}:${c}`)}let s=t;return{get context(){return e},get display(){return s},set display(c){s=c},makeShader(c,l){let u=e.createShader(c);if(a(`createShader:${c}`),u===null)throw new Error("createShader: null");e.shaderSource(u,l),a(`shaderSource:${c}`),e.compileShader(u),a(`compileShader:${c}`);let f=e.getShaderParameter(u,e.COMPILE_STATUS);if(a(`getShaderParameter:${c}`),!f){let p=e.getShaderInfoLog(u);throw a(`getShaderInfoLog:${c}`),e.deleteShader(u),a(`deleteShader:${c}`),new Error(String(p))}return u},makeProgram(c){let l=e.createProgram();if(a("createProgram"),l===null)throw new Error("createProgram: null");c.forEach(f=>{e.attachShader(l,f),a("attachShader")}),e.linkProgram(l),a("linkProgram");let u=e.getProgramParameter(l,e.LINK_STATUS);if(a("getProgramParameter"),!u){let f=e.getProgramInfoLog(l);throw a("getProgramInfoLog"),e.deleteProgram(l),a("deleteProgram"),new Error(String(f))}return l},makeFramebufferTexture2D(c){let l=e.createFramebuffer();if(a("createFramebuffer"),l===null)throw new Error("createFramebuffer: null");e.bindFramebuffer(e.FRAMEBUFFER,l),a("bindFramebuffer"),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c,0),a("framebufferTexture2D");let u=e.checkFramebufferStatus(e.FRAMEBUFFER);if(a("checkFramebufferStatus"),u!==e.FRAMEBUFFER_COMPLETE)throw e.deleteFramebuffer(l),a("deleteFramebuffer"),new Error(`framebuffer: ${u}`);return l},uniforms(c,l){let u={},f=Z(e.getProgramParameter(c,e.ACTIVE_UNIFORMS));a("getProgramParameter");for(let m=0;m<f;m++){let d=e.getActiveUniform(c,m);if(a(`getActiveUniform:${m}`),d!==null){let h=e.getUniformLocation(c,d.name);if(a(`getUniformLocation:${d.name}`),h===null)throw new Error(`getUniformLocation: ${d.name}: null`);u[d.name]={name:d.name,type:d.type,size:d.size,location:h}}}function p(m,d){let h=u[m];if(h!==void 0&&d!==void 0){let{type:g,location:y}=h;switch(typeof d){case"number":switch(g){case e.FLOAT:return e.uniform1f(y,d);case e.INT:return e.uniform1i(y,d)}break;case"string":if(g===e.SAMPLER_2D){let w=l[d];if(w===void 0||w.unit===void 0){console.warn(`cannot assign texture to uniform '${m}'`,d,h,w);return}return e.uniform1i(y,w.unit)}break;default:switch(g){case e.FLOAT:return e.uniform1fv(y,d);case e.FLOAT_VEC2:return e.uniform2fv(y,d);case e.FLOAT_VEC3:return e.uniform3fv(y,d);case e.FLOAT_VEC4:return e.uniform4fv(y,d);case e.INT:return e.uniform1iv(y,d);case e.INT_VEC2:return e.uniform2iv(y,d);case e.INT_VEC3:return e.uniform3iv(y,d);case e.INT_VEC4:return e.uniform4iv(y,d)}}}console.warn(`cannot assign uniform ${m}`,d,h)}return{set(m){Object.keys(m).forEach(d=>{p(d,m[d]),a(`assign-uniform:${d}`)})}}},attribs(c){let l={},u=Z(e.getProgramParameter(c,e.ACTIVE_ATTRIBUTES));a("getProgramParameter");for(let p=0;p<u;p++){let m=e.getActiveAttrib(c,p);if(a(`getActiveAttrib:${p}`),m!==null){let d=e.getAttribLocation(c,m.name);a(`getAttribLocation:${m.name}`),l[m.name]={name:m.name,type:m.type,size:m.size,location:d}}}function f(p,m){let d=l[p];if(d!==void 0&&m!==void 0){let{location:h}=d;switch(d.type){case e.FLOAT_VEC2:let g=e.createBuffer();return a(`createBuffer:${p}`),e.bindBuffer(e.ARRAY_BUFFER,g),a(`bindBuffer:${p}`),e.bufferData(e.ARRAY_BUFFER,m,e.STATIC_DRAW),a(`bufferData:${p}`),e.enableVertexAttribArray(h),a(`enableVertexAttribArray:${p}`),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0)}}console.warn(`cannot assign attrib ${p}`,m,d)}return{set(p){Object.keys(p).forEach(m=>{f(m,p[m]),a(`assign-attrib:${m}`)})}}},makeTexture2D(c,l){let u=e.createTexture();if(a("createTexture"),u===null)throw new Error("createTexture: null");e.activeTexture(e.TEXTURE0),a("activeTexture"),e.bindTexture(e.TEXTURE_2D,u),a("bindTexture");let f=Object.assign({},r,o,c),{internalFormat:p,format:m,type:d,width:h,height:g}=f;return n.forEach(y=>{e.pixelStorei(e[y],f[y]),a(`pixelStorei:${y}`)}),l=l instanceof Float32Array?ix(l):l,e.texImage2D(e.TEXTURE_2D,0,p,h,g,0,m,d,l),a("texImage2D"),i.forEach(y=>{e.texParameteri(e.TEXTURE_2D,e[y],f[y]),a(`texParameteri:${y}`)}),e.bindTexture(e.TEXTURE_2D,null),a("bindTexture"),u},updateTexture2D(c,l,u){e.activeTexture(e.TEXTURE0),a("activeTexture"),e.bindTexture(e.TEXTURE_2D,c),a("bindTexture");let f=Object.assign({},r,o,l),{format:p,type:m,width:d,height:h}=f;return n.forEach(g=>{e.pixelStorei(e[g],f[g]),a(`pixelStorei:${g}`)}),u=u instanceof Float32Array?ix(u):u,e.texSubImage2D(e.TEXTURE_2D,0,0,0,d,h,p,m,u),a("texSubImage2D"),i.forEach(g=>{e.texParameteri(e.TEXTURE_2D,e[g],f[g]),a(`texParameteri:${g}`)}),e.bindTexture(e.TEXTURE_2D,null),a("bindTexture"),c},updateTexture2DParams(c,l,u){let f=!1;for(let p=0;p<i.length;p++){let m=i[p],d=o[m],h=l[m]||d,g=u[m]||d;h!==g&&(f||(f=!0,e.activeTexture(e.TEXTURE0),a("activeTexture"),e.bindTexture(e.TEXTURE_2D,c),a("bindTexture")),e.texParameteri(e.TEXTURE_2D,e[m],h),a(`texParameteri:${m}`))}return f&&(e.bindTexture(e.TEXTURE_2D,null),a("bindTexture")),f}}}var sx=`precision highp float;

attribute vec2 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
    gl_Position = vec4(a_Position, 0.0, 1.0);
    v_TexCoord = a_TexCoord;
}
`;var cx=`precision highp float;
precision highp sampler2D;

const float TAU = 6.283185307179586;
const float PI = 3.141592653589793;
const float NIL = 7e37;
`;var lx=`
uniform float u_PixelDensity;

void main() {
    vec2 coord = invert(gl_FragCoord.xy / u_PixelDensity);
    vec2 st = grid(coord);
    lowp vec4 color = colorize(lookup(st));
    gl_FragColor = color;
}
`;function lc(e,t,r,n,o){let i=t!==void 0,a=i?t:e,s=i?e.getContext("2d"):void 0,c=cc(a);if(!c)return{draw:()=>({pass:!1,err:"no context"})};let l=c,u=ax(l,n());l.getExtension("EXT_color_buffer_float"),l.getExtension("OES_texture_float_linear"),l.disable(l.DEPTH_TEST),l.clearColor(0,0,0,0);let f=u.makeShader(l.VERTEX_SHADER,sx),p={a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},m={},d=new Array(8).fill(null),h=1,g=[],y,w=-1,b=-1;function x(O){let L=cx+O.join("")+lx,v=u.makeShader(l.FRAGMENT_SHADER,L),S=u.makeProgram([f,v]);u.attribs(S).set(p),g=O,y=u.uniforms(S,m),l.useProgram(S)}function _(O,L,v){if(!L)throw new Error(`unknown texture '${O}'`);L={...L};let{pixels:S}=L;if(!S)throw new Error(`texture '${O}' has no pixels`);if(L.pixels=null,v){let{def:I,texture:C}=v;if(L.hash===I.hash)return u.updateTexture2DParams(C,L,I)?{def:L,texture:C}:v;if(L.width===I.width&&L.height===I.height&&L.format===I.format&&L.type===I.type)return u.updateTexture2D(C,L,S),{def:L,texture:C};l.deleteTexture(C)}let E=u.makeTexture2D(L,S);return{def:L,texture:E}}function A(O={}){return Object.keys(O).map(L=>m[L]=_(L,O[L],m[L]))}function k(O){O.forEach(L=>{let v=L.texture;d[h]!==v&&(d[h]=v,l.activeTexture(l.TEXTURE0+h),l.bindTexture(l.TEXTURE_2D,v)),L.unit=h++})}function P(O){let L=Math.round(O.width*O.pixelDensity),v=Math.round(O.height*O.pixelDensity);(L!==w||v!==b)&&(e.width=a.width=L,e.height=a.height=v,l.viewport(0,0,L,v),w=L,b=v)}function N(){l.clear(l.COLOR_BUFFER_BIT),s&&Yr(s)}function M(O){let L=l.getError();if(L!==0)throw new Error(`${L}:${O}`)}function D(){u.display=n(),P(u.display),M("fast_resize"),N(),M("fast_clear");let O=o(u);if(O.length===0)return!1;let L=O.map(v=>v.shaderSource).flat(1/0);for(Mt(g,L)||x(L),M("fast_program"),h=1,O.forEach(v=>k(A(v.textures)));h<d.length;)d[h++]=null;return M("fast_textures"),O.forEach(v=>y.set(v.uniforms)),y.set({u_PixelDensity:u.display.pixelDensity,u_Alpha:r()}),M("fast_uniforms"),l.drawArrays(l.TRIANGLES,0,6),M("fast_draw"),i&&(s==null||s.drawImage(a,0,0)),!0}return{draw(){try{let O=D();return M("fast_done"),{pass:O}}catch(O){return console.error(O),{pass:!1,err:`${O}`}}}}}var So=300,lf=300,uf=1,gT=Fs(So/2,0,0,So/2,So/2),ux=kt({start:0,delta:120,size:3},{start:60,delta:-60,size:3}),yT=new Float32Array([1,0,2,0,3,0,4,0,5,0,8,0,6,0,8,0,NaN,NaN]),xT=Jr(ux,yT),vT=ae([0,7],[[0,[255,255,255]],[1,[0,0,255]],[2,[0,255,0]],[3,[0,255,255]],[4,[255,0,0]],[5,[255,0,255]],[6,[255,255,0]],[7,[255,255,255]]],8);function en(e,t,r){let n=new Uint8Array(4);return e.readPixels(t,r,1,1,e.RGBA,e.UNSIGNED_BYTE,n),[...n]}function fx(e){var r,n;console.time("glTest");let t={pass:!1};try{let o=so(So,lf);e&&(V(o).style("width",`${So/uf}px`).style("height",`${lf/uf}px`).style("position","absolute").style("top","0").style("left","0"),(r=e.node())==null||r.appendChild(o));let i=cc(o);if(!i)return t.hasContext=!1,t;let a=Z(i.getParameter(i.MAX_TEXTURE_SIZE),-1);if(a<4096)return t.maxTexSize=a,t;let s=Z((n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT))==null?void 0:n.precision,-1);if(s<23)return t.precision=s,t;t.scenario=1;let c=lc(o,void 0,()=>1,()=>({width:So,height:lf,pixelDensity:uf}),f=>[gT.webgl(f),ux.webgl(f),xT.webgl(f),vT.webgl(f)]).draw();if(c.err)return t.err=c.err,t;let l=[Mt(en(i,195,280),[0,0,255,255]),Mt(en(i,195,252),[0,255,0,255]),Mt(en(i,195,210),[0,255,255,255]),Mt(en(i,195,150),[255,0,0,255]),Mt(en(i,195,100),[255,0,255,255]),Mt(en(i,195,40),[255,255,0,255]),Mt(en(i,195,15),[255,255,255,255]),Mt(en(i,145,15),[0,0,0,0])];if(l.some(f=>!f))return t.colorMatch=l,t;let u=i.getError();u!==0?t.err=u:t.pass=!0}catch(o){console.error(o),t.err=`${o}`}finally{console.timeEnd("glTest")}return t}function px(e,t,r,n,o,i){let{fastoverlayAgent:a,globeAgent:s,activeLayerAgent:c,rendererAgent:l,viewboxAgent:u}=t,f=fx(Kd()?e:void 0),p=f.pass?"ok":JSON.stringify(f);if(console.log(`test gl: ${p}`),ut("report",{category:"gl",message:p}),!f.pass)return;function m(){return r.get()!=="none"&&!!l.value()}function d(){return c.value()}function h(){let M=d(),D=o.get()?M==null?void 0:M.alpha.animated:M==null?void 0:M.alpha.single;return(D!=null?D:0)/255}function g(){let{width:M,height:D}=u.value();return{width:M,height:D,pixelDensity:n.get()?1:.5}}function y(M){var D,O,L;return(L=(D=s.value())==null?void 0:(O=D.projection.optimize()).webgl)==null?void 0:L.call(O,M)}function w(M){var D,O,L,v;return(v=(O=(D=d())==null?void 0:D.grid)==null?void 0:(L=O.call(D)).webgl)==null?void 0:v.call(L,M)}function b(M){var O,L,v;let D=(L=(O=d())==null?void 0:O.field)==null?void 0:L.call(O)[i.get()];return(v=D==null?void 0:D.webgl)==null?void 0:v.call(D,M)}function x(M){var D,O,L;return(L=(D=d())==null?void 0:(O=D.scale).webgl)==null?void 0:L.call(O,M)}function _(M){if(!m())return[];let D=[y(M),w(M),b(M),x(M)].filter(jr);return D.length===4?D:[]}let{width:A,height:k}=u.value(),P=e.select("[data-name=fastoverlay]").style("width",`${A}px`).style("height",`${k}px`).node();if(!P)return;let N=lc(P,th()?so():void 0,h,g,_);r.on(T`change`,N.draw),n.on(T`change`,N.draw),o.on(T`change`,N.draw),i.on(T`change`,N.draw),c.on(T`update`,N.draw),l.on(T`redraw render`,N.draw),u.on(T`update`,M=>{V(P).style("width",`${M.width}px`).style("height",`${M.height}px`)}),a.submit(N)}function wT(e){return new Promise((t,r)=>{navigator.geolocation.getCurrentPosition(t,r,e)})}var ST=new Map([[1,R`Finding current location is not allowed`],[2,R`Current location is not available`],[3,R`Finding current location took too long`]]);function TT(e){var t;throw new Error((t=ST.get(e.code))!=null?t:R`Finding current location is not supported`,{cause:e})}function mx(){return wT({timeout:15e3}).catch(TT)}function dx(e,t){io(e,function(){ke.status(R`Finding current location...`);function r({coords:n}){var a;let o=+n.longitude,i=+n.latitude;if(o===o&&i===i){let s=ge((a=t.get("orientation"))!=null?a:{},{rotate:[-o,-i]});t.save({spotlight_coords:[o,i],orientation:s})}ke.reset()}mx().then(r).catch(ke.error)})}function ff(e){return Fl(e)&&!ki(e)}function hx(e){return e.find(ff)}function uc(e,t,r){let n=e.length;for(let o=t+r;0<=o&&o<n;o+=r){let i=e[o];if(ff(i))return i}}function gx(e){return uc(e,e.length,-1)}function _T(){try{return new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch{let t=document.createEvent("MouseEvents");return t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t}}function rt(e){let t=typeof e=="string"?V(e).node():e;return t instanceof Element&&ff(t)?(t.dispatchEvent(_T()),!0):!1}function yx(e,t,r,n,o){function i(){return r.save({show_date_chooser:!1,show_settings:!1})||n.hideTooltip()||t.save({notice:void 0})||t.save({status:void 0,error:void 0})||e.save({spotlight_coords:void 0})||t.save({show_menu:!1})||t.save({show_cta:!1})}let a=V("[data-name=z_level]").selectAll("button").nodes();function s(){let{mode:d,z_level:h}=e.getAll(),g=d==="air"?a.findIndex(y=>y.dataset.name===h):NaN;return g>=0?g:NaN}function c(){let d=V("html"),h=d.property("dir");return d.property("dir",h==="ltr"?"rtl":"ltr"),!0}function l(){let d=V("html"),h=d.classed("a11y-tests-grayscale");return d.classed("a11y-tests-grayscale",!h),!0}function u(){return localStorage.clear(),e.reset(),t.reset(),r.reset(),!0}let f=!0;function p(d){switch(d){case"Escape":return i();case"Alt-Ø":case"Alt-O":return c();case"Alt-Shift-˝":case"Alt-G":return l();case"Alt-Shift-˛":case"Alt-X":return u();case"Alt-∑":case"Alt-w":return f=!f,!0}return!1}function m(d){switch(d){case"e":return rt("[data-name=earth]");case"I":return rt(gx(a));case"i":return rt(uc(a,s(),1));case"m":return rt(uc(a,s(),-1));case"M":return rt(hx(a));case"n":return rt("[data-name=nav-now]");case"C":return rt("[data-name=show-date-chooser]");case"J":return rt("[data-name=nav-prev2]");case"j":return rt("[data-name=nav-prev1]");case"k":return rt("[data-name=nav-next1]");case"K":return rt("[data-name=nav-next2]");case"g":return rt("[data-name=toggle-grid]");case"p":return rt("[data-name=toggle-animation]");case"H":return rt("[data-name=toggle-hd]");case"d":return o.reorient({scaleBy:1.003}),!0;case"D":return o.reorient({scaleBy:1.05}),!0;case"x":return o.reorient({scaleBy:.997}),!0;case"X":return o.reorient({scaleBy:.95}),!0;case"z":return o.reorient(f?{rotateBy:[0,-.125]}:{translateBy:[0,1]}),!0;case"Z":return o.reorient(f?{rotateBy:[0,-1]}:{translateBy:[0,10]}),!0;case"w":return o.reorient(f?{rotateBy:[0,.125]}:{translateBy:[0,-1]}),!0;case"W":return o.reorient(f?{rotateBy:[0,1]}:{translateBy:[0,-10]}),!0;case"s":return o.reorient(f?{rotateBy:[.125,0]}:{translateBy:[1,0]}),!0;case"S":return o.reorient(f?{rotateBy:[1,0]}:{translateBy:[10,0]}),!0;case"a":return o.reorient(f?{rotateBy:[-.125,0]}:{translateBy:[-1,0]}),!0;case"A":return o.reorient(f?{rotateBy:[-1,0]}:{translateBy:[-10,0]}),!0;case"T":return rt("[data-name=show-settings]")}return!1}return V("body").on(T`keydown`,ar(p)).on(T`keypress`,ar(m)),{interpretKeyPress:m}}function ET(e,t){let r=e==="wind"?"air":e;switch(t){case"currents":return{mode:r,animation_type:"currents",z_level:"surface"};case"level":return{mode:r,animation_type:"wind",z_level:"surface"};case"waves":return{mode:r,animation_type:"primary_waves",z_level:"surface"}}return{mode:r,animation_type:"wind",z_level:t}}function AT({mode:e,animation_type:t,z_level:r}){let n=e==="air"?"wind":e;switch(t){case"currents":return[n,"surface","currents"];case"primary_waves":return[n,"primary","waves"]}switch(r){case"surface":return[n,"surface","level"]}return[n,"isobaric",r]}function PT(e){var s;let t=(s=e==null?void 0:e.split(","))!=null?s:[],r=-Z(t[0]),n=-Z(t[1]),o=r===r&&n===n?[r,n]:void 0,i=Z(t[2]);return ge({scale:i===i?i:void 0,rotate:o})}function MT(e){var a,s,c,l,u;let t=-((s=(a=e==null?void 0:e.rotate)==null?void 0:a[0])!=null?s:NaN),r=-((l=(c=e==null?void 0:e.rotate)==null?void 0:c[1])!=null?l:NaN),n=+((u=e==null?void 0:e.scale)!=null?u:NaN),o=`${t.toFixed(2)},${r.toFixed(2)}`,i=`${Math.round(n)}`;return t!==t||r!==r?n!==n?void 0:`,,${i}`:n!==n?o:`${o},${i}`}function DT(e){if(e[1]==="current")return"now";let t=Z(e[2]),r=Z(e[3]),n=Z(e[4]),o=po(e[5],4),i=Z(o.substring(0,2)),a=Z(o.substring(2));return re({year:t,month:r,day:n,hour:i,minute:a}).toISOString()}function xx(e,t,r,n){var s;let o=n(),i=/^#(current|(\d{4})\/(\d{1,2})\/(\d{1,2})\/(\d{3,4})Z)\/(\w+)\/(\w+)\/(\w+)(\/.+)?/.exec(e);if(!i)return o;o.time_cursor=DT(i),Object.assign(o,ET(i[6],i[8])),o.overlay_type=o.animation_type;let a;return((s=i[9])!=null?s:"").split("/").forEach(c=>{if(a=/^(\w+)(=([\d\-.,]*))?$/.exec(c)){if(t.has(a[1]))o.projection_type=a[1],o.orientation=PT(a[3]);else if(a[1]==="loc"){let l=typeof a[3]=="string"?a[3].split(","):[],u=Z(l[0]),f=Z(l[1]);u===u&&f===f&&(o.spotlight_coords=[u,f])}}else if(a=/^overlay=([\w.]+)$/.exec(c)){let l=a[1]==="off"?"none":a[1];r.has(l)&&(o.overlay_type=l)}else if(a=/^annot=(\w+)$/.exec(c))switch(a[1]){case"fires":o.annotation_type="fires"}else(a=/^grid=(\w+)$/.exec(c))?a[1]==="on"&&(o.show_grid_points=!0):(a=/^anim=(\w+)$/.exec(c))&&a[1]==="off"&&(o.animation_enabled=!1)}),o}function vx(e){let{mode:t,projection_type:r,orientation:n,time_cursor:o,z_level:i,animation_type:a,overlay_type:s,annotation_type:c,spotlight_coords:l,show_grid_points:u,animation_enabled:f}=e,{instant:p,isNow:m}=ee(o),d=m?"current":B(p,"{YYYY}/{MM}/{DD}/{hh}{mm}Z"),[h,g,y]=AT({mode:t,animation_type:a,z_level:i}),w=(c!=null?c:"none")!=="none"?`annot=${c}`:"",b=f?"":"anim=off",x=!s||s===a?"":`overlay=${s}`,_=u?"grid=on":"",A=[r,MT(n)].filter(P=>P).join("="),k=l?"loc="+l.map(P=>P.toFixed(3)).join(","):"";return"#"+[d,h,g,y,w,b,x,_,A,k].filter(P=>P).join("/")}function bx(e,t){let r=e.select(".field"),n=e.select("button");function o(){let i=t.get();e.property("hidden",(i!=null?i:"")===""),r.text(i!=null?i:null)}t.on(T`change`,o),n.on(T`click`,()=>t.set(void 0))}function wx(e,t){var i;let r=`settings.cta_force_hidden.${(i=e.attr("data-cta-version"))!=null?i:"none"}`,n=e.select("button");function o(){let a=ih(Br.get(r))||er();e.property("hidden",!t.get()||a)}eo()&&$(".cta-content").select("a").attr("target","_blank"),io(n,()=>{Br.put(r,"true"),t.set(!1)}),t.on(T`change`,o)}function Sx(e){let{primaryLayerAgent:t,overlayLayerAgent:r}=e,n=V("[data-name=z_level]").selectAll("button");function o(){var l,u,f;let a=(l=t.value())==null?void 0:l.supported_z_levels,s=(u=r.value())==null?void 0:u.supported_z_levels,c=new Set(a&&s?Ms(a,s):(f=a!=null?a:s)!=null?f:[]);n.attr("aria-disabled",function(){return!c.has(this.dataset.name)})}let i=et(o);t.on(T`update`,i),r.on(T`update`,i)}var pf={air:()=>({overlay_type:"wind",animation_type:"wind"}),ocean:()=>({overlay_type:"significant_wave_height",animation_type:"primary_waves"}),chem:()=>({overlay_type:"co2sc",animation_type:"wind"}),particulates:()=>({overlay_type:"pm2.5",animation_type:"wind"}),space:()=>({overlay_type:"aurora",animation_enabled:!1})};function Tx(e,t){var o,i;let r=e.get("mode");if(t===r)return;let n=ge({mode:t},(i=(o=pf[t])==null?void 0:o.call(pf))!=null?i:{});r==="space"&&(n.animation_enabled=!0),e.save(n)}function _x(e,t,r,n){if(!e)return;let{primaryLayerAgent:o,overlayLayerAgent:i,annotationLayerAgent:a,fieldAgent:s}=r;Q.on(T`change`,(u,f,p)=>e.stateChanged(u,f,p)),oe.on(T`change`,(u,f,p)=>e.stateChanged(u,f,p)),ir.on(T`change`,(u,f,p)=>e.stateChanged(u,f,p));let c=et(()=>{e.layersChanged(t.getLayers())});o.on(T`update`,c),i.on(T`update`,c),a.on(T`update`,c);function l(u,f){let p=+u[0],m=+u[1],d=+f[0],h=+f[1],g=s.value();p===p&&m===m&&d===d&&h===h&&(g!=null&&g.isInsideBoundary(p,m))&&e.click([p,m],[d,h])}n.on(T`click`,l)}function hf(e){return"symbol"in e?e.symbol:"name"in e?e.name:""}function kT(e){let t=e.valueInRange(0),r=e.valueInRange(1),n=Object.fromEntries(e.unitDescriptors.map(o=>[hf(o),[o.convertScalar(t),o.convertScalar(r)]]));return{type:e.scale.type,range:n,colors:e.scale.colors}}function RT(e){switch(e.type){case"category":{let t=e;return{type:"enum",name:t.name,elements:t.categories}}case"scalar":case"vec2":case"object":{let t=e;return{type:"quantity",symbol:t.symbol,symbolHTML:t.symbolHTML,precision:t.precision,convention:t.convention}}default:throw new Error("unknown units type: "+e.type)}}function CT(e){return e.map(t=>{switch(t.type){case"regular":{let{start:r,end:n,frequency:o}=t;return{type:"recurring_interval",start:r,end:n,frequency:o}}case"irregular":return{type:"fixed",points:t.points};case"continuous":{let{start:r,end:n}=t;return{type:"continuous",start:r,end:n}}}})}function mf(e){var f;let t=e.name,r=e.sourceHTML,n=e.descriptionHTML,o=[n.name,n.qualifier].filter(p=>p).join(""),i=(f=e.validTime)==null?void 0:f.call(e),a=Object.fromEntries(e.unitDescriptors.map(p=>[hf(p),RT(p)])),s=CT(e.timeline),c=e.navLabels,l=e.supported_z_levels;return{name:t,source:r,description:o,validTime:i!==void 0?B(i,"{YYYY}-{MM}-{DD} {hh}:{mm}Z"):void 0,units:a,timeline:s,nav:c,supportedLevels:l,scale:kT(e)}}function NT(e,t,r){return t===null&&Q.get("overlay_type")!=="none"&&(t=e),[e!==null?{type:"animation",product:mf(e)}:void 0,t!==null?{type:"overlay",product:mf(t)}:void 0,r!==null?{type:"annotation",product:mf(r)}:void 0]}function df(e,t){var a;if(!e)return;let[r=NaN,n=NaN]=t!=null?t:[];if(r!==r||n!==n)return;let o=(a=e.field)==null?void 0:a.call(e)[oe.get("interpolation_type")],i=o==null?void 0:o(r,n);if(!(i==null||i!==i))return zr(i)||qr(i)?e.unitDescriptors.map(s=>({value:s.convert(i),units:hf(s)})):i}function LT(e,t,r,n){return t===null&&Q.get("overlay_type")!=="none"&&(t=e),[df(e,n),df(t,n),df(r,n)]}function Ex(e,t,r){return{getState(){return Object.assign({},oe.getAll(),Q.getAll())},saveState(n,o){let i=oe.validate(Cs(n,oe.fields)),a=Q.validate(Cs(n,Q.fields));oe.save(i,o),Q.save(a,o)},getProjection(){var o,i;let n=(i=(o=t.globeAgent.value())==null?void 0:o.projection)!=null?i:void 0;return n!==void 0?Pn(n):void 0},reorient(n){r.reorient(n)},getLayers(){return NT(t.primaryLayerAgent.value(),t.overlayLayerAgent.value(),t.annotationLayerAgent.value())},sampleAt(n,o){var a,s,c,l;let i=(l=o!=null?o:(c=(a=t.globeAgent.value())==null?void 0:(s=a.projection).invert)==null?void 0:c.call(s,n!=null?n:[NaN,NaN]))!=null?l:[NaN,NaN];return LT(t.primaryLayerAgent.value(),t.overlayLayerAgent.value(),t.annotationLayerAgent.value(),i)},annotate(n,o){var i;Yi(e.select("[data-name=annotation]"),n,o,(i=t.globeAgent.value())==null?void 0:i.projection)}}}var OT={date:"",coordinates:[NaN,NaN],frp:NaN};function IT(...e){return Promise.allSettled(e.map(t=>$u.resolve("firms",t)).map(t=>Wi(t))).then(t=>{if(t.every(r=>r.status==="rejected"))throw new Error("Failed to download fire data: "+t[0].reason.error);return t.filter(r=>r.status==="fulfilled").map(r=>r.value)})}var fc;function FT(e){let{instant:t,isNow:r}=ee(e),n=r?"current":B(t,"{YYYY}"),o=r?"current":B(t,"{YYYY}{MM}{DD}"),i=[`${n}/${o}-firms.epak`];if(!r){let a=Dn(tt(t,{day:-1})),s=`${B(a,"{YYYY}")}/${B(a,"{YYYY}{MM}{DD}")}-firms.epak`;i.push(s)}return fc&&$r(i,fc.files)?Promise.resolve(fc):IT(...i).then(HT).then(a=>fc={files:i,payload:a})}function VT(e){let[t,r,n,o]=e.blocks.map(a=>a.data),i=[];for(let a=0;a<t.length;a++)i[a]={timestamp:t[a],coords:[r[a],n[a]],frp:o[a]};return i}var To={lo:0,hi:50},Px=function(){let t=new Uint8Array(2e3);for(let r=0;r<500;r++){let n=Ae(xi(Ke(r,499,0,.4,1))).rgb(),o=r*4;t[o]=n.r,t[o+1]=n.g,t[o+2]=n.b,t[o+3]=255}return Ye([To.lo,To.hi],t)}();function UT(e){let[t,r,n,o]=Px.rgba(e);return Ze(t,r,n,o/255)}function HT(e){let t=(i,a)=>a.frp-i.frp,r=(i,a)=>i.timestamp-a.timestamp||i.frp-a.frp,n=e.map(VT).flat().sort(r),o=n.map(i=>i.timestamp);return i=>{let a=+re(ee(i).instant),s=An(o,a-16*wr),c=An(o,a+1),l=n.slice(s,c).map(f=>{let p=a-f.timestamp,m=pe(Ke(p,4*wr,11*wr,1,.5),.5,1),d=pe(Ke(p,8*wr,16*wr,1,0),0,1),h=lr(UT(f.frp));return h.s*=m,h.opacity=d,{timestamp:f.timestamp,coords:f.coords,frp:f.frp,radius:pe(Ke(f.frp,To.lo,To.hi,.75,1),.75,1),color:h.formatRgb()}}),u=Array.from(l).sort(t).slice(0,2e3).sort(r);return{timestamp:a,topFires:u,allFires:l}}}function GT(e,t){if(t!==void 0)for(let r=e.length-1;r>=0;r--){let n=e[r],[,,o]=n;if(Ni(n,t)<=o)return n}}function jT(e,t){function r(n,o){var g,y;let{width:i=NaN,height:a=NaN}=(g=e.value())!=null?g:{},s=pe(n.scale()/1e3,2,5),c=n.optimize().project,l=(y=t.get("spotlight_coords"))!=null?y:[NaN,NaN],[u,f]=c(l[0],l[1]),p=0<=u&&u<i&&0<=f&&f<a?[u,f]:void 0,m=[],d=new Set;for(let w=o.length-1;w>=0;w--){let b=o[w],{radius:x,coords:[_,A]}=b,[k,P]=c(_,A);if(0<=k&&k<i&&0<=P&&P<a){let N=Math.round(P*2)*1e7+Math.round(k*2);if(!d.has(N)){d.add(N);let M=x*s,D=[k,P,M,b];m.push(D)}}}let h=GT(m,p);return{circles:m,closest:h}}return r}var ia;function Ax(e,t){return{renderTo(r,n){let o=e();if(o===void 0||o.length===0)return;let i=t(n.projection(),o),a=i.circles;ia=i.closest;for(let s=a.length-1;s>=0;s--){let[c,l,u,f]=a[s];r.beginPath(),r.fillStyle=f.color,r.arc(c,l,u,0,br),r.fill()}if(ia!==void 0){let[s,c,l]=ia;r.beginPath(),r.fillStyle="white",r.arc(s,c,l,0,br),r.fill()}}}}function Mx(e,t,r){let{rendererAgent:n,viewboxAgent:o,annotationLayerAgent:i}=e,a;function s(f){var m;if(!f)return;let p=jT(o,t);f.dynamicItemsLo.add(Ax(()=>a==null?void 0:a.topFires,p)),f.dynamicItemsHi.add(Ax(()=>a==null?void 0:a.allFires,p)),a!==void 0&&((m=n.value())==null||m.draw())}function c(){function f(){var y;if((y=n.value())==null||y.draw(),!ia)return OT;let{timestamp:m,coords:d,frp:h}=ia[3],g=_e(m);return{date:B(g,"{YYYY}-{MM}-{DD}T{hh}:{mm}Z"),coordinates:d,frp:h}}function p(m){if(m.frp!==m.frp)return Ks();let{precision:d,symbol:h}=this,y=r.get("display_timezone")==="device"?Gu(m.date):_e(m.date),w=`${B(y,"{MM}-{DD} {hh}:{mm}")},   ${m.frp.toFixed(d)}`,b=`${m.frp.toFixed(d)} ${h}`;return{valueText:w,valueHTML:w,valueAndUnitsText:b,valueAndUnitsHTML:b}}return lg({name:"fires",sourceHTML:P0,descriptionHTML:{name:R`Fire Detections`,qualifier:""},timeline:[{type:"continuous",start:"2021-04-13T02:00Z"}],validTime(){},unitDescriptors:W({MW:{type:"object",precision:2,format:p}}),valueInRange(m){return Ke(m,0,1,To.lo,To.hi)},scale:Px,field:()=>({type:"object",valueAt:()=>{throw new Error("unexpected")},isDefined:()=>{throw new Error("unexpected")},scalarize:()=>{throw new Error("unexpected")},nearest:f,bilinear:f})})}function l(){var m;let{time_cursor:f,annotation_type:p}=t.getAll();if(p!=="fires"){a!==void 0&&(a=void 0,(m=n.value())==null||m.draw(),i.submit(null));return}FT(f).then(d=>{a=d.payload(f),i.submit(c())}).catch(ke.error)}n.on(T`update`,s);let u=et(l);t.on(T`change:time_cursor`,u),t.on(T`change:annotation_type`,u),u()}function zT(){let e=JSON.stringify({url:window.location.href,agent:navigator.userAgent,viewbox:zi(V("html")),dom:document.documentElement.outerHTML}),t=V("body").append("div").attr("id","info-wrap").attr("aria-modal","true").append("div").attr("id","info").text(e);Object.entries({position:"absolute",top:"6rem",left:"1rem","max-width":"calc(100vw - 4rem)","max-height":"5rem",background:"white",color:"black",padding:"1rem","overflow-y":"scroll","overflow-x":"hidden","font-size":"x-small","word-break":"break-all","overflow-wrap":"anywhere"}).forEach(([r,n])=>t.style(r,n))}function Dx(e){let t=[],r=fo(()=>t.length=0,6e3),n=()=>t.some((o,i)=>t[i]>=90&&t[i+1]===0&&t[i+2]<=-90);e.on(T`click`,(o,i)=>{let a=Math.round(i[1]/2)*2;t.push(a),n()&&zT(),r()})}var X={animation_enabled:Q.handle("animation_enabled"),projection_type:Q.handle("projection_type"),orientation:Q.handle("orientation"),overlay_type:Q.handle("overlay_type"),annotation_type:Q.handle("annotation_type"),spotlight_coords:Q.handle("spotlight_coords"),z_level:Q.handle("z_level"),animation_type:Q.handle("animation_type"),mode:Q.handle("mode"),time_cursor:Q.handle("time_cursor"),display_timezone:oe.handle("display_timezone"),progress:oe.handle("progress"),notice:oe.handle("notice"),hd_enabled:oe.handle("hd_enabled"),interpolation_type:oe.handle("interpolation_type"),selected_units:oe.handle("selected_units"),colorbar_cursor:oe.handle("colorbar_cursor"),show_menu:oe.handle("show_menu"),font_size:oe.handle("font_size")};function BT(){let e=V("html").attr("lang");V("#lang-menu-modal").select(`a[lang='${e}']`).classed("selected modal-focus",!0).select(function(){return this.parentElement}).lower();let t=ox(window.navigator);t!==e&&V(".lang-shortcuts").select(`a[lang='${t}']`).property("hidden",!1)}function $T(){er()&&$(".kiosk").property("hidden",!0)}function qT(e,t){function r(){var a,s;let{width:n,height:o}=e.value(),i=(a=window.devicePixelRatio)!=null?a:1;$(".fill-screen").style("width",`${n}px`).style("height",`${o}px`).attr("width",n).attr("height",o),$(".max-screen").style("width",`${n}px`).style("height",`${o}px`).attr("width",n*i).attr("height",o*i).nodes().forEach(c=>c.getContext("2d").scale(i,i)),(s=t.value())==null||s.draw()}r(),e.on(T`update`,r)}function WT(){function e(){window.open(window.location.href,"_blank")}let t=$("[data-name=earth]");to()?t.on(T`click`,e):Uh(t,X.show_menu),er()||$("[data-name=earth]").on(T`click`,()=>$(".ham").property("hidden",!0))}function kx(){function e(){let t=V(this),r=t.attr("data-link");return r?`${r}${er()?"?kiosk":""}${window.location.hash}`:t.attr("href")}$("a[lang]").attr("href",e),$("a.dyna-link").attr("href",e)}function YT(){function e(n){let o=window.location.hash,i=xx(o,b0,Py,Q.initialState);Q.save(Q.validate(i),{source:"hash_read",force:n}),kx()}function t(n,o,i){let a=vx(Q.getAll());window.location.hash!==a&&(i==null?void 0:i.source)!=="hash_read"&&(window.history.pushState(null,"",a),kx())}let r=et(t);Q.on(T`change`,r),V(window).on(T`hashchange`,()=>e(!1)),e(!0)}function XT(){Zd()==="test"&&X.notice.set("temporary beta preview")}function KT(){var o,i,a,s;let e=(i=(o=Q.get("orientation"))==null?void 0:o.rotate)!=null?i:[],t=(a=Tr(e[0]))!=null?a:NaN,r=(s=Tr(e[1]))!=null?s:NaN,n=Q.get("overlay_type");t.toFixed(2)==="232.72"&&r.toFixed(2)==="-37.64"&&(n==="pm2.5"||n==="pm10")&&ut("report",{category:"app",message:"mise"})}function JT(){new MutationObserver(()=>{xs()&&Rx(V("exclude-nothing"))}).observe(document.querySelector("[data-name=earth]"),{attributeFilter:["style"]})}function ZT(e,t,r){w0(t,X.projection_type,X.orientation),v0(t,oe.handle("map_scene")),T0(e,t,r,X.orientation),ky(t,Q,oe),px(e,t,X.overlay_type,X.hd_enabled,X.animation_enabled,X.interpolation_type),Ly(t,X.progress,X.hd_enabled,X.interpolation_type),Iy(e,t,Q),Oy(e,t,X.animation_enabled)}function Rx(e){let t=e.nodes();return $("main > *").filter(function(){return!t.includes(this)}).remove(),{shortcutController:{interpretKeyPress:()=>!1}}}function QT(e,t,r){let{primaryLayerAgent:n,overlayLayerAgent:o,activeLayerAgent:i,annotationLayerAgent:a}=t;BT(),$T(),Yy(V("#menu"));let s=qy($("[role=tooltip]"));return WT(),wx($(".cta-bar"),oe.handle("show_cta")),Uy($("[role=progressbar]"),X.progress),$y(V("#menu"),oe,t),tx(V(".colorbar"),X.colorbar_cursor,X.selected_units,i,s),Qr($("[role=radiogroup][data-name=projection_type]"),X.projection_type,l=>Q.save({projection_type:l,orientation:{}})),Qr($("[role=radiogroup][data-name=overlay_type]"),X.overlay_type,l=>{let u={overlay_type:l};l==="wind_power_density"&&X.z_level.get()==="surface"&&(u.z_level="1000hPa"),Q.save(u)}),Qr($("[role=radiogroup][data-name=annotation_type]"),X.annotation_type),Qr($("[role=radiogroup][data-name=z_level]"),X.z_level),Sx(t),Qr($("[role=radiogroup][data-name=animation_type]"),X.animation_type),Gy($("[role=tablist][data-name=mode]"),X.mode,Tx.bind(null,Q)),jy($("[role=toolbar]")),Os($("[data-name=nav-now]"),Q,{time_cursor:"now"}),Os($("[data-name=show-date-chooser]"),ir,{show_date_chooser:!0}),zy($("#nav-arrows"),X.time_cursor,i),Is($("[data-name=toggle-grid]"),Q.handle("show_grid_points")),Is($("[data-name=toggle-animation]"),Q.handle("animation_enabled")),Is($("[data-name=toggle-hd]"),oe.handle("hd_enabled")),dx($("[data-name=show-current-position]"),Q),Os($("[data-name=show-settings]"),ir,{show_settings:!er()}),bx($("[data-name=notice-card]"),X.notice),Ky(V("#spotlight-panel"),X.spotlight_coords),Jy(e.select("[data-name=annotation]"),t,X.spotlight_coords),ac(V("[data-name=spotlight-a]"),X.spotlight_coords,X.selected_units,X.interpolation_type,n),ac(V("[data-name=spotlight-b]"),X.spotlight_coords,X.selected_units,X.interpolation_type,o),ac(V("[data-name=spotlight-c]"),X.spotlight_coords,X.selected_units,X.interpolation_type,a),sc(V("#lang-menu-modal"),ir,"show_settings"),nx(V("#choose-date-modal"),ir,"show_date_chooser",X.time_cursor,i,X.display_timezone),Qr(V("[data-name=interpolation-type]"),X.interpolation_type),Qr(V("[data-name=font-size]"),X.font_size),X.font_size.on(T`change`,l=>V("html").attr("data-font-size",l!=null?l:null)),{shortcutController:yx(Q,oe,ir,s,r)}}function Cx(e){var l;let t=V("#main-display");console.time("setup"),ke.status("Initializing...");let r=e==null?void 0:e.wrap(),n=Wh(t),{viewboxAgent:o,animatorAgent:i}=n,a=i0(t,Q,o,r);Zy(n,X.spotlight_coords,a);let s=Ex(t,n,a);e==null||e.expose(s),_x(r,s,n,a),$h(o,t),qT(o,n.fastoverlayAgent),ZT(t,n,a);let{shortcutController:c}=Sr()?Rx($(".core-ui")):QT(t,n,a);if(JT(),Sr()){let u=Object.assign({},ir.initialState(),oe.initialState(),Q.initialState(),(l=e==null?void 0:e.initialState)!=null?l:{});s.saveState(u,{force:!0})}else ir.reset(),oe.reset(),YT();return XT(),KT(),Mx(n,Q,oe),Dx(a),console.timeEnd("setup"),{d3:le,sharedStore:Q,sessionStore:oe,send(u){uo(()=>c.interpretKeyPress(u))},frame(){uo(()=>i.value().frame())}}}var Lx=Symbol("Comlink.proxy"),e_=Symbol("Comlink.endpoint"),t_=Symbol("Comlink.releaseProxy"),gf=Symbol("Comlink.finalizer"),mc=Symbol("Comlink.thrown"),Ox=e=>typeof e=="object"&&e!==null||typeof e=="function",r_={canHandle:e=>Ox(e)&&e[Lx],serialize(e){let{port1:t,port2:r}=new MessageChannel;return yc(e,t),[r,[r]]},deserialize(e){return e.start(),xf(e)}},n_={canHandle:e=>Ox(e)&&mc in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Ix=new Map([["proxy",r_],["throw",n_]]);function o_(e,t){for(let r of e)if(t===r||r==="*"||r instanceof RegExp&&r.test(t))return!0;return!1}function yc(e,t=globalThis,r=["*"]){t.addEventListener("message",function n(o){if(!o||!o.data)return;if(!o_(r,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}let{id:i,type:a,path:s}={path:[],...o.data},c=(o.data.argumentList||[]).map(kn),l;try{let u=s.slice(0,-1).reduce((p,m)=>p[m],e),f=s.reduce((p,m)=>p[m],e);switch(a){case"GET":l=f;break;case"SET":u[s.slice(-1)[0]]=kn(o.data.value),l=!0;break;case"APPLY":l=f.apply(u,c);break;case"CONSTRUCT":{let p=new f(...c);l=u_(p)}break;case"ENDPOINT":{let{port1:p,port2:m}=new MessageChannel;yc(e,m),l=l_(p,[p])}break;case"RELEASE":l=void 0;break;default:return}}catch(u){l={value:u,[mc]:0}}Promise.resolve(l).catch(u=>({value:u,[mc]:0})).then(u=>{let[f,p]=gc(u);t.postMessage({...f,id:i},p),a==="RELEASE"&&(t.removeEventListener("message",n),Fx(t),gf in e&&typeof e[gf]=="function"&&e[gf]())}).catch(u=>{let[f,p]=gc({value:new TypeError("Unserializable return value"),[mc]:0});t.postMessage({...f,id:i},p)})}),t.start&&t.start()}function i_(e){return e.constructor.name==="MessagePort"}function Fx(e){i_(e)&&e.close()}function xf(e,t){return yf(e,[],t)}function pc(e){if(e)throw new Error("Proxy has been released and is not useable")}function Vx(e){return _o(e,{type:"RELEASE"}).then(()=>{Fx(e)})}var dc=new WeakMap,hc="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(dc.get(e)||0)-1;dc.set(e,t),t===0&&Vx(e)});function a_(e,t){let r=(dc.get(t)||0)+1;dc.set(t,r),hc&&hc.register(e,t,e)}function s_(e){hc&&hc.unregister(e)}function yf(e,t=[],r=function(){}){let n=!1,o=new Proxy(r,{get(i,a){if(pc(n),a===t_)return()=>{s_(o),Vx(e),n=!0};if(a==="then"){if(t.length===0)return{then:()=>o};let s=_o(e,{type:"GET",path:t.map(c=>c.toString())}).then(kn);return s.then.bind(s)}return yf(e,[...t,a])},set(i,a,s){pc(n);let[c,l]=gc(s);return _o(e,{type:"SET",path:[...t,a].map(u=>u.toString()),value:c},l).then(kn)},apply(i,a,s){pc(n);let c=t[t.length-1];if(c===e_)return _o(e,{type:"ENDPOINT"}).then(kn);if(c==="bind")return yf(e,t.slice(0,-1));let[l,u]=Nx(s);return _o(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:l},u).then(kn)},construct(i,a){pc(n);let[s,c]=Nx(a);return _o(e,{type:"CONSTRUCT",path:t.map(l=>l.toString()),argumentList:s},c).then(kn)}});return a_(o,e),o}function c_(e){return Array.prototype.concat.apply([],e)}function Nx(e){let t=e.map(gc);return[t.map(r=>r[0]),c_(t.map(r=>r[1]))]}var Ux=new WeakMap;function l_(e,t){return Ux.set(e,t),e}function u_(e){return Object.assign(e,{[Lx]:!0})}function gc(e){for(let[t,r]of Ix)if(r.canHandle(e)){let[n,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},o]}return[{type:"RAW",value:e},Ux.get(e)||[]]}function kn(e){switch(e.type){case"HANDLER":return Ix.get(e.name).deserialize(e.value);case"RAW":return e.value}}function _o(e,t,r){return new Promise(n=>{let o=f_();e.addEventListener("message",function i(a){!a.data||!a.data.id||a.data.id!==o||(e.removeEventListener("message",i),n(a.data))}),e.start&&e.start(),e.postMessage({id:o,...t},r)})}function f_(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function m_(e,t){return{expose:r=>yc(r,e),wrap:()=>xf(e),initialState:t}}function d_(e){if(!e||e instanceof MessagePort||e instanceof ServiceWorker)return!1;let t=e;return t===t}function Hx(e){return new Promise(t=>{function r(n){let{origin:o,source:i,data:a}=n;if(!e.has(o)||!d_(i)||!bt(a))return;let{api:s,version:c,action:l,initialState:u}=a,f="id"in a?{id:a.id}:{};if(s!=="net.nullschool.earth")return;if(c!==1||l!=="connect"){let h={api:s,version:c,action:l,...f,success:!1,result:"unknown api/version"};return i.postMessage(h,o)}let{port1:p,port2:m}=new MessageChannel,d={api:s,version:c,action:l,...f,success:!0,result:"connected"};i.postMessage(d,o,[m]),window.removeEventListener("message",r),t(m_(p,u))}window.addEventListener("message",r)})}console.log("starting...");function Gx(e){try{Cx(e)}catch(t){ke.error(t)}}function h_({xrw:e}){var r,n;let t={referring_host:(n=(r=L0(document.referrer))==null?void 0:r.host)!=null?n:"",is_iframe:eo(),...e!==void 0?{xrw:e}:{}};ut("init",t)}(async function(){if(Xd()&&console.log("dev mode enabled"),ah().then(h_).catch(ke.error),window.addEventListener("touchmove",()=>{}),eo()&&zh(document.referrer))return void Bh();if(document.getElementById("failure_note").remove(),Sr()){let r=await Hx(new Set(["https://earthhq.org","https:https://gca-earth-hq-staging.cube-sites.com/","https://gca-earth-hq-test.cube-sites.com","https://localhost:8081","http://localhost:8081/","http://localhost:8083/"]));Gx(r);return}Gx()})();
/*! For license information please see main~C24K6OBN.js.LEGAL.txt */
//# sourceMappingURL=main~C24K6OBN.js.map
